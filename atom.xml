<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Doublemine</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://notes.wanghao.work/"/>
  <updated>2017-09-02T16:13:16.000Z</updated>
  <id>https://notes.wanghao.work/</id>
  
  <author>
    <name>å¤æœ«</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>DockeréRootè¿è¡Œ</title>
    <link href="https://notes.wanghao.work/2017-07-11-Docker%E9%9D%9ERoot%E7%94%A8%E6%88%B7%E8%BF%90%E8%A1%8C.html"/>
    <id>https://notes.wanghao.work/2017-07-11-DockeréRootç”¨æˆ·è¿è¡Œ.html</id>
    <published>2017-07-11T02:56:01.000Z</published>
    <updated>2017-09-02T16:13:16.000Z</updated>
    
    <content type="html"><![CDATA[<div class="note info"><p>Docker Engineçš„Deamonè¿›ç¨‹æ˜¯ä»¥rootæƒé™è¿è¡Œçš„ï¼Œå¦‚æœæ˜¯æ™®é€šç”¨æˆ·è¦ä¸ä¹‹äº¤äº’ï¼Œéœ€è¦ä½¿ç”¨<code>sudo</code>å‘½ä»¤æ¥ææƒä¸ä¹‹äº¤äº’ã€‚ä¹‹å‰ä½¿ç”¨Dockerå®˜æ–¹çš„å®‰è£…è„šæœ¬å®‰è£…å®Œæˆä¹‹åï¼Œä¼šç»™å‡ºä¸€ä¸ªæç¤ºå°†å½“å‰érootç”¨æˆ·æ·»åŠ åˆ°dokerç»„ä¹‹ä¸­ï¼Œä»¥é¿å…æ¯æ¬¡éƒ½éœ€è¦è¾“å…¥<code>sudo</code>çš„éº»çƒ¦ã€‚</p>
</div>
<p>ç„¶è€Œéšç€Dockerç‰ˆæœ¬çš„è¿­ä»£å’Œå®˜ç½‘çš„å®‰è£…æ–¹å¼çš„æ›´æ”¹ï¼Œç°åœ¨å®˜æ–¹ç»™å‡ºçš„å®‰è£…æ–¹å¼æ˜¯æ·»åŠ ä»“åº“æºåœ°å€ï¼Œç„¶åä½¿ç”¨é»˜è®¤çš„<code>apt</code>æˆ–è€…<code>yum</code>åŒ…ç®¡ç†å·¥å…·æ¥å®Œæˆåå®‰è£…ã€‚å¹¶ä¸å†æç¤ºç”¨æˆ·æ·»åŠ érootç”¨æˆ·åˆ°ç»„ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ŒæˆDocker Engineçš„å®‰è£…ä¹‹åï¼ŒDockerå°†ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªåä¸º<code>docker</code>çš„ç”¨æˆ·ç»„ï¼Œæ‰€ä»¥<code>root</code>ç”¨æˆ·å’Œåœ¨<code>docker</code>ç»„ä¸­çš„ç”¨æˆ·éƒ½å¯ä»¥å…å»<code>sudo</code>æ¥ä¸Docker Engineäº¤äº’ã€‚çŸ¥é“åŸç†ä¹‹åå°±ç®€å•äº†ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo usermod -aG docker $&#123;whoami&#125; #æ·»åŠ å½“å‰ç”¨æˆ·åˆ°dockerç»„</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;note info&quot;&gt;&lt;p&gt;Docker Engineçš„Deamonè¿›ç¨‹æ˜¯ä»¥rootæƒé™è¿è¡Œçš„ï¼Œå¦‚æœæ˜¯æ™®é€šç”¨æˆ·è¦ä¸ä¹‹äº¤äº’ï¼Œéœ€è¦ä½¿ç”¨&lt;code&gt;sudo&lt;/code&gt;å‘½ä»¤æ¥ææƒä¸ä¹‹äº¤äº’ã€‚ä¹‹å‰ä½¿ç”¨Dockerå®˜æ–¹çš„å®‰è£…è„šæœ¬å®‰è£…å®Œæˆä¹‹åï¼Œä¼šç»™å‡ºä¸€ä¸ªæç¤ºå°†å½“å‰ér
    
    </summary>
    
    
      <category term="Docker" scheme="https://notes.wanghao.work/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>Spring Bootä½¿ç”¨SpringFoxè‡ªåŠ¨ç”ŸæˆApi Doc</title>
    <link href="https://notes.wanghao.work/2017-06-30-Spring-Boot%E4%BD%BF%E7%94%A8Swagger%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90Api-Doc.html"/>
    <id>https://notes.wanghao.work/2017-06-30-Spring-Bootä½¿ç”¨Swaggerè‡ªåŠ¨ç”ŸæˆApi-Doc.html</id>
    <published>2017-06-30T02:56:01.000Z</published>
    <updated>2017-09-02T16:13:01.000Z</updated>
    
    <content type="html"><![CDATA[<div class="note info"><p>åœ¨åšAndroidå¼€å‘çš„æ—¶å€™ï¼Œå¯¹äºApiæ¥å£çš„å¯¹æ¥æœ‰ç€æ·±åˆ»çš„ä½“ä¼šï¼šåç«¯é€šè¿‡Markdownæˆ–è€…Wordå†™å¥½Apiæ–‡æ¡£ï¼Œç„¶åé€šè¿‡ç±»ä¼¼Sambaæˆ–è€…Dropboxè¿™æ ·çš„æœåŠ¡ä¸ç§»åŠ¨ç«¯å®ç°æ–‡æ¡£å…±äº«ã€‚æœ‰çš„æ—¶å€™å› ä¸ºæ¥å£å‡ºäº†é—®é¢˜ï¼Œä¸­é—´è¿˜å¾—æ¥å›ä¿®æ”¹å¯¹æ¥ï¼Œæ•ˆç‡ä½ä¸‹ä¸è¯´ï¼Œè¦æ˜¯åç«¯æ‰‹æŠ–å†™é”™å‚æ•°è€Œæ²¡æœ‰æ„è¯†åˆ°ï¼Œç§»åŠ¨ç«¯åŸ‹å¤´ä¸€é¡¿è°ƒè¯•ã€‚ã€‚ã€‚è¯´å¤šäº†éƒ½æ˜¯æ³ªã€‚</p>
</div>
<p>ä¸ºäº†é¿å…åŒæ—¶ç»´æŠ¤ä»£ç å’Œæ–‡æ¡£æ¥ä¿æŒä¸¤è€…ä¹‹é—´çš„åŒæ­¥è€Œå¸¦æ¥çš„é¢å¤–è´Ÿæ‹…ï¼ŒåŒäº‹æ¨èäº†<a href="http://apidocjs.com/" target="_blank" rel="external"><code>ApiDoc</code></a>æ¥ç”Ÿæˆæ–‡æ¡£ï¼Œè™½ç„¶ç”Ÿæˆçš„æ–‡æ¡£ç•Œé¢æ¯”è¾ƒæ¸…çˆ½ç„¶è€Œå‰ææ˜¯å¿…é¡»å¾—æŒ‰ç…§è§„å®šçš„è¯­æ³•å†™ä¸Šè¯¦ç»†çš„æ³¨é‡Šï¼Œæ‰èƒ½ç”Ÿæˆå¯¹åº”çš„æ–‡æ¡£ï¼Œè™½ç„¶å†™æ³¨é‡Šæœ¬èº«æ˜¯ä¸€ä»¶å¥½äº‹ï¼Œä¸è¿‡æœ‰èƒ½å¤Ÿè‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•ä¸ºå•¥ä¸ä½¿ç”¨å‘¢?</p>
<a id="more"></a>
<hr>
<p>ä¸<code>Apidoc</code>ç±»ä¼¼ï¼Œ<code>Swagger</code>ä¹Ÿæ˜¯ä¸€ä¸ªç”¨æ¥æ–‡æ¡£åŒ–Resetful Apiçš„é¡¹ç›®ï¼Œä¸è¿‡å¼€æºç¤¾åŒºçš„æ”¯æŒåº”è¯¥æ˜¯æ‰€æœ‰ç±»ä¼¼é¡¹ç›®ä¸­æœ€ä¸ºå®Œå–„çš„ï¼Œå› æ­¤é™¤äº†å¯ä»¥ä½¿ç”¨<a href="https://github.com/swagger-api/swagger-editor" target="_blank" rel="external">Swagger Editor</a>æ¥ç¼–å†™Apiæ–‡æ¡£ä¹‹å¤–ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨å…¶å®ƒå¯¹åº”çš„è‡ªåŠ¨åŒ–ç”Ÿæˆå·¥å…·ï¼Œä»¥æ­¤æ¥é¿å…åŒæ—¶ç»´æŠ¤æ–‡æ¡£å’Œä»£ç çš„éº»çƒ¦ï¼š</p>
<ul>
<li><a href="https://github.com/springfox/springfox" target="_blank" rel="external">Springfox</a> æ˜¯ä¸ºSpringè€Œæ‰“é€ çš„è‡ªåŠ¨åŒ–ç”Ÿæˆæ¥å£æ–‡æ¡£çš„å…¶ä¸­ä¸€ä¸ªJavaå®ç°</li>
<li><a href="https://github.com/marcgibbons/django-rest-swagger" target="_blank" rel="external">Django Reset Swagger</a> åˆ™æ˜¯ä¸ºDjangoè€Œæ‰“é€ çš„Pythonå®ç°ã€‚</li>
</ul>
<p>è¿™ç¯‡æ–‡ç« å°†ä»å¤´åˆ›å»ºä¸€ä¸ªSpring Booté¡¹ç›®å¹¶ä½¿ç”¨Springfoxæ¥ç”Ÿæˆå¯¹åº”çš„æ¥å£æ–‡æ¡£ï¼Œæ¥è¯´æ˜ä½¿ç”¨Springfoxæ˜¯å¤šä¹ˆçš„ç®€å•ã€‚é¦–å…ˆåˆ›å»ºSpring Booté¡¹ç›®ï¼š</p>
<h3 id="åˆ›å»ºSpring-Booté¡¹ç›®"><a href="#åˆ›å»ºSpring-Booté¡¹ç›®" class="headerlink" title="åˆ›å»ºSpring Booté¡¹ç›®"></a>åˆ›å»ºSpring Booté¡¹ç›®</h3><h4 id="Eclipse"><a href="#Eclipse" class="headerlink" title="Eclipse"></a>Eclipse</h4><p>å¦‚æœä½ æ˜¯ä½¿ç”¨Eclipseçš„è¯ï¼Œé‚£ä¹ˆï¼š</p>
<p><img src="https://camo.githubusercontent.com/8caa3693b4268c095c001089313d687f647d551a/687474703a2f2f696d67322e77696b69612e6e6f636f6f6b69652e6e65742f5f5f636232303133303831393134323932382f6361726466696768742f696d616765732f7468756d622f352f35352f476f2d686f6d652d796f7572652d6472756e6b2e6a70672f35303070782d476f2d686f6d652d796f7572652d6472756e6b2e6a7067" alt=""></p>
<h4 id="IntelliJ-IDEA"><a href="#IntelliJ-IDEA" class="headerlink" title="IntelliJ IDEA"></a>IntelliJ IDEA</h4><p>æˆ‘ä»¬ä½¿ç”¨IDEAçš„<code>Spring initializr</code>å‘å¯¼æ¥ç®€åŒ–åˆå§‹åŒ–åˆ›å»ºé¡¹ç›®ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://ws1.sinaimg.cn/large/694830ebgy1fh3qqzjjr9j21gu0w4td1.jpg" alt=""></p>
<p>ç‚¹å‡»ä¸‹ä¸€æ­¥æ ¹æ®ä¸ªäººçš„å–œå¥½æ¥é…ç½®å–œæ¬¢çš„JVMè¯­è¨€å’Œæ„å»ºå·¥å…·ï¼Œæ­¤å¤„æˆ‘é€‰æ‹©<code>Kotlin</code>å’Œ<code>Gradle</code>ï¼Œä¸€åˆ‡éƒ½æ˜¯ä¸ºäº†çˆ½ï¼š</p>
<p><img src="https://ws1.sinaimg.cn/large/694830ebgy1fh3qv1abohj21gu0w4jum.jpg" alt=""></p>
<p>ç‚¹å‡»ä¸‹ä¸€æ­¥é€‰æ‹©éœ€è¦é›†æˆçš„ä¾èµ–é¡¹ï¼Œæ­¤å¤„æˆ‘ä»¬ç®€å•æ¼”ç¤ºä¸‹Resetful Apiæ–‡æ¡£ç”Ÿæˆï¼Œæ‰€ä»¥é€‰æ‹©Webå³å¯ï¼Œå¦‚å›¾ï¼š</p>
<p><img src="https://ws1.sinaimg.cn/large/694830ebgy1fh45g74sdaj21gu0w4agg.jpg" alt=""></p>
<p>ç‚¹å‡»Nextç›´è‡³å®Œæˆã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†Spring Booté¡¹ç›®çš„åˆ›å»ºäº†ã€‚</p>
<hr>
<h3 id="æ·»åŠ Springfoxä¾èµ–"><a href="#æ·»åŠ Springfoxä¾èµ–" class="headerlink" title="æ·»åŠ Springfoxä¾èµ–"></a>æ·»åŠ Springfoxä¾èµ–</h3><p>ç¼–è¾‘æ ¹ç›®å½•ä¸‹çš„<code>build.gradle</code>æ–‡ä»¶ï¼Œä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">dependencies &#123;</div><div class="line">    .... <span class="comment">/*some depends...*/</span></div><div class="line">    compile <span class="string">"io.springfox:springfox-swagger2:$springfoxVersion"</span></div><div class="line">    compile <span class="string">"io.springfox:springfox-swagger-ui:$springfoxVersion"</span></div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">ext &#123;</div><div class="line">    springfoxVersion = <span class="string">'2.7.0'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="é…ç½®Springfox"><a href="#é…ç½®Springfox" class="headerlink" title="é…ç½®Springfox"></a>é…ç½®Springfox</h3><p>Springfoxé€šè¿‡<code>Docket</code>å¯¹è±¡æ¥å®šä¹‰ç”Ÿæˆçš„Apiçš„ä¸€äº›å±æ€§ï¼Œå› æ­¤æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªConfigureç±»æ¥ä¸“é—¨åšSpringfoxçš„é…ç½®ã€‚åˆ›å»ºä¸€ä¸ª<code>Swagger2Configure.kt</code>æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Configuration</span></div><div class="line"><span class="meta">@EnableSwagger2</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Swagger2Configure</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Bean</span> <span class="function"><span class="keyword">fun</span> <span class="title">petApi</span><span class="params">()</span></span>: Docket &#123;</div><div class="line">        <span class="keyword">return</span> Docket(DocumentationType.SWAGGER_2)</div><div class="line">                .apiInfo(generateApiInfo()) <span class="comment">/*å®šåˆ¶swagger uiæ˜¾ç¤ºçš„ç‰ˆæœ¬ä¿¡æ¯*/</span></div><div class="line">                .useDefaultResponseMessages(<span class="literal">false</span>)</div><div class="line">                .select()</div><div class="line">                <span class="comment">/*ç§»é™¤é»˜è®¤çš„Error Controller*/</span></div><div class="line">                .apis(Predicates.not(RequestHandlerSelectors.basePackage(<span class="string">"org.springframework.boot"</span>)))</div><div class="line">                .paths(PathSelectors.any())</div><div class="line">                .build()</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">generateApiInfo</span><span class="params">()</span></span>: ApiInfo &#123;</div><div class="line">        <span class="keyword">return</span> ApiInfoBuilder().title(<span class="string">"Spring Boot Api Doc"</span>)</div><div class="line">                .contact(Contact(<span class="string">"Doublemine"</span>, <span class="string">"https://notes.wanghao.work"</span>, <span class="string">"doublemine.w@gmail.com"</span>))</div><div class="line">                .description(<span class="string">"This is a sample api doc description"</span>)</div><div class="line">                .build()</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šè¿°ç¤ºä¾‹åªæ¼”ç¤ºäº†æœ€åŸºæœ¬çš„é…ç½®ï¼Œå¦‚æœæƒ³æŸ¥çœ‹å®Œæ•´çš„ç¤ºä¾‹è§£é‡Šï¼Œè¯·ç§»æ­¥<a href="http://springfox.github.io/springfox/docs/current/#configuration-explained" target="_blank" rel="external">Configuration explained</a>,è‡³æ­¤ï¼ŒSpringfoxçš„é…ç½®å°±å®Œæˆäº†ã€‚å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚</p>
<hr>
<h3 id="åˆ›å»ºæ¥å£"><a href="#åˆ›å»ºæ¥å£" class="headerlink" title="åˆ›å»ºæ¥å£"></a>åˆ›å»ºæ¥å£</h3><p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•çš„UserControlleræ¥æ¨¡æ‹Ÿè·å–ç”¨æˆ·ä¿¡æ¯ï¼Œ<code>UserController.kt</code>ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RequestMapping(<span class="meta-string">"/user/"</span>)</span></div><div class="line"><span class="meta">@RestController</span></div><div class="line"><span class="keyword">open</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> : <span class="type">BaseController</span></span>() &#123;</div><div class="line">    <span class="meta">@RequestMapping(value = <span class="meta-string">"/info/&#123;id&#125;"</span>, method = arrayOf(RequestMethod.GET)</span>)</div><div class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">getUserInfoById</span><span class="params">(<span class="meta">@PathVariable</span> id: <span class="type">Int</span>)</span></span>: User &#123;</div><div class="line">        <span class="keyword">return</span> User(id, <span class="string">"å°ç™½"</span>, <span class="number">35</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¯¹åº”çš„Model<code>User.kt</code>:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span></span>(<span class="keyword">val</span> id: <span class="built_in">Int</span>, <span class="keyword">var</span> name: String, <span class="keyword">var</span> age: <span class="built_in">Int</span>)</div></pre></td></tr></table></figure>
<p>è‡³æ­¤å°±å®Œæˆäº†ç®€å•çš„æ¥å£ï¼Œæ¥ç€æˆ‘ä»¬å¯åŠ¨é¡¹ç›®å¹¶è®¿é—®<a href="http://localhost:8080/swagger-ui.html" target="_blank" rel="external">http://localhost:8080/swagger-ui.html</a> ï¼Œä¸€åˆ‡æ­£å¸¸çš„è¯ï¼Œä½ å°†ä¼šçœ‹åˆ°ä»¥ä¸‹é¡µé¢ï¼š</p>
<p><img src="https://ws1.sinaimg.cn/large/694830ebgy1fh4gacpr8wj21sk0su0wr.jpg" alt=""></p>
<p>ä¸€èˆ¬æ¥è¯´è¿™æ ·å·²ç»èƒ½å¤Ÿæ»¡è¶³æˆ‘ä»¬çš„åŸºæœ¬éœ€è¦äº†ï¼Œå¦‚æœè¿˜éœ€è¦æ›´ä¸ºè¯¦ç»†çš„æ–‡æ¡£ï¼ŒSpringfoxä¹Ÿæä¾›çš„æ³¨è§£æ¥ç®€åŒ–é…ç½®è¿‡ç¨‹ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥ç¨å¾®ä¿®æ”¹ä¸‹<code>UserController.kt</code>ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Api(tags = arrayOf(<span class="meta-string">"ç”¨æˆ·ä¿¡æ¯"</span>)</span>)</div><div class="line"><span class="meta">@RequestMapping(<span class="meta-string">"/user/"</span>)</span></div><div class="line"><span class="meta">@RestController</span></div><div class="line"><span class="keyword">open</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> : <span class="type">BaseController</span></span>() &#123;</div><div class="line">    <span class="meta">@ApiOperation(<span class="meta-string">"è·å–ç”¨æˆ·ä¿¡æ¯"</span>, notes = <span class="meta-string">"æ ¹æ®ç”¨æˆ·Idåœ¨æ¥æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯"</span>)</span></div><div class="line">    <span class="meta">@RequestMapping(value = <span class="meta-string">"/info/&#123;id&#125;"</span>, method = arrayOf(RequestMethod.GET)</span>)</div><div class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">getUserInfoById</span><span class="params">(<span class="meta">@PathVariable</span> id: <span class="type">Int</span>)</span></span>: User &#123;</div><div class="line">        <span class="keyword">return</span> User(id, <span class="string">"å°ç™½"</span>, <span class="number">35</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬é‡å¯é¡¹ç›®æŸ¥çœ‹ä¸‹ï¼š</p>
<p><img src="https://ws1.sinaimg.cn/large/694830ebgy1fh4gfu3btij21qo0qi786.jpg" alt=""></p>
<p>å¯ä»¥å‘ç°æ–‡æ¡£æ·»åŠ äº†å¯¹åº”çš„ä¸­æ–‡ï¼Œè¦æŸ¥çœ‹å…¨éƒ¨å¯ç”¨çš„æ³¨è§£ä»¥åŠå…¶ä½œç”¨ï¼Œè¯·ç§»æ­¥å®˜æ–¹æ–‡æ¡£ï¼š</p>
<ul>
<li><a href="http://springfox.github.io/springfox/docs/current/#support-for-documentation-from-property-file-lookup" target="_blank" rel="external"> Support for documentation from property file lookup</a></li>
<li><a href="https://github.com/swagger-api/swagger-core/wiki/Annotations-1.5.X" target="_blank" rel="external">Swagger-Core Annotations</a></li>
</ul>
<p>ç®€å•é›†æˆä½¿ç”¨åˆ°è¿™é‡ŒğŸ‘Œå’¯ï¼Œåç»­å†å†™ä¸€å†™ç”Ÿæˆé™æ€æ–‡æ¡£ç›¸å…³çš„å†…å®¹å§ã€‚Just for Funï¼</p>
]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;note info&quot;&gt;&lt;p&gt;åœ¨åšAndroidå¼€å‘çš„æ—¶å€™ï¼Œå¯¹äºApiæ¥å£çš„å¯¹æ¥æœ‰ç€æ·±åˆ»çš„ä½“ä¼šï¼šåç«¯é€šè¿‡Markdownæˆ–è€…Wordå†™å¥½Apiæ–‡æ¡£ï¼Œç„¶åé€šè¿‡ç±»ä¼¼Sambaæˆ–è€…Dropboxè¿™æ ·çš„æœåŠ¡ä¸ç§»åŠ¨ç«¯å®ç°æ–‡æ¡£å…±äº«ã€‚æœ‰çš„æ—¶å€™å› ä¸ºæ¥å£å‡ºäº†é—®é¢˜ï¼Œä¸­é—´è¿˜å¾—æ¥å›ä¿®æ”¹å¯¹æ¥ï¼Œæ•ˆç‡ä½ä¸‹ä¸è¯´ï¼Œè¦æ˜¯åç«¯æ‰‹æŠ–å†™é”™å‚æ•°è€Œæ²¡æœ‰æ„è¯†åˆ°ï¼Œç§»åŠ¨ç«¯åŸ‹å¤´ä¸€é¡¿è°ƒè¯•ã€‚ã€‚ã€‚è¯´å¤šäº†éƒ½æ˜¯æ³ªã€‚&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;ä¸ºäº†é¿å…åŒæ—¶ç»´æŠ¤ä»£ç å’Œæ–‡æ¡£æ¥ä¿æŒä¸¤è€…ä¹‹é—´çš„åŒæ­¥è€Œå¸¦æ¥çš„é¢å¤–è´Ÿæ‹…ï¼ŒåŒäº‹æ¨èäº†&lt;a href=&quot;http://apidocjs.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;code&gt;ApiDoc&lt;/code&gt;&lt;/a&gt;æ¥ç”Ÿæˆæ–‡æ¡£ï¼Œè™½ç„¶ç”Ÿæˆçš„æ–‡æ¡£ç•Œé¢æ¯”è¾ƒæ¸…çˆ½ç„¶è€Œå‰ææ˜¯å¿…é¡»å¾—æŒ‰ç…§è§„å®šçš„è¯­æ³•å†™ä¸Šè¯¦ç»†çš„æ³¨é‡Šï¼Œæ‰èƒ½ç”Ÿæˆå¯¹åº”çš„æ–‡æ¡£ï¼Œè™½ç„¶å†™æ³¨é‡Šæœ¬èº«æ˜¯ä¸€ä»¶å¥½äº‹ï¼Œä¸è¿‡æœ‰èƒ½å¤Ÿè‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•ä¸ºå•¥ä¸ä½¿ç”¨å‘¢?&lt;/p&gt;
    
    </summary>
    
    
      <category term="Swagger" scheme="https://notes.wanghao.work/tags/Swagger/"/>
    
      <category term="Spring Boot" scheme="https://notes.wanghao.work/tags/Spring-Boot/"/>
    
      <category term="Gradle" scheme="https://notes.wanghao.work/tags/Gradle/"/>
    
      <category term="Kotlin" scheme="https://notes.wanghao.work/tags/Kotlin/"/>
    
  </entry>
  
  <entry>
    <title>è§£å†³Git refusing to merge unrelated historiesé—®é¢˜</title>
    <link href="https://notes.wanghao.work/2017-06-28-%E8%A7%A3%E5%86%B3Git-refusing-to-merge-unrelated-histories%E9%97%AE%E9%A2%98.html"/>
    <id>https://notes.wanghao.work/2017-06-28-è§£å†³Git-refusing-to-merge-unrelated-historiesé—®é¢˜.html</id>
    <published>2017-06-28T02:40:36.000Z</published>
    <updated>2017-06-28T03:01:12.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨ä½¿ç”¨brewæ›´æ–°äº†gitä¹‹åï¼Œå‘ç°åœ¨ä¸Githubä¸Šçš„æ–°åˆ›å»ºçš„<code>repo</code>å»ºç«‹å…³è”çš„ä¹‹åï¼Œè¿›è¡Œ<code>pull</code>æ“ä½œä¼šå‡ºç°ç±»ä¼¼äºä¸‹é¢çš„è¿™ç§é”™è¯¯ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"> * branch            master     -&gt; FETCH_HEAD</div><div class="line"> * [new branch]      master     -&gt; origin/master</div><div class="line">fatal: refusing to merge unrelated histories</div></pre></td></tr></table></figure>
<p>é€šè¿‡æŸ¥é˜…èµ„æ–™æ˜¾ç¤ºï¼ŒGItä»ç‰ˆæœ¬<code>2.9.0</code>å¼€å§‹ï¼Œé¢„è®¾è¡Œä¸ºä¸å…è®¸åˆå¹¶æ²¡æœ‰å…±åŒç¥–å…ˆçš„åˆ†æ”¯ï¼Œéœ€è¦åŠ ä¸Š<code>--allow-unrelated-histories</code>é€‰é¡¹è¿›è¡Œpullæ“ä½œæ‰ä¸ä¼šå‡ºç°æ­¤ç±»é”™è¯¯ä¿¡æ¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git pull origin master --allow-unrelated-histories</div></pre></td></tr></table></figure>
<p>ç›¸å…³å‚è€ƒï¼š</p>
<ul>
<li><a href="https://git-scm.com/docs/git-merge/2.9.0" target="_blank" rel="external">Git merge (2.9.0)</a></li>
<li><a href="https://stackoverflow.com/questions/37937984/git-refusing-to-merge-unrelated-histories" target="_blank" rel="external">StackoverFlow: Git refusing to merge unrelated histories</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘åœ¨ä½¿ç”¨brewæ›´æ–°äº†gitä¹‹åï¼Œå‘ç°åœ¨ä¸Githubä¸Šçš„æ–°åˆ›å»ºçš„&lt;code&gt;repo&lt;/code&gt;å»ºç«‹å…³è”çš„ä¹‹åï¼Œè¿›è¡Œ&lt;code&gt;pull&lt;/code&gt;æ“ä½œä¼šå‡ºç°ç±»ä¼¼äºä¸‹é¢çš„è¿™ç§é”™è¯¯ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table
    
    </summary>
    
    
      <category term="Git" scheme="https://notes.wanghao.work/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>Docker Composeï¼šé“¾æ¥å¤–éƒ¨å®¹å™¨çš„å‡ ç§æ–¹å¼</title>
    <link href="https://notes.wanghao.work/2017-06-12-Docker-Compose-%E9%93%BE%E6%8E%A5%E5%A4%96%E9%83%A8%E5%AE%B9%E5%99%A8%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F.html"/>
    <id>https://notes.wanghao.work/2017-06-12-Docker-Compose-é“¾æ¥å¤–éƒ¨å®¹å™¨çš„å‡ ç§æ–¹å¼.html</id>
    <published>2017-06-12T15:04:41.000Z</published>
    <updated>2017-06-14T15:12:00.000Z</updated>
    
    <content type="html"><![CDATA[<div class="note info"><p>åœ¨Dockerä¸­ï¼Œå®¹å™¨ä¹‹é—´çš„é“¾æ¥æ˜¯ä¸€ç§å¾ˆå¸¸è§çš„æ“ä½œï¼šå®ƒæä¾›äº†è®¿é—®å…¶ä¸­çš„æŸä¸ªå®¹å™¨çš„ç½‘ç»œæœåŠ¡è€Œä¸éœ€è¦å°†æ‰€éœ€çš„ç«¯å£æš´éœ²ç»™Docker Hostä¸»æœºçš„åŠŸèƒ½ã€‚Docker Composeä¸­å¯¹è¯¥ç‰¹æ€§çš„æ”¯æŒåŒæ ·æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚ç„¶è€Œï¼Œå¦‚æœéœ€è¦é“¾æ¥çš„å®¹å™¨æ²¡æœ‰å®šä¹‰åœ¨åŒä¸€ä¸ª<code>docker-compose.yml</code>ä¸­çš„æ—¶å€™ï¼Œè¿™ä¸ªæ—¶å€™å°±ç¨å¾®éº»çƒ¦å¤æ‚äº†ç‚¹ã€‚</p>
</div>
<a id="more"></a>
<p>åœ¨ä¸ä½¿ç”¨Docker Composeçš„æ—¶å€™ï¼Œå°†ä¸¤ä¸ªå®¹å™¨é“¾æ¥èµ·æ¥ä½¿ç”¨<code>â€”link</code>å‚æ•°ï¼Œç›¸å¯¹æ¥è¯´æ¯”è¾ƒç®€å•ï¼Œä»¥<code>nginx</code>é•œåƒä¸ºä¾‹å­ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">docker run --rm --name test1 -d nginx  #å¼€å¯ä¸€ä¸ªå®ä¾‹test1</div><div class="line">docker run --rm --name test2 --link test1 -d nginx #å¼€å¯ä¸€ä¸ªå®ä¾‹test2å¹¶ä¸test1å»ºç«‹é“¾æ¥</div></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œ<code>test2</code>ä¸<code>test1</code>ä¾¿å»ºç«‹äº†é“¾æ¥ï¼Œå°±å¯ä»¥åœ¨<code>test2</code>ä¸­ä½¿ç”¨è®¿é—®<code>test1</code>ä¸­çš„æœåŠ¡äº†ã€‚</p>
<p>å¦‚æœä½¿ç”¨Docker Composeï¼Œé‚£ä¹ˆè¿™ä¸ªäº‹æƒ…å°±æ›´ç®€å•äº†ï¼Œè¿˜æ˜¯ä»¥ä¸Šé¢çš„<code>nginx</code>é•œåƒä¸ºä¾‹å­ï¼Œç¼–è¾‘<code>docker-compose.yml</code>æ–‡ä»¶ä¸ºï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="attr">version:</span> <span class="string">"3"</span></div><div class="line"><span class="attr">services:</span></div><div class="line"><span class="attr">  test2:</span></div><div class="line"><span class="attr">    image:</span> <span class="string">nginx</span></div><div class="line"><span class="attr">    depends_on:</span></div><div class="line"><span class="bullet">      -</span> <span class="string">test1</span></div><div class="line"><span class="attr">    links:</span></div><div class="line"><span class="bullet">      -</span> <span class="string">test1</span></div><div class="line"><span class="attr">  test1:</span></div><div class="line"><span class="attr">    image:</span> <span class="string">nginx</span></div></pre></td></tr></table></figure>
<p>æœ€ç»ˆæ•ˆæœä¸ä½¿ç”¨æ™®é€šçš„Dockerå‘½ä»¤<code>docker run xxxx</code>å»ºç«‹çš„é“¾æ¥å¹¶æ— åŒºåˆ«ã€‚è¿™åªæ˜¯ä¸€ç§æœ€ä¸ºç†æƒ³çš„æƒ…å†µã€‚</p>
<hr>
<ol>
<li>å¦‚æœå®¹å™¨æ²¡æœ‰å®šä¹‰åœ¨åŒä¸€ä¸ª<code>docker-compose.yml</code>æ–‡ä»¶ä¸­ï¼Œåº”è¯¥å¦‚ä½•é“¾æ¥å®ƒä»¬å‘¢ï¼Ÿ</li>
<li>åˆå¦‚æœå®šä¹‰åœ¨<code>docker-compose.yml</code>æ–‡ä»¶ä¸­çš„å®¹å™¨éœ€è¦ä¸<code>docker run xxx</code>å¯åŠ¨çš„å®¹å™¨é“¾æ¥ï¼Œéœ€è¦å¦‚ä½•å¤„ç†ï¼Ÿ</li>
</ol>
<p>é’ˆå¯¹è¿™ä¸¤ç§å…¸å‹çš„æƒ…å†µï¼Œä¸‹é¢ç»™å‡ºæˆ‘ä¸ªäººæµ‹è¯•å¯è¡Œçš„åŠæ³•ï¼š</p>
<hr>
<h3 id="æ–¹å¼ä¸€ï¼šè®©éœ€è¦é“¾æ¥çš„å®¹å™¨åŒå±ä¸€ä¸ªå¤–éƒ¨ç½‘ç»œ"><a href="#æ–¹å¼ä¸€ï¼šè®©éœ€è¦é“¾æ¥çš„å®¹å™¨åŒå±ä¸€ä¸ªå¤–éƒ¨ç½‘ç»œ" class="headerlink" title="æ–¹å¼ä¸€ï¼šè®©éœ€è¦é“¾æ¥çš„å®¹å™¨åŒå±ä¸€ä¸ªå¤–éƒ¨ç½‘ç»œ"></a>æ–¹å¼ä¸€ï¼šè®©éœ€è¦é“¾æ¥çš„å®¹å™¨åŒå±ä¸€ä¸ªå¤–éƒ¨ç½‘ç»œ</h3><p>æˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨nginxé•œåƒæ¥æ¨¡æ‹Ÿè¿™æ ·çš„ä¸€ä¸ªæƒ…æ™¯ï¼šå‡è®¾æˆ‘ä»¬éœ€è¦å°†ä¸¤ä¸ªä½¿ç”¨Docker Composeç®¡ç†çš„nignxå®¹å™¨ï¼ˆ<code>test1</code>å’Œ<code>test2</code>ï¼‰é“¾æ¥èµ·æ¥ï¼Œä½¿å¾—<code>test2</code>èƒ½å¤Ÿè®¿é—®<code>test1</code>ä¸­æä¾›çš„æœåŠ¡ï¼Œè¿™é‡Œæˆ‘ä»¬ä»¥èƒ½pingé€šä¸ºå‡†ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰å®¹å™¨<code>test1</code>çš„<code>docker-compose.yml</code>æ–‡ä»¶å†…å®¹ä¸ºï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="attr">version:</span> <span class="string">"3"</span></div><div class="line"><span class="attr">services:</span></div><div class="line"><span class="attr">  test2:</span></div><div class="line"><span class="attr">    image:</span> <span class="string">nginx</span></div><div class="line"><span class="attr">    container_name:</span> <span class="string">test1</span></div><div class="line"><span class="attr">    networks:</span></div><div class="line"><span class="bullet">      -</span> <span class="string">default</span></div><div class="line"><span class="bullet">      -</span> <span class="string">app_net</span></div><div class="line"><span class="attr">networks:</span></div><div class="line"><span class="attr">  app_net:</span></div><div class="line"><span class="attr">    external:</span> <span class="literal">true</span></div></pre></td></tr></table></figure>
<p>å®¹å™¨<code>test2</code>å†…å®¹ä¸<code>test1</code>åŸºæœ¬ä¸€æ ·ï¼Œåªæ˜¯å¤šäº†ä¸€ä¸ª<code>external_links</code>,éœ€è¦ç‰¹åˆ«è¯´æ˜çš„æ˜¯ï¼š<strong>æœ€è¿‘å‘å¸ƒçš„Dockerç‰ˆæœ¬å·²ç»ä¸éœ€è¦ä½¿ç”¨external_linksæ¥é“¾æ¥å®¹å™¨ï¼Œå®¹å™¨çš„DNSæœåŠ¡å¯ä»¥æ­£ç¡®çš„ä½œå‡ºåˆ¤æ–­</strong>ï¼Œå› æ­¤å¦‚æœä½ ä½ éœ€è¦å…¼å®¹è¾ƒè€ç‰ˆæœ¬çš„Dockerçš„è¯ï¼Œé‚£ä¹ˆå®¹å™¨<code>test2</code>çš„<code>docker-compose.yml</code>æ–‡ä»¶å†…å®¹ä¸ºï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="attr">version:</span> <span class="string">"3"</span></div><div class="line"><span class="attr">services:</span></div><div class="line"><span class="attr">  test2:</span></div><div class="line"><span class="attr">    image:</span> <span class="string">nginx</span></div><div class="line"><span class="attr">    networks:</span></div><div class="line"><span class="bullet">      -</span> <span class="string">default</span></div><div class="line"><span class="bullet">      -</span> <span class="string">app_net</span></div><div class="line"><span class="attr">    external_links:</span></div><div class="line"><span class="bullet">      -</span> <span class="string">test1</span></div><div class="line"><span class="attr">    container_name:</span> <span class="string">test2</span></div><div class="line"><span class="attr">networks:</span></div><div class="line"><span class="attr">  app_net:</span></div><div class="line"><span class="attr">    external:</span> <span class="literal">true</span></div></pre></td></tr></table></figure>
<p>å¦åˆ™çš„è¯ï¼Œ<code>test2</code>çš„<code>docker-compose.yml</code>å’Œ<code>test1</code>çš„å®šä¹‰å®Œå…¨ä¸€è‡´ï¼Œä¸éœ€è¦é¢å¤–å¤šæŒ‡å®šä¸€ä¸ª<code>external_links</code>ã€‚ç›¸å…³çš„é—®é¢˜è¯·å‚è§stackoverflowä¸Šçš„ç›¸å…³é—®é¢˜ï¼š<a href="https://stackoverflow.com/questions/39067295/docker-compose-external-container" target="_blank" rel="external">docker-compose + external container</a></p>
<p>æ­£å¦‚ä½ çœ‹åˆ°çš„é‚£æ ·ï¼Œè¿™é‡Œä¸¤ä¸ªå®¹å™¨çš„å®šä¹‰é‡Œéƒ½ä½¿ç”¨äº†åŒä¸€ä¸ªå¤–éƒ¨ç½‘ç»œ<code>app_net</code>,å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å¯åŠ¨è¿™ä¸¤ä¸ªå®¹å™¨ä¹‹å‰é€šè¿‡ä»¥ä¸‹å‘½ä»¤å†åˆ›å»ºå¤–éƒ¨ç½‘ç»œï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker network create app_net</div></pre></td></tr></table></figure>
<p>ä¹‹åï¼Œé€šè¿‡<code>docker-compose up -d</code>å‘½ä»¤å¯åŠ¨è¿™ä¸¤ä¸ªå®¹å™¨ï¼Œç„¶åæ‰§è¡Œ<code>docker exec -it test2 ping test1</code>,ä½ å°†ä¼šçœ‹åˆ°å¦‚ä¸‹çš„è¾“å‡ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">docker exec -it test2 ping test1</div><div class="line">PING test1 (172.18.0.2): 56 data bytes</div><div class="line">64 bytes from 172.18.0.2: icmp_seq=0 ttl=64 time=0.091 ms</div><div class="line">64 bytes from 172.18.0.2: icmp_seq=1 ttl=64 time=0.146 ms</div><div class="line">64 bytes from 172.18.0.2: icmp_seq=2 ttl=64 time=0.150 ms</div><div class="line">64 bytes from 172.18.0.2: icmp_seq=3 ttl=64 time=0.145 ms</div><div class="line">64 bytes from 172.18.0.2: icmp_seq=4 ttl=64 time=0.126 ms</div><div class="line">64 bytes from 172.18.0.2: icmp_seq=5 ttl=64 time=0.147 ms</div></pre></td></tr></table></figure>
<p>è¯æ˜è¿™ä¸¤ä¸ªå®¹å™¨æ˜¯æˆåŠŸé“¾æ¥äº†ï¼Œåè¿‡æ¥åœ¨<code>test1</code>ä¸­ping<code>test2</code>ä¹Ÿæ˜¯èƒ½å¤Ÿæ­£å¸¸pingé€šçš„ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬é€šè¿‡<code>docker run --rm --name test3 -d nginx</code>è¿™ç§æ–¹å¼æ¥å…ˆå¯åŠ¨äº†ä¸€ä¸ªå®¹å™¨(<code>test3</code>)å¹¶ä¸”æ²¡æœ‰æŒ‡å®šå®ƒæ‰€å±çš„å¤–éƒ¨ç½‘ç»œï¼Œè€Œéœ€è¦å°†å…¶ä¸<code>test1</code>æˆ–è€…<code>test2</code>é“¾æ¥çš„è¯ï¼Œè¿™ä¸ªæ—¶å€™æ‰‹åŠ¨é“¾æ¥å¤–éƒ¨ç½‘ç»œå³å¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker network connect app_net test3</div></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œä¸‰ä¸ªå®¹å™¨éƒ½å¯ä»¥ç›¸äº’è®¿é—®äº†ã€‚</p>
<hr>
<h3 id="æ–¹å¼äºŒï¼šæ›´æ”¹éœ€è¦é“¾æ¥çš„å®¹å™¨çš„ç½‘ç»œæ¨¡å¼"><a href="#æ–¹å¼äºŒï¼šæ›´æ”¹éœ€è¦é“¾æ¥çš„å®¹å™¨çš„ç½‘ç»œæ¨¡å¼" class="headerlink" title="æ–¹å¼äºŒï¼šæ›´æ”¹éœ€è¦é“¾æ¥çš„å®¹å™¨çš„ç½‘ç»œæ¨¡å¼"></a>æ–¹å¼äºŒï¼šæ›´æ”¹éœ€è¦é“¾æ¥çš„å®¹å™¨çš„ç½‘ç»œæ¨¡å¼</h3><p>é€šè¿‡æ›´æ”¹ä½ æƒ³è¦ç›¸äº’é“¾æ¥çš„å®¹å™¨çš„ç½‘ç»œæ¨¡å¼ä¸º<code>bridge</code>,å¹¶æŒ‡å®šéœ€è¦é“¾æ¥çš„å¤–éƒ¨å®¹å™¨ï¼ˆ<code>external_links</code>)å³å¯ã€‚ä¸åŒå±å¤–éƒ¨ç½‘ç»œçš„å®¹å™¨å¯ä»¥ç›¸äº’è®¿é—®çš„é“¾æ¥æ–¹å¼ä¸€ä¸åŒï¼Œè¿™ç§æ–¹å¼çš„è®¿é—®æ˜¯å•å‘çš„ã€‚</p>
<p>è¿˜æ˜¯ä»¥nginxå®¹å™¨é•œåƒä¸ºä¾‹å­ï¼Œå¦‚æœå®¹å™¨å®ä¾‹<code>nginx1</code>éœ€è¦è®¿é—®å®¹å™¨å®ä¾‹<code>nginx2</code>ï¼Œé‚£ä¹ˆ<code>nginx2</code>çš„<code>doker-compose.yml</code>å®šä¹‰ä¸ºï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="attr">version:</span> <span class="string">"3"</span></div><div class="line"><span class="attr">services:</span></div><div class="line"><span class="attr">  nginx2:</span></div><div class="line"><span class="attr">    image:</span> <span class="string">nginx</span></div><div class="line"><span class="attr">    container_name:</span> <span class="string">nginx2</span></div><div class="line"><span class="attr">    network_mode:</span> <span class="string">bridge</span></div></pre></td></tr></table></figure>
<p>ä¸å…¶å¯¹åº”çš„ï¼Œ<code>nginx1</code>çš„<code>docker-compose.yml</code>å®šä¹‰ä¸ºï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="attr">version:</span> <span class="string">"3"</span></div><div class="line"><span class="attr">services:</span></div><div class="line"><span class="attr">  nginx1:</span></div><div class="line"><span class="attr">    image:</span> <span class="string">nginx</span></div><div class="line"><span class="attr">    external_links:</span></div><div class="line"><span class="bullet">      -</span> <span class="string">nginx2</span></div><div class="line"><span class="attr">    container_name:</span> <span class="string">nginx1</span></div><div class="line"><span class="attr">    network_mode:</span> <span class="string">bridge</span></div></pre></td></tr></table></figure>
<blockquote>
<p>éœ€è¦ç‰¹åˆ«è¯´æ˜çš„æ˜¯ï¼Œè¿™é‡Œçš„<code>external_links</code>æ˜¯ä¸èƒ½çœç•¥çš„ï¼Œè€Œä¸”<code>nginx1</code>çš„å¯åŠ¨å¿…é¡»è¦åœ¨<code>nginx2</code>ä¹‹åï¼Œå¦åˆ™å¯èƒ½ä¼šæŠ¥æ‰¾ä¸åˆ°å®¹å™¨<code>nginx2</code>çš„é”™è¯¯ã€‚</p>
</blockquote>
<p>æ¥ç€æˆ‘ä»¬ä½¿ç”¨pingæ¥æµ‹è¯•ä¸‹è¿é€šæ€§ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$ docker exec -it nginx1 ping nginx2  # nginx1 to nginx2</div><div class="line">PING nginx2 (172.17.0.4): 56 data bytes</div><div class="line">64 bytes from 172.17.0.4: icmp_seq=0 ttl=64 time=0.141 ms</div><div class="line">64 bytes from 172.17.0.4: icmp_seq=1 ttl=64 time=0.139 ms</div><div class="line">64 bytes from 172.17.0.4: icmp_seq=2 ttl=64 time=0.145 ms</div><div class="line"></div><div class="line">$ docker exec -it nginx2 ping nginx1 #nginx2 to nginx1</div><div class="line">ping: unknown host</div></pre></td></tr></table></figure>
<p>ä»¥ä¸Šä¹Ÿèƒ½å……åˆ†è¯æ˜è¿™ç§æ–¹å¼æ˜¯å±äºå•å‘è”é€šçš„ã€‚</p>
<p>åœ¨å®é™…åº”ç”¨ä¸­æ ¹æ®è‡ªå·±çš„éœ€è¦çµæ´»çš„é€‰æ‹©è¿™ä¸¤ç§é“¾æ¥æ–¹å¼ï¼Œå¦‚æœæƒ³å·æ‡’çš„è¯ï¼Œå¤§å¯é€‰æ‹©ç¬¬äºŒç§ã€‚ä¸è¿‡æˆ‘æ›´æ¨èç¬¬ä¸€ç§ï¼Œä¸éš¾çœ‹å‡ºæ— è®ºæ˜¯è”é€šæ€§è¿˜æ˜¯çµæ´»æ€§ï¼Œè¾ƒä¸ºæ›´æ”¹ç½‘ç»œæ¨¡å¼çš„ç¬¬äºŒç§éƒ½æ›´ä¸ºå‹å¥½ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;note info&quot;&gt;&lt;p&gt;åœ¨Dockerä¸­ï¼Œå®¹å™¨ä¹‹é—´çš„é“¾æ¥æ˜¯ä¸€ç§å¾ˆå¸¸è§çš„æ“ä½œï¼šå®ƒæä¾›äº†è®¿é—®å…¶ä¸­çš„æŸä¸ªå®¹å™¨çš„ç½‘ç»œæœåŠ¡è€Œä¸éœ€è¦å°†æ‰€éœ€çš„ç«¯å£æš´éœ²ç»™Docker Hostä¸»æœºçš„åŠŸèƒ½ã€‚Docker Composeä¸­å¯¹è¯¥ç‰¹æ€§çš„æ”¯æŒåŒæ ·æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚ç„¶è€Œï¼Œå¦‚æœéœ€è¦é“¾æ¥çš„å®¹å™¨æ²¡æœ‰å®šä¹‰åœ¨åŒä¸€ä¸ª&lt;code&gt;docker-compose.yml&lt;/code&gt;ä¸­çš„æ—¶å€™ï¼Œè¿™ä¸ªæ—¶å€™å°±ç¨å¾®éº»çƒ¦å¤æ‚äº†ç‚¹ã€‚&lt;/p&gt;
&lt;/div&gt;
    
    </summary>
    
    
      <category term="Docker" scheme="https://notes.wanghao.work/tags/Docker/"/>
    
      <category term="Docker Compose" scheme="https://notes.wanghao.work/tags/Docker-Compose/"/>
    
  </entry>
  
  <entry>
    <title>MySQL API Driverså®‰è£…å°è®°</title>
    <link href="https://notes.wanghao.work/2017-05-20-%E8%A7%A3%E5%86%B3Mysql%E7%9A%84Python%E9%A9%B1%E5%8A%A8%E5%AE%89%E8%A3%85%E5%A4%B1%E8%B4%A5.html"/>
    <id>https://notes.wanghao.work/2017-05-20-è§£å†³Mysqlçš„Pythoné©±åŠ¨å®‰è£…å¤±è´¥.html</id>
    <published>2017-05-19T18:12:46.000Z</published>
    <updated>2017-05-20T15:29:36.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h4><p>æœ€è¿‘éœ€è¦ä½¿ç”¨Djangoå†™ç‚¹ä¸œè¥¿ï¼Œç”±äºè‡ªå·±çš„macbookä¸Šæ²¡æœ‰ä¹Ÿä¸æ‰“ç®—å®‰è£…MySQLè€Œæ˜¯ä»¥Dockerçš„MySQLé•œåƒæ›¿ä»£ï¼ŒDjangoæ–‡æ¡£æä¾›äº†ä¸‰ç§MySQLé©±åŠ¨ä¾›é€‰æ‹©ï¼Œå®˜æ–¹æ¨èçš„æ˜¯<a href="https://pypi.python.org/pypi/mysqlclient" target="_blank" rel="external"><code>mysqlclient</code></a>,ç”±äºæˆ‘æœ¬åœ°æ²¡æœ‰å®‰è£…MySQLï¼Œæ‰€ä»¥æ˜¯æ²¡æœ‰Native Driverçš„ä»¥è‡³äºåœ¨å®‰è£…MySQLé©±åŠ¨çš„æ—¶å€™é‡åˆ°äº†ç‚¹å°é—®é¢˜ï¼Œåœ¨æ­¤è®°å½•ä¸‹ã€‚</p>
<hr>
<a id="more"></a>
<h4 id="è¿‡ç¨‹"><a href="#è¿‡ç¨‹" class="headerlink" title="è¿‡ç¨‹"></a>è¿‡ç¨‹</h4><p>å®‰è£…<code>mysqlclient</code>ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install mysqlclient</div></pre></td></tr></table></figure>
<p>ç„¶è€Œå¾—åˆ°é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">Collecting mysqlclient</div><div class="line">  Using cached mysqlclient-1.3.10.tar.gz</div><div class="line">    Complete output from command python setup.py egg_info:</div><div class="line">    /bin/sh: mysql_config: command not found</div><div class="line">    Traceback (most recent call last):</div><div class="line">      File "&lt;string&gt;", line 1, in &lt;module&gt;</div><div class="line">      File "/private/var/folders/ll/d2yyxp555ss1gm613y33hfy80000gn/T/pip-build-mcd2q8ly/mysqlclient/setup.py", line 17, in &lt;module&gt;</div><div class="line">        metadata, options = get_config()</div><div class="line">      File "/private/var/folders/ll/d2yyxp555ss1gm613y33hfy80000gn/T/pip-build-mcd2q8ly/mysqlclient/setup_posix.py", line 44, in get_config</div><div class="line">        libs = mysql_config("libs_r")</div><div class="line">      File "/private/var/folders/ll/d2yyxp555ss1gm613y33hfy80000gn/T/pip-build-mcd2q8ly/mysqlclient/setup_posix.py", line 26, in mysql_config</div><div class="line">        raise EnvironmentError("%s not found" % (mysql_config.path,))</div><div class="line">    OSError: mysql_config not found</div><div class="line"></div><div class="line">    ----------------------------------------</div><div class="line">Command "python setup.py egg_info" failed with error code 1 in /private/var/folders/ll/d2yyxp555ss1gm613y33hfy80000gn/T/pip-build-mcd2q8ly/mysqlclient/</div></pre></td></tr></table></figure>
<p>å› ä¸ºæ²¡æœ‰å®‰è£…MySQLï¼Œæ‰€ä»¥åœ¨å®‰è£…<code>mysqlclient</code>ä¹‹å‰è¿˜éœ€è¦å®‰è£…Connectorï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brew install mysql-connector-c</div></pre></td></tr></table></figure>
<p>ä¹‹åå®‰è£…å†å®‰è£…<code>mysqlclient</code>ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install mysqlclient</div></pre></td></tr></table></figure>
<p>ç„¶ååˆå°±æŠ¥é”™äº†ï¼Œé”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">Collecting mysqlclient</div><div class="line">  Using cached mysqlclient-1.3.10.tar.gz</div><div class="line">    Complete output from command python setup.py egg_info:</div><div class="line">    Traceback (most recent call last):</div><div class="line">      File "&lt;string&gt;", line 1, in &lt;module&gt;</div><div class="line">      File "/private/var/folders/ll/d2yyxp555ss1gm613y33hfy80000gn/T/pip-build-smwmu1qn/mysqlclient/setup.py", line 17, in &lt;module&gt;</div><div class="line">        metadata, options = get_config()</div><div class="line">      File "/private/var/folders/ll/d2yyxp555ss1gm613y33hfy80000gn/T/pip-build-smwmu1qn/mysqlclient/setup_posix.py", line 54, in get_config</div><div class="line">        libraries = [dequote(i[2:]) for i in libs if i.startswith('-l')]</div><div class="line">      File "/private/var/folders/ll/d2yyxp555ss1gm613y33hfy80000gn/T/pip-build-smwmu1qn/mysqlclient/setup_posix.py", line 54, in &lt;listcomp&gt;</div><div class="line">        libraries = [dequote(i[2:]) for i in libs if i.startswith('-l')]</div><div class="line">      File "/private/var/folders/ll/d2yyxp555ss1gm613y33hfy80000gn/T/pip-build-smwmu1qn/mysqlclient/setup_posix.py", line 12, in dequote</div><div class="line">        if s[0] in "\"'" and s[0] == s[-1]:</div><div class="line">    IndexError: string index out of range</div><div class="line"></div><div class="line">    ----------------------------------------</div><div class="line">Command "python setup.py egg_info" failed with error code 1 in /private/var/folders/ll/d2yyxp555ss1gm613y33hfy80000gn/T/pip-build-smwmu1qn/mysqlclient/</div></pre></td></tr></table></figure>
<hr>
<h4 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h4><p>é€šè¿‡æŸ¥æ‰¾èµ„æ–™å¾—å‡ºå¯èƒ½çš„ç»“è®ºæ˜¯é€šè¿‡brewå®‰è£…çš„<code>mysql-connector-c</code>é…ç½®å¯èƒ½ä¸æ­£ç¡®ï¼Œæ‰“å¼€<code>/usr/local/bin/mysql_config</code>è„šæœ¬ä¿®æ”¹å…¶ä¸­çš„éƒ¨åˆ†å†…å®¹:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Create options</span></div><div class="line">libs=<span class="string">"-L<span class="variable">$pkglibdir</span>"</span></div><div class="line">libs=<span class="string">"<span class="variable">$libs</span>  -l"</span></div></pre></td></tr></table></figure>
<p>ä¿®æ”¹ä¸ºï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> Create options</span></div><div class="line">libs="-L$pkglibdir"</div><div class="line">libs="$libs  -lmysqlclient -lssl -lcrypto"</div></pre></td></tr></table></figure>
<p>ä¿å­˜ï¼Œå†æ¬¡å®‰è£…<code>mysqlclient</code>åº”è¯¥å°±ä¼šæ­£å¸¸å®‰è£…äº†ã€‚æ¥ç€å°±å¯ä»¥ä½¿ç”¨Djangoå’Œè¿è¡Œåœ¨Dockerä¸­çš„MySQLæ„‰å¿«çš„Codingäº†ï½</p>
]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h4&gt;&lt;p&gt;æœ€è¿‘éœ€è¦ä½¿ç”¨Djangoå†™ç‚¹ä¸œè¥¿ï¼Œç”±äºè‡ªå·±çš„macbookä¸Šæ²¡æœ‰ä¹Ÿä¸æ‰“ç®—å®‰è£…MySQLè€Œæ˜¯ä»¥Dockerçš„MySQLé•œåƒæ›¿ä»£ï¼ŒDjangoæ–‡æ¡£æä¾›äº†ä¸‰ç§MySQLé©±åŠ¨ä¾›é€‰æ‹©ï¼Œå®˜æ–¹æ¨èçš„æ˜¯&lt;a href=&quot;https://pypi.python.org/pypi/mysqlclient&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;code&gt;mysqlclient&lt;/code&gt;&lt;/a&gt;,ç”±äºæˆ‘æœ¬åœ°æ²¡æœ‰å®‰è£…MySQLï¼Œæ‰€ä»¥æ˜¯æ²¡æœ‰Native Driverçš„ä»¥è‡³äºåœ¨å®‰è£…MySQLé©±åŠ¨çš„æ—¶å€™é‡åˆ°äº†ç‚¹å°é—®é¢˜ï¼Œåœ¨æ­¤è®°å½•ä¸‹ã€‚&lt;/p&gt;
&lt;hr&gt;
    
    </summary>
    
    
      <category term="Python" scheme="https://notes.wanghao.work/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Android Studioç”ŸæˆJavaæ–¹æ³•æè¿°ç¬¦</title>
    <link href="https://notes.wanghao.work/2017-03-21-Android-Studio%E6%94%AF%E6%8C%81%E7%94%9F%E6%88%90Java-Native%E6%96%B9%E6%B3%95%E7%AD%BE%E5%90%8D.html"/>
    <id>https://notes.wanghao.work/2017-03-21-Android-Studioæ”¯æŒç”ŸæˆJava-Nativeæ–¹æ³•ç­¾å.html</id>
    <published>2017-03-21T13:32:50.000Z</published>
    <updated>2017-03-29T15:53:25.000Z</updated>
    
    <content type="html"><![CDATA[<div class="note info"><p>åœ¨æ—¥å¸¸çš„Android NDKå¼€å‘ä¸­ï¼Œä¼šä¸å¯é¿å…çš„ç”¨åˆ°Cä¸Javaä»£ç ç›¸äº’è°ƒç”¨çš„æƒ…å†µã€‚Javaè°ƒç”¨Cçš„æ–¹æ³•è¿˜å¥½ï¼ŒCè°ƒç”¨Javaçš„æ–¹æ³•å°±æ¯”è¾ƒéº»çƒ¦äº†ã€‚éœ€è¦ç¼–å†™çœ‹ç€å°±å¤´ç–¼çš„Javaæ–¹æ³•æè¿°ç¬¦æ‰èƒ½æ­£ç¡®çš„è°ƒç”¨Javaæ–¹æ³•ã€‚ </p>
</div>
<p>å…¶ä¸­å¸¸è§çš„Javaæ–¹æ³•åŸŸå’Œæè¿°ç¬¦å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">Javaç±»å‹</th>
<th style="text-align:center">ç­¾å</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Boolean</td>
<td style="text-align:center">Z</td>
</tr>
<tr>
<td style="text-align:center">Byte</td>
<td style="text-align:center">B</td>
</tr>
<tr>
<td style="text-align:center">Char</td>
<td style="text-align:center">C</td>
</tr>
<tr>
<td style="text-align:center">Short</td>
<td style="text-align:center">S</td>
</tr>
<tr>
<td style="text-align:center">Int</td>
<td style="text-align:center">I</td>
</tr>
<tr>
<td style="text-align:center">Long</td>
<td style="text-align:center">J</td>
</tr>
<tr>
<td style="text-align:center">Float</td>
<td style="text-align:center">F</td>
</tr>
<tr>
<td style="text-align:center">Double</td>
<td style="text-align:center">D</td>
</tr>
<tr>
<td style="text-align:center">Fully-qualified-class</td>
<td style="text-align:center">Lfully-qualified-class</td>
</tr>
<tr>
<td style="text-align:center">type[]</td>
<td style="text-align:center">[type</td>
</tr>
<tr>
<td style="text-align:center">Method type</td>
<td style="text-align:center">(arg-type)ret-type</td>
</tr>
</tbody>
</table>
<p>é€šè¿‡ä¸Šè¿°å¯¹ç…§è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Cä»£ç æŸ¥æ‰¾ä¸€ä¸ªä¸º<code>String</code>ç±»å‹çš„Javaé™æ€å­—æ®µï¼Œä¾‹å¦‚:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">jfieldID staticJavaFieldId;</div><div class="line">staticJavaFieldId = env-&gt;GetStaticFieldID(clazz, <span class="string">"mStaticField"</span>, <span class="string">"Ljava/lang/String;"</span>);</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment">* do something...</span></div><div class="line"><span class="comment">**/</span></div></pre></td></tr></table></figure>
<a id="more"></a>
<hr>
<p>å€ŸåŠ©<code>javap</code>æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¾—çŸ¥ä¸€ä¸ª<code>class</code>æ–‡ä»¶å…¶ä¸­åŒ…å«å¯¹åº”çš„æè¿°ç¬¦ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">$ javap -s -p com.xiamo.test.Message</div><div class="line">  </div><div class="line">Compiled from <span class="string">"Message.java"</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">xiamo</span>.<span class="title">test</span>.<span class="title">Message</span> </span>&#123;</div><div class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> java.lang.String TAG;</div><div class="line">    descriptor: Ljava/lang/String;</div><div class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> CHECK_POINT;</div><div class="line">    descriptor: I</div><div class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> ERROR_NOT_SERVER;</div><div class="line">    descriptor: I</div><div class="line">  <span class="keyword">public</span> <span class="keyword">int</span> errorCode;</div><div class="line">    descriptor: I</div><div class="line">  <span class="keyword">public</span> java.lang.String message;</div><div class="line">    descriptor: Ljava/lang/String;</div><div class="line">  <span class="keyword">public</span> com.xiamo.test.Message();</div><div class="line">    descriptor: ()V</div></pre></td></tr></table></figure>
<p>ä½†æ˜¯æ¯æ¬¡éœ€è¦æŸ¥çœ‹å¯¹åº”ç±»çš„æ–¹æ³•æè¿°ç¬¦çš„æ—¶å€™éƒ½éœ€è¦æ‰‹åŠ¨æ•²ä¸€æ¬¡å‘½ä»¤ï¼Œè¿™æ ·æ˜¾ç„¶ä¸å¤Ÿæ¸…çœŸã€‚å¥½åœ¨<code>Android Studio</code>ä¸ºæˆ‘ä»¬æä¾›äº†<code>External Tools</code>ã€‚æˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥è‡ªå®šä¹‰è¿™ä¸ªæ“ä½œç®€åŒ–æˆ‘ä»¬çš„åŒæ‰‹ã€‚</p>
<h3 id="è®¾ç½®External-Tools"><a href="#è®¾ç½®External-Tools" class="headerlink" title="è®¾ç½®External Tools"></a>è®¾ç½®External Tools</h3><p>æ‰“å¼€<code>Android Studio</code>çš„è®¾ç½®é¡µé¢ï¼Œåœ¨<code>Tools</code>é€‰é¡¹å¡ä¸­é€‰ä¸­<code>External Tools</code>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://7xkj6q.com1.z0.glb.clouddn.com/image/jni/external%20tools.png" alt="" title="é€‰æ‹©External Tools"></p>
<p>ç‚¹å‡»å³ä¾§åŒºåŸŸçš„<code>+</code>æ–°å¢ä¸€ä¸ª<code>Tools</code>,åœ¨é€‰å¡ä¸­å¡«å…¥å¦‚ä¸‹å›¾æ‰€ç¤ºçš„å‚æ•°:</p>
<p><img src="http://7xkj6q.com1.z0.glb.clouddn.com/image/jni/config.png" alt="" title="è®¾ç½®External Tools"></p>
<ul>
<li><code>Name</code> ä¸ºä½ è¦è®¾ç½®çš„<code>External Tools</code>çš„åå­—ï¼Œä¾¿äºä½ è‡ªå·±æ ‡è¯†å°±è¡Œï¼Œæ­¤å¤„æˆ‘è®¾ç½®ä¸º<code>JNI Descriptor Generator</code></li>
<li><code>Program</code>ä¸º<code>Tools</code>æ‰§è¡Œçš„å‘½ä»¤çš„è·¯å¾„ï¼Œå¦‚æœä½ éœ€è¦æ›¿æ¢ä¸ºä½ è‡ªå·±JDKä¸­çš„<code>javap</code>ä¿®æ”¹è¿™ä¸ªå€¼å°±è¡Œï¼Œæ­¤å¤„ä½¿ç”¨<code>Android Studio</code>è‡ªå¸¦çš„<code>JDK</code>è·¯å¾„ï¼Œå¡«å…¥<code>$JDKPath$/bin/javap</code></li>
<li><code>Parameters</code>ä¸ºå‘½ä»¤æ‰§è¡Œçš„å‚æ•°ï¼Œæˆ‘ä»¬è¦è·å–æ–¹æ³•æè¿°ç¬¦ï¼Œæ‰€ä»¥è®¾ç½®ä¸ºï¼š<code>-s -p $FileClass$</code></li>
<li><code>Working directory</code>ä¸ºä¸Šè¿°è®¾ç½®å¥½çš„å·¥å…·æ‰§è¡Œçš„ç›®å½•ï¼Œè®¾ç½®ä¸º<code>$ModuleFileDir$/build/intermediates/classes/debug</code></li>
</ul>
<p>ç‚¹å‡»ä¿å­˜ï¼Œæˆ‘ä»¬çš„<code>External Tools</code>å°±è®¾ç½®å¥½å•¦ã€‚è¿™ä¸ªæ—¶å€™åœ¨<code>Tools</code>â€”&gt;<code>External Tools</code>ä¸­å°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬è®¾ç½®å¥½çš„<code>Tools</code>äº†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯è¿™ä¸ªæ—¶å€™ç‚¹å‡»æ”¹å·¥å…·æŸ¥çœ‹å½“å‰æˆ‘ä»¬é€‰ä¸­çš„Javaæºæ–‡ä»¶çš„æ–‡ä»¶æ“ä½œç¬¦ï¼Œæ˜¯å¯èƒ½ä¼šæŠ¥é”™æ‰¾ä¸åˆ°æŒ‡å®šçš„classæ–‡ä»¶ã€‚</p>
<p>è¿™æ˜¯å› ä¸ºæˆ‘ä»¬æŒ‡å®šçš„<code>Working directory</code>ä¸­è¿˜æ²¡æœ‰ç”Ÿæˆclassæ–‡ä»¶ï¼Œé€‰æ‹©<code>Build</code>é€‰é¡¹ä¸­çš„<code>Make Project</code>ï¼Œç­‰å¾…makeå®Œæˆï¼Œå†æ¬¡ç‚¹å‡»<code>Tools</code>â€”&gt;<code>External Toolsâ€”&gt;</code> <code>JNI Descriptor Generator</code> å³å¯ç”Ÿæˆå¯¹åº”Javaæºæ–‡ä»¶çš„æ–‡ä»¶æè¿°ç¬¦äº†ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ„‰å¿«çš„è°ƒç”¨ä½¿ç”¨Cè°ƒç”¨Javaä¸­çš„æ–¹æ³•å’¯ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;note info&quot;&gt;&lt;p&gt;åœ¨æ—¥å¸¸çš„Android NDKå¼€å‘ä¸­ï¼Œä¼šä¸å¯é¿å…çš„ç”¨åˆ°Cä¸Javaä»£ç ç›¸äº’è°ƒç”¨çš„æƒ…å†µã€‚Javaè°ƒç”¨Cçš„æ–¹æ³•è¿˜å¥½ï¼ŒCè°ƒç”¨Javaçš„æ–¹æ³•å°±æ¯”è¾ƒéº»çƒ¦äº†ã€‚éœ€è¦ç¼–å†™çœ‹ç€å°±å¤´ç–¼çš„Javaæ–¹æ³•æè¿°ç¬¦æ‰èƒ½æ­£ç¡®çš„è°ƒç”¨Javaæ–¹æ³•ã€‚ &lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;å…¶ä¸­å¸¸è§çš„Javaæ–¹æ³•åŸŸå’Œæè¿°ç¬¦å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:center&quot;&gt;Javaç±»å‹&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;ç­¾å&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Boolean&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Z&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Byte&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;B&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Char&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;C&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Short&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;S&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Int&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;I&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Long&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;J&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Float&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;F&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Double&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;D&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Fully-qualified-class&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Lfully-qualified-class&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;type[]&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;[type&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Method type&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;(arg-type)ret-type&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;é€šè¿‡ä¸Šè¿°å¯¹ç…§è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Cä»£ç æŸ¥æ‰¾ä¸€ä¸ªä¸º&lt;code&gt;String&lt;/code&gt;ç±»å‹çš„Javaé™æ€å­—æ®µï¼Œä¾‹å¦‚:&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;jfieldID staticJavaFieldId;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;staticJavaFieldId = env-&amp;gt;GetStaticFieldID(clazz, &lt;span class=&quot;string&quot;&gt;&quot;mStaticField&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;Ljava/lang/String;&quot;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;* do something...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;**/&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="Android" scheme="https://notes.wanghao.work/tags/Android/"/>
    
      <category term="Android Studio" scheme="https://notes.wanghao.work/tags/Android-Studio/"/>
    
      <category term="JNI" scheme="https://notes.wanghao.work/tags/JNI/"/>
    
  </entry>
  
  <entry>
    <title>FFmpegæŠ˜è…¾ç¬”è®°ä¹‹ç¼–è¯‘FFmpeg</title>
    <link href="https://notes.wanghao.work/2017-01-13-FFmpeg%E6%8A%98%E8%85%BE%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%BC%96%E8%AF%91FFmpeg.html"/>
    <id>https://notes.wanghao.work/2017-01-13-FFmpegæŠ˜è…¾ç¬”è®°ä¹‹ç¼–è¯‘FFmpeg.html</id>
    <published>2017-01-13T13:58:04.000Z</published>
    <updated>2017-06-14T15:23:12.000Z</updated>
    
    <content type="html"><![CDATA[<p>â€‹        åˆæœ‰å¾ˆä¹…æ²¡æœ‰å†™æ–°çš„æ–‡ç« äº†ï¼Œæ„Ÿè§‰å†ä¸å†™ç‚¹ä»€ä¹ˆä¸œè¥¿åšå®¢è‰éƒ½é•¿æ»¡äº†ã€‚äºæ˜¯æ‰“ç®—æŠ˜è…¾ä¸‹FFmpegï¼Œè®°å½•ä¸‹æŠ˜è…¾çš„è¿‡ç¨‹ï¼Œä»¥ç†Ÿæ‚‰Android NDKå¼€å‘çš„åŸºæœ¬æ“ä½œã€‚è¿‡ç¨‹ä¸­æœ‰åœ°æ–¹æœ‰é”™è¯¯æ¬¢è¿æŒ‡å‡ºï¼Œå¦‚æœä½ å¯¹è¿™ä¸ªæ–¹é¢æœ‰æ‰€äº†è§£ï¼Œæ¬¢è¿è®¨è®ºæŒ‡æ•™ã€‚</p>
<h4 id="ç¼–è¯‘ç¯å¢ƒ"><a href="#ç¼–è¯‘ç¯å¢ƒ" class="headerlink" title="ç¼–è¯‘ç¯å¢ƒ"></a>ç¼–è¯‘ç¯å¢ƒ</h4><ul>
<li><a href="https://ffmpeg.org/releases/ffmpeg-2.8.11.tar.bz2" target="_blank" rel="external">FFmpeg 2.8.11 â€œFeynmanâ€</a></li>
<li>Mac OS X </li>
<li>NDK  <code>14.0.3770861</code></li>
</ul>
<p>ä¸‹è½½å®ŒæˆFFmpegæºç ä¹‹åï¼Œå…ˆå¯¹æºç æ ¹ç›®å½•ä¸­çš„<code>configure</code>æ–‡ä»¶è¿›è¡Œä¿®æ”¹ä»¥é€‚åº”Androidå¹³å°ã€‚å› ä¸ºé»˜è®¤ç¼–è¯‘å‡ºæ¥çš„åŠ¨æ€åº“æ–‡ä»¶ç‰ˆæœ¬å·åœ¨<code>.so</code>ä¹‹åï¼Œä¾‹å¦‚ï¼š<code>libavcodec.so.56.60.100</code>ã€‚Androidå¹³å°å¯¹è¿™ç§æ ¼å¼ä¸èƒ½å¾ˆå¥½çš„è¯†åˆ«ï¼ˆå¦‚æœä½ ä¸ä»‹æ„ä¸€ä¸ªä¸€ä¸ªä¿®æ”¹æ–‡ä»¶åçš„è¯ï¼‰ã€‚é€šè¿‡<code>Vim</code>æˆ–è€…å…¶ä»–æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€<code>configure</code>æ–‡ä»¶çš„ç¬¬<code>2934</code>è¡Œï¼ˆå¦‚æœä½ ä¸‹è½½çš„FFmpegç‰ˆæœ¬å’Œæˆ‘çš„ä¸€æ ·çš„è¯ï¼‰å°†:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">SLIBNAME_WITH_MAJOR='$(SLIBNAME).$(LIBMAJOR)'</div><div class="line">LIB_INSTALL_EXTRA_CMD='$$(RANLIB) "$(LIBDIR)/$(LIBNAME)"'</div><div class="line">SLIB_INSTALL_NAME='$(SLIBNAME_WITH_VERSION)'</div><div class="line">SLIB_INSTALL_LINKS='$(SLIBNAME_WITH_MAJOR) $(SLIBNAME)'</div></pre></td></tr></table></figure>
<p>ä¿®æ”¹ä¸º:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">SLIBNAME_WITH_MAJOR='$(SLIBPREF)$(FULLNAME)-$(LIBMAJOR)$(SLIBSUF)'  </div><div class="line">LIB_INSTALL_EXTRA_CMD='$$(RANLIB)"$(LIBDIR)/$(LIBNAME)"'  </div><div class="line">SLIB_INSTALL_NAME='$(SLIBNAME_WITH_MAJOR)'  </div><div class="line">SLIB_INSTALL_LINKS='$(SLIBNAME)'</div></pre></td></tr></table></figure>
<p>åä¿å­˜ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;â€‹        åˆæœ‰å¾ˆä¹…æ²¡æœ‰å†™æ–°çš„æ–‡ç« äº†ï¼Œæ„Ÿè§‰å†ä¸å†™ç‚¹ä»€ä¹ˆä¸œè¥¿åšå®¢è‰éƒ½é•¿æ»¡äº†ã€‚äºæ˜¯æ‰“ç®—æŠ˜è…¾ä¸‹FFmpegï¼Œè®°å½•ä¸‹æŠ˜è…¾çš„è¿‡ç¨‹ï¼Œä»¥ç†Ÿæ‚‰Android NDKå¼€å‘çš„åŸºæœ¬æ“ä½œã€‚è¿‡ç¨‹ä¸­æœ‰åœ°æ–¹æœ‰é”™è¯¯æ¬¢è¿æŒ‡å‡ºï¼Œå¦‚æœä½ å¯¹è¿™ä¸ªæ–¹é¢æœ‰æ‰€äº†è§£ï¼Œæ¬¢è¿è®¨è®ºæŒ‡æ•™ã€‚&lt;/p&gt;
&lt;h4 id=&quot;ç¼–è¯‘ç¯å¢ƒ&quot;
    
    </summary>
    
    
      <category term="Android" scheme="https://notes.wanghao.work/tags/Android/"/>
    
      <category term="FFmpeg" scheme="https://notes.wanghao.work/tags/FFmpeg/"/>
    
      <category term="NDK" scheme="https://notes.wanghao.work/tags/NDK/"/>
    
  </entry>
  
  <entry>
    <title>Macè‡ªå¸¦VNC Client</title>
    <link href="https://notes.wanghao.work/2016-11-24-Mac%E8%87%AA%E5%B8%A6VNC-Client.html"/>
    <id>https://notes.wanghao.work/2016-11-24-Macè‡ªå¸¦VNC-Client.html</id>
    <published>2016-11-24T13:57:28.000Z</published>
    <updated>2016-11-24T14:11:04.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç”±äºæœ‰éœ€è¦è¿œç¨‹VNCçš„éœ€è¦ï¼Œè‹¦è‹¦å¯»æ‰¾ä¸€æ¬¾Macä¸Šæ¯”è¾ƒå¥½ä½¿çš„VNC Clientï¼Œç»“æœç»äººæŒ‡ç‚¹ï¼Œå‘ç°åŸæ¥MacOSè‡ªå¸¦äº†VNC Clientï¼Œåªæ˜¯æ²¡æœ‰åœ¨Launchpadä¸­æ˜¾ç¤ºç½¢äº†ã€‚ä½¿ç”¨<code>command</code>+<code>space</code> è°ƒå‡º<code>Spotlightæœç´¢</code>é”®å…¥<code>screen Sharing.app</code>å³å¯ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç”±äºæœ‰éœ€è¦è¿œç¨‹VNCçš„éœ€è¦ï¼Œè‹¦è‹¦å¯»æ‰¾ä¸€æ¬¾Macä¸Šæ¯”è¾ƒå¥½ä½¿çš„VNC Clientï¼Œç»“æœç»äººæŒ‡ç‚¹ï¼Œå‘ç°åŸæ¥MacOSè‡ªå¸¦äº†VNC Clientï¼Œåªæ˜¯æ²¡æœ‰åœ¨Launchpadä¸­æ˜¾ç¤ºç½¢äº†ã€‚ä½¿ç”¨&lt;code&gt;command&lt;/code&gt;+&lt;code&gt;space&lt;/code&gt; è°ƒå‡º&lt;co
    
    </summary>
    
    
      <category term="Mac" scheme="https://notes.wanghao.work/tags/Mac/"/>
    
      <category term="Tips" scheme="https://notes.wanghao.work/tags/Tips/"/>
    
  </entry>
  
  <entry>
    <title>å¼€å¯Gitå¤§å°å†™æ•æ„Ÿ</title>
    <link href="https://notes.wanghao.work/2016-11-24-%E5%BC%80%E5%90%AFGit%E5%A4%A7%E5%B0%8F%E5%86%99%E6%95%8F%E6%84%9F.html"/>
    <id>https://notes.wanghao.work/2016-11-24-å¼€å¯Gitå¤§å°å†™æ•æ„Ÿ.html</id>
    <published>2016-11-24T13:35:57.000Z</published>
    <updated>2016-11-24T13:53:53.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘å…¬å¸å¼€å‘çš„é¡¹ç›®çš„æ—¶å€™ï¼Œè‡ªå·±æˆ–è€…é˜Ÿå‹éƒ½ç»å¸¸ä¼šæ‰‹æŠ–é’ˆå¯¹æŸäº›æ–‡ä»¶çš„å‘½åè§„èŒƒå¤§å°å†™å†™é”™ã€‚ï¼ˆæ¯•ç«Ÿå…¥å†¬äº†ã€‚ã€‚ï¼‰å°¤å…¶æ˜¯åŒ…åå°å†™æ‰‹æŠ–å†™æˆå¤§å†™äº†ã€‚ã€‚åˆç”±äºæˆ‘è®¾ç½®Android Studioæ–°å»ºæ–‡ä»¶è‡ªåŠ¨æ·»åŠ åˆ°Gitï¼Œä¸€æ¥äºŒå¾€ï¼Œå¯¼è‡´æ¨ä¸ŠæœåŠ¡å™¨ä¹‹åå‘ç°è‡ªå·±å‘½åæœ‰é—®é¢˜ï¼Œé¡ºæ‰‹æ”¹æˆå°å†™ï¼Œè¿™ä¸ªæ—¶å€™é—®é¢˜å°±æ¥äº†ã€‚</p>
<p>ç”±äºGité»˜è®¤æ˜¯å¤§å°å†™ä¸æ•æ„Ÿçš„ï¼Œå¯¼è‡´æˆ‘è¿™è¾¹è™½ç„¶ä¿®æ”¹äº†ï¼Œç„¶è€Œé˜Ÿå‹é‚£è¾¹è¿˜æ˜¯è€æ ·å­ï¼Œå¯èƒ½ä¼šå¯¼è‡´åç»­çš„æäº¤å‡ºç°é—®é¢˜è®©é¡¹ç›®æ— æ³•ç¼–è¯‘é€šè¿‡ï¼Œè™½ç„¶ä¸æ˜¯ä»€ä¹ˆå¤§é—®é¢˜ï¼Œç¨å¾®å°æ”¹ä¸€ä¸‹å°±è¡Œã€‚ç„¶è€Œé‰´äºè¿™ç§é—®é¢˜å‡ºç°äº†å‡ æ¬¡ï¼Œæ¯æ¬¡éƒ½æ‰‹åŠ¨ä¿®æ”¹è¿˜æ˜¯æŒºé—¹å¿ƒçš„ã€‚æˆ‘ä»¬è¿˜æ˜¯æ¥åŠ¨æ‰‹è®©GitåŒºåˆ†å¤§å°å†™å§ã€‚</p>
<p>å¦‚æœåªæ˜¯æƒ³åº”ç”¨äºå½“å‰é¡¹ç›®ï¼Œé‚£ä¹ˆåœ¨å½“å‰é¡¹ç›®ä¸­ä½¿ç”¨æ‰§è¡Œä»¥ä¸‹<code>Gitå‘½ä»¤</code>ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git config core.ignorecase false</div></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œå¦‚æœæƒ³ä¸€åŠ³æ°¸é€¸çš„è¯ï¼Œæ¨èè¿˜æ˜¯åšä¸€ä¸ªå…¨å±€é…ç½®:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git config --global core.ignorecase false</div></pre></td></tr></table></figure>
<p>è¿™æ ·ä¹‹åçš„é¡¹ç›®éƒ½ä¸ç”¨æ‹…å¿ƒå¤§å°å†™éƒ½é—®é¢˜é—¹å¿ƒäº†ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘å…¬å¸å¼€å‘çš„é¡¹ç›®çš„æ—¶å€™ï¼Œè‡ªå·±æˆ–è€…é˜Ÿå‹éƒ½ç»å¸¸ä¼šæ‰‹æŠ–é’ˆå¯¹æŸäº›æ–‡ä»¶çš„å‘½åè§„èŒƒå¤§å°å†™å†™é”™ã€‚ï¼ˆæ¯•ç«Ÿå…¥å†¬äº†ã€‚ã€‚ï¼‰å°¤å…¶æ˜¯åŒ…åå°å†™æ‰‹æŠ–å†™æˆå¤§å†™äº†ã€‚ã€‚åˆç”±äºæˆ‘è®¾ç½®Android Studioæ–°å»ºæ–‡ä»¶è‡ªåŠ¨æ·»åŠ åˆ°Gitï¼Œä¸€æ¥äºŒå¾€ï¼Œå¯¼è‡´æ¨ä¸ŠæœåŠ¡å™¨ä¹‹åå‘ç°è‡ªå·±å‘½åæœ‰é—®é¢˜ï¼Œé¡ºæ‰‹æ”¹æˆå°å†™ï¼Œè¿™ä¸ªæ—¶å€™é—®é¢˜
    
    </summary>
    
    
      <category term="Git" scheme="https://notes.wanghao.work/tags/Git/"/>
    
      <category term="Tips" scheme="https://notes.wanghao.work/tags/Tips/"/>
    
  </entry>
  
  <entry>
    <title>åŸºäºLeanCloudã€Telegramå®ç°å¤šè¯´è¯„è®ºæ¨é€</title>
    <link href="https://notes.wanghao.work/2016-10-26-%E5%9F%BA%E4%BA%8ELeanCloud%E3%80%81Telegram%E5%AE%9E%E7%8E%B0%E5%A4%9A%E8%AF%B4%E8%AF%84%E8%AE%BA%E6%8E%A8%E9%80%81.html"/>
    <id>https://notes.wanghao.work/2016-10-26-åŸºäºLeanCloudã€Telegramå®ç°å¤šè¯´è¯„è®ºæ¨é€.html</id>
    <published>2016-10-25T16:19:53.000Z</published>
    <updated>2017-06-30T17:41:21.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¼—æ‰€å‘¨çŸ¥å¤šè¯´è¯„è®ºæ˜¯ä¸æ”¯æŒä¸»åŠ¨æ¨é€çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœè®¿å®¢ä¸»åŠ¨ç•™è¨€è¯„è®ºï¼Œå¤šè¯´æ˜¯ä¸ä¼šç»™æˆ‘ä»¬é‚®ä»¶æ¨é€æé†’çš„ã€‚ä½†æ˜¯æˆ‘ä»¬æ€»ä¸èƒ½æ¯éš”ä¸€æ®µæ—¶é—´å»æ£€æŸ¥ä¸‹åšå®¢çš„è¯„è®ºç•™è¨€å§ï¼Œè¿™æ ·æ•ˆç‡ä¹Ÿå¤ªä½äº†ãƒ¾(ã€‚ï¿£â–¡ï¿£)ï¾‚ã‚œã‚œã‚œäºæ˜¯è¶ç€æœ€è¿‘é—²çš„è›‹ç–¼æŠ˜è…¾å‡ºäº†è¿™ä¹ˆä¸ªä¸œä¸œï¼Œèƒ½å¤Ÿå®ç°è®¿å®¢ä¸»åŠ¨è¯„è®ºçš„æ—¶å€™ï¼Œåœ¨5åˆ†é’Ÿä¹‹å†…å“åº”å¹¶é€šè¿‡Telegramæ¨é€åˆ°æ‰‹æœºä¸Šæ–¹ä¾¿æŸ¥çœ‹å’Œæµè§ˆã€‚</p>
<hr>
<p>å—¯ï¼Œç›¸å…³çš„æºç å’ŒåŸºæœ¬çš„éƒ¨ç½²è¯´æ˜ä¸¢åœ¨Githubä¸Šäº†,æ„Ÿå…´è¶£çš„å¯ä»¥<font color="red"><strong><a href="https://github.com/Doublemine/TelegramBot" target="_blank" rel="external">æˆ³æ­¤æŸ¥çœ‹</a></strong></font>ã€‚</p>
<ul>
<li><a href="https://github.com/Doublemine/TelegramBot" target="_blank" rel="external">Telegram Bot For DuoShuo</a></li>
</ul>
<p>ç›®å‰ä¿è¯åŸºæœ¬çš„åŠŸèƒ½èƒ½å¤Ÿç¨³å®šçš„è¿è¡Œï¼Œåç»­å†æ·»åŠ ä¸€äº›å…¶å®ƒçš„åŠŸèƒ½å§ã€‚å—¯ï¼Œè¯¦ç»†çš„é…ç½®è¯´æ˜å…ˆæŒ–ä¸ªå‘ï¼Œæ”¹å¤©å†å†™ã€‚æ‡’ç™ŒçŠ¯äº†ï¼Œå…ˆä¼‘æ¯~</p>
<p><img src="https://ws1.sinaimg.cn/large/694830ebgy1fh3r3jys56g208c08cx6p.jpg" alt="" title="ä¼‘æ¯"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¼—æ‰€å‘¨çŸ¥å¤šè¯´è¯„è®ºæ˜¯ä¸æ”¯æŒä¸»åŠ¨æ¨é€çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœè®¿å®¢ä¸»åŠ¨ç•™è¨€è¯„è®ºï¼Œå¤šè¯´æ˜¯ä¸ä¼šç»™æˆ‘ä»¬é‚®ä»¶æ¨é€æé†’çš„ã€‚ä½†æ˜¯æˆ‘ä»¬æ€»ä¸èƒ½æ¯éš”ä¸€æ®µæ—¶é—´å»æ£€æŸ¥ä¸‹åšå®¢çš„è¯„è®ºç•™è¨€å§ï¼Œè¿™æ ·æ•ˆç‡ä¹Ÿå¤ªä½äº†ãƒ¾(ã€‚ï¿£â–¡ï¿£)ï¾‚ã‚œã‚œã‚œäºæ˜¯è¶ç€æœ€è¿‘é—²çš„è›‹ç–¼æŠ˜è…¾å‡ºäº†è¿™ä¹ˆä¸ªä¸œä¸œï¼Œèƒ½å¤Ÿå®ç°è®¿å®¢ä¸»åŠ¨è¯„è®ºçš„æ—¶å€™ï¼Œåœ¨5åˆ†é’Ÿä¹‹å†…å“åº”å¹¶
    
    </summary>
    
      <category term="Python" scheme="https://notes.wanghao.work/categories/Python/"/>
    
    
      <category term="LeanCloud" scheme="https://notes.wanghao.work/tags/LeanCloud/"/>
    
      <category term="Python" scheme="https://notes.wanghao.work/tags/Python/"/>
    
      <category term="Telegram" scheme="https://notes.wanghao.work/tags/Telegram/"/>
    
  </entry>
  
  <entry>
    <title>å½“Androidåº”ç”¨è¢«å¼ºæ€ä¹‹å</title>
    <link href="https://notes.wanghao.work/2016-09-10-AndroidProcessbeKilledweShoudIDo.html"/>
    <id>https://notes.wanghao.work/2016-09-10-AndroidProcessbeKilledweShoudIDo.html</id>
    <published>2016-09-10T11:00:20.000Z</published>
    <updated>2017-06-14T15:19:39.000Z</updated>
    
    <content type="html"><![CDATA[<p>Androidåº”ç”¨åœ¨åå°è¿è¡Œçš„æ—¶å€™å¾ˆå®¹æ˜“è¢«å¼ºæ€ï¼Œå°¤å…¶æ˜¯åœ¨å›½å†…XXåŠ©æ‰‹ã€XXç®¡å®¶ã€XXå¤§å¸ˆä¹‹ç±»çš„åº”ç”¨å¤§è¡Œå…¶é“ä¹‹ä¸‹ã€‚å¦‚æœæˆ‘ä»¬å¼€å‘çš„åº”ç”¨æ²¡æœ‰è¢«ç”¨æˆ·åŠ å…¥ç™½åå•ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šä¼šè¢«ç³»ç»Ÿå› ä¸ºå†…å­˜ä¸è¶³æˆ–è€…ç”¨æˆ·ä¸»åŠ¨ç»™åº”ç”¨åœ¨åå°è¿è¡Œçš„æ—¶å€™æ€æ‰ã€‚è¿™ä¸ªæ—¶å€™é—®é¢˜å°±æ¥äº†ï¼š</p>
<ul>
<li><strong>å¦‚ä½•ä¿è¯æˆ‘ä»¬çš„åº”ç”¨åœ¨è¢«å¼ºæ€ä¹‹åç”¨æˆ·å†æ¬¡å›åˆ°åº”ç”¨æ¥ä¿è¯åº”ç”¨çš„ç¨³å®šæ€§è€Œä¸Crashï¼Ÿ</strong></li>
</ul>
<p>ä¸ºäº†è¯´æ˜ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬æ¥ç®€å•æ¨¡æ‹Ÿè¿™æ ·ä¸€ä¸ªè¿‡ç¨‹:</p>
<blockquote>
<p>APP â€“&gt; ActivityA â€“&gt; ActivityB â€“&gt;ActivityC â€“&gt; Pressed Home</p>
</blockquote>
<p>å‡è®¾APPåœ¨Activity Cé¡µé¢ç”¨æˆ·æŒ‰ä¸‹<code>Home</code>é”®åº”ç”¨é€€åˆ°åå°è¿è¡Œã€‚è¿™ä¸ªæ—¶å€™å¯åŠ¨DDMSï¼Œé€‰ä¸­è¯¥APPçš„è¿›ç¨‹ï¼ŒKillã€‚ç„¶åæˆ‘ä»¬ä»è¿è¡ŒAPPå†å²åˆ—è¡¨ä¸­é€‰ä¸­è¯¥APPå¹¶å°†å…¶ç½®äºå‰å°ï¼Œè¿™ä¸ªæ—¶å€™å›åˆ°è¯¥åº”ç”¨çš„ç•Œé¢è¿˜æ˜¯Activity Cã€‚å†ç‚¹å‡»è¿”å›æŒ‰é’®å›åˆ°ActivityBï¼Œåœ¨æŸäº›æ€§èƒ½æ¯”è¾ƒå·®ä¸€ç‚¹çš„æœºå™¨ä¸Šå¯èƒ½ä¼šå‡ºç°çŸ­æš‚çš„é»‘å±ç„¶åæ‰ä¼šæ˜¾ç¤ºå‡ºActivityBã€‚è¿™æ˜¯å› ä¸ºè¯¥Activityå®ä¾‹å…¶å®åœ¨Killè¯¥APPè¿›ç¨‹çš„æ—¶å€™å·²ç»è¢«é”€æ¯äº†ï¼Œä½†æ˜¯Androidç³»ç»Ÿè™½ç„¶é”€æ¯äº†Activityå®ä¾‹ï¼Œå´å¹¶æ²¡æœ‰é”€æ¯è¯¥APPçš„Activityæ ˆã€‚å› æ­¤æˆ‘ä»¬ç‚¹å‡»è¿”å›æŒ‰é’®è¿˜æ˜¯ä¼šå›åˆ°ActivityBã€‚ä½†æ˜¯éœ€è¦é‡æ–°æ„å»ºè¯¥ActivityBçš„å®ä¾‹ã€‚</p>
<p>è¿™æ ·çœ‹è²Œä¼¼å¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œç„¶è€Œäº‹æƒ…å¹¶ä¸ä¼šè¿™ä¹ˆç®€å•ï¼ˆåºŸè¯ï¼Œä¸ç„¶æˆ‘å†™è¿™ç¯‡åšå®¢å¹²å˜›ã€‚ã€‚ï¼‰ï¼Œå¦‚æœActivityBä¸­å¼•ç”¨äº†é™æ€å˜é‡å¹¶å°è¯•è·å–å…¶å€¼çš„æ—¶å€™ï¼Œè¿™ä¸ªæ—¶å€™æ˜¯ä¼šå‡ºç°NPEçš„ã€‚</p>
<a id="more"></a>
<p>æˆ‘ä»¬ç®€å•æ¥æ€»ç»“ä¸‹ä¸Šè¿°è¿‡ç¨‹:</p>
<ol>
<li><p>å½“åº”ç”¨åœ¨åå°è¢«Killï¼Œæ•´ä¸ªAPPè¿›ç¨‹éƒ½è¢«é”€æ¯ï¼Œæ‰€æœ‰å˜é‡éƒ½è¢«æ¸…ç©ºï¼ŒåŒ…æ‹¬Applicationçš„å®ä¾‹ã€‚</p>
</li>
<li><p>è™½ç„¶æ‰€æœ‰å˜é‡å’Œå®ä¾‹éƒ½è¢«é”€æ¯ï¼Œä½†æ˜¯Activityæ ˆå¹¶æ²¡æœ‰è¢«æ¸…ç©ºï¼Œæ‰€ä»¥æˆ‘ä»¬å›åˆ°åº”ç”¨è¿˜èƒ½å¾—çŸ¥é¡µé¢çš„æ‰“å¼€é¡ºåºã€‚</p>
</li>
<li><p>å½“åº”ç”¨è¢«å¼ºæ€æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨<code>onSaveInstance</code>æ–¹æ³•å»ä¿å­˜ä¸€äº›æ ¸å¿ƒå˜é‡ï¼Œç„¶è€Œè¿™åœ¨é¢å¯¹Nå¤šçš„é¡µé¢çš„æ—¶å€™æ˜¾ç„¶ä¸æ˜¯ä¸€ä»¶çœå¿ƒçš„äº‹æƒ…ï¼Œè€Œä¸”ä½ ä¹Ÿä¸èƒ½ä¿è¯ä½ çš„é˜Ÿå‹ä¹Ÿä¼šè¿™ä¹ˆåšã€‚ã€‚</p>
</li>
<li><p>åœ¨æŸäº›æ€§èƒ½æ¯”è¾ƒä½æˆ–è€…é¡µé¢é€»è¾‘æ¯”è¾ƒå¤æ‚çš„é¡µé¢ä¼šé»‘å±æ˜¯å› ä¸ºéœ€è¦é‡å»ºActivityBçš„å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯éœ€è¦é‡èµ°Activityçš„å£°æ˜å‘¨æœŸ<code>OnCreate</code>ï¼Œæ€§èƒ½å·®ç‚¹çš„æœºå™¨ä¸Šè‡ªç„¶å°±ä¼šæœ‰çŸ­æš‚çš„é»‘å±äº†ã€‚</p>
</li>
</ol>
<p>å¦‚æœAPPä¸­æ²¡æœ‰é™æ€å˜é‡çš„å¼•ç”¨ï¼Œé‚£å°±ä¸ä¼šå‡ºç°NEPï¼Œä½†æ˜¯ä¸€æ—¦å¼•ç”¨äº†é™æ€å˜é‡ï¼Œè¿™ä¸ªæ—¶å€™å¯èƒ½å°±æ¯”è¾ƒå±é™©äº†ã€‚ï¼ˆé™æ€å˜é‡åŒ…æ‹¬å…¨å±€çš„ç™»å½•çŠ¶æ€ï¼Œå…¨å±€çš„ç”¨æˆ·é…ç½®ã€æ ‡å¿—ä½ä¹‹ç±»çš„æ•°æ®ï¼‰å½“ç„¶äº†ï¼Œå¦‚æœä½ èƒ½å°†æ‰€æœ‰çš„é™æ€å˜é‡ä¿®æ”¹åˆ°å•ä¾‹ä¸­å»ï¼Œå¹¶å°†å…¶æŒä¹…åŒ–ï¼Œä¸ºNULLçš„æ—¶å€™å†å»å–çš„è¯ï¼ŒåŸåˆ™ä¸Šæ¥è¯´è¿™æ ·ä¹Ÿå¯ä»¥é¿å…NPEã€‚ç„¶è€Œè¦æ˜¯è¿™æ ·åšçš„è¯å¾ˆå¤§ç¨‹åº¦ä¸Šä¼šå‡ç¼“å¼€å‘çš„è¿›åº¦ï¼Œè€Œä¸”æŒ‡ä¸å®šå“ªä¸ªé˜Ÿå‹å°±ç»™ä½ æŒ–å‘äº†ã€‚ç„¶åä½ æ€ä¹ˆæŒ‚çš„éƒ½ä¸çŸ¥é“ã€‚ã€‚</p>
<p>ä¸ºäº†ä¸€åŠ³æ°¸é€¸çš„è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å†·é™ä¸‹æ¥æ€è€ƒä¸€ä¸‹:<strong>æ—¢ç„¶APPè¢«å¼ºæ€äº†ï¼Œä¸ºå•¥è¿˜è¦å›åˆ°åŸå…ˆçš„é¡µé¢ä¸­å»è€Œä¸æ˜¯é‡èµ°å¯åŠ¨APPçš„æµç¨‹?</strong></p>
<p>æˆ‘ä»¬è™½ç„¶ä¸èƒ½é˜»æ­¢Androidç³»ç»Ÿé”€æ¯å®ä¾‹å´ä¿å­˜Activityæ ˆï¼Œä¹Ÿä¸æƒ³å¤šå†™é‚£äº›æŒä¹…åŒ–æˆ–è€…Cacheé™æ€å˜é‡ä»£ç ï¼ˆè¿™å°†æ˜¯ä¸€ä»¶è´¹åŠ›è€Œä¸”ä¸å¤ªè®¨å¥½çš„äº‹æƒ…ï¼‰æ‰€ä»¥æˆ‘ä»¬å”¯ä¸€èƒ½åšçš„å°±æ˜¯æ£€æµ‹åº”ç”¨æ˜¯å¦è¢«å¼ºæ€ï¼Œå¹¶ä¸”åœ¨è¢«å¼ºæ€ä¹‹åé‡èµ°å¯åŠ¨æµç¨‹è€Œä¸æ˜¯å›åˆ°åŸå…ˆçš„é€»è¾‘å½“ä¸­ã€‚</p>
<p>ä»¥ä¸‹ç»™å‡ºæˆ‘çš„ä¸€ç§å®ç°æ–¹å¼ï¼Œå¦‚æœä½ æœ‰æ›´å¥½çš„æƒ³æ³•ï¼Œæ¬¢è¿å’Œæˆ‘äº¤æµ:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</div><div class="line">  </div><div class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> FLAG;</div><div class="line">  <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> FLAG_NOT_INIT = <span class="number">200</span>;</div><div class="line"></div><div class="line">  <span class="meta">@Override</span> <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(@Nullable Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">    <span class="keyword">if</span> (FLAG != FLAG_NOT_INIT) &#123;</div><div class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.getClass() == LauncherActivity.class) &#123;</div><div class="line">        FLAG = FLAG_NOT_INIT;</div><div class="line">      &#125; <span class="keyword">else</span> &#123;</div><div class="line">        reLauncher();</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å®ä¾‹åŒ–ä¸Šè¿°åœºæ™¯ï¼Œç»™å‡ºä¸€ç§å¯¹åº”å…³ç³»:</p>
<p>ActivityA â€“&gt; å¯åŠ¨é¡µ</p>
<p>ActivityB â€“&gt; ä¸»é¡µ</p>
<p>ActivityC â€“&gt; è¯¦æƒ…é¡µ</p>
<p>å…¶ä¸­å°†ActivityBçš„<code>launchMode</code>è®¾ç½®ä¸º<code>singleTask</code>ï¼Œå¹¶ä¸”åœ¨BaseActivityä¸­ä½¿ç”¨é™æ€å˜é‡FLAGè¿›è¡Œåˆ¤æ–­å½“å‰åº”ç”¨æ˜¯å¦è¢«å¼ºæ€ï¼Œå¦‚æœè¢«å¼ºæ€åˆ™åˆ©ç”¨ActivityBçš„<code>launchMode</code>ç‰¹æ€§æ¸…ç©ºæ ˆå¹¶é‡æ–°åˆå§‹åŒ–å³å¯ã€‚</p>
<h6 id="æœ‰å…³Activityçš„å¯åŠ¨æ¨¡å¼ç›¸å…³æ–‡ç« ï¼Œå¯å‚é˜…Activityå¯åŠ¨æ¨¡å¼å›¾æ–‡è¯¦è§£"><a href="#æœ‰å…³Activityçš„å¯åŠ¨æ¨¡å¼ç›¸å…³æ–‡ç« ï¼Œå¯å‚é˜…Activityå¯åŠ¨æ¨¡å¼å›¾æ–‡è¯¦è§£" class="headerlink" title="æœ‰å…³Activityçš„å¯åŠ¨æ¨¡å¼ç›¸å…³æ–‡ç« ï¼Œå¯å‚é˜…Activityå¯åŠ¨æ¨¡å¼å›¾æ–‡è¯¦è§£"></a>æœ‰å…³Activityçš„å¯åŠ¨æ¨¡å¼ç›¸å…³æ–‡ç« ï¼Œå¯å‚é˜…<a href="http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2015/0520/2897.html" target="_blank" rel="external">Activityå¯åŠ¨æ¨¡å¼å›¾æ–‡è¯¦è§£</a></h6>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Androidåº”ç”¨åœ¨åå°è¿è¡Œçš„æ—¶å€™å¾ˆå®¹æ˜“è¢«å¼ºæ€ï¼Œå°¤å…¶æ˜¯åœ¨å›½å†…XXåŠ©æ‰‹ã€XXç®¡å®¶ã€XXå¤§å¸ˆä¹‹ç±»çš„åº”ç”¨å¤§è¡Œå…¶é“ä¹‹ä¸‹ã€‚å¦‚æœæˆ‘ä»¬å¼€å‘çš„åº”ç”¨æ²¡æœ‰è¢«ç”¨æˆ·åŠ å…¥ç™½åå•ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šä¼šè¢«ç³»ç»Ÿå› ä¸ºå†…å­˜ä¸è¶³æˆ–è€…ç”¨æˆ·ä¸»åŠ¨ç»™åº”ç”¨åœ¨åå°è¿è¡Œçš„æ—¶å€™æ€æ‰ã€‚è¿™ä¸ªæ—¶å€™é—®é¢˜å°±æ¥äº†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¦‚ä½•ä¿è¯æˆ‘ä»¬çš„åº”ç”¨åœ¨è¢«å¼ºæ€ä¹‹åç”¨æˆ·å†æ¬¡å›åˆ°åº”ç”¨æ¥ä¿è¯åº”ç”¨çš„ç¨³å®šæ€§è€Œä¸Crashï¼Ÿ&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸ºäº†è¯´æ˜ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬æ¥ç®€å•æ¨¡æ‹Ÿè¿™æ ·ä¸€ä¸ªè¿‡ç¨‹:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;APP â€“&amp;gt; ActivityA â€“&amp;gt; ActivityB â€“&amp;gt;ActivityC â€“&amp;gt; Pressed Home&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å‡è®¾APPåœ¨Activity Cé¡µé¢ç”¨æˆ·æŒ‰ä¸‹&lt;code&gt;Home&lt;/code&gt;é”®åº”ç”¨é€€åˆ°åå°è¿è¡Œã€‚è¿™ä¸ªæ—¶å€™å¯åŠ¨DDMSï¼Œé€‰ä¸­è¯¥APPçš„è¿›ç¨‹ï¼ŒKillã€‚ç„¶åæˆ‘ä»¬ä»è¿è¡ŒAPPå†å²åˆ—è¡¨ä¸­é€‰ä¸­è¯¥APPå¹¶å°†å…¶ç½®äºå‰å°ï¼Œè¿™ä¸ªæ—¶å€™å›åˆ°è¯¥åº”ç”¨çš„ç•Œé¢è¿˜æ˜¯Activity Cã€‚å†ç‚¹å‡»è¿”å›æŒ‰é’®å›åˆ°ActivityBï¼Œåœ¨æŸäº›æ€§èƒ½æ¯”è¾ƒå·®ä¸€ç‚¹çš„æœºå™¨ä¸Šå¯èƒ½ä¼šå‡ºç°çŸ­æš‚çš„é»‘å±ç„¶åæ‰ä¼šæ˜¾ç¤ºå‡ºActivityBã€‚è¿™æ˜¯å› ä¸ºè¯¥Activityå®ä¾‹å…¶å®åœ¨Killè¯¥APPè¿›ç¨‹çš„æ—¶å€™å·²ç»è¢«é”€æ¯äº†ï¼Œä½†æ˜¯Androidç³»ç»Ÿè™½ç„¶é”€æ¯äº†Activityå®ä¾‹ï¼Œå´å¹¶æ²¡æœ‰é”€æ¯è¯¥APPçš„Activityæ ˆã€‚å› æ­¤æˆ‘ä»¬ç‚¹å‡»è¿”å›æŒ‰é’®è¿˜æ˜¯ä¼šå›åˆ°ActivityBã€‚ä½†æ˜¯éœ€è¦é‡æ–°æ„å»ºè¯¥ActivityBçš„å®ä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ ·çœ‹è²Œä¼¼å¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œç„¶è€Œäº‹æƒ…å¹¶ä¸ä¼šè¿™ä¹ˆç®€å•ï¼ˆåºŸè¯ï¼Œä¸ç„¶æˆ‘å†™è¿™ç¯‡åšå®¢å¹²å˜›ã€‚ã€‚ï¼‰ï¼Œå¦‚æœActivityBä¸­å¼•ç”¨äº†é™æ€å˜é‡å¹¶å°è¯•è·å–å…¶å€¼çš„æ—¶å€™ï¼Œè¿™ä¸ªæ—¶å€™æ˜¯ä¼šå‡ºç°NPEçš„ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Android" scheme="https://notes.wanghao.work/categories/Android/"/>
    
    
      <category term="Android" scheme="https://notes.wanghao.work/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>Androidä¹‹Keystoreæ–‡ä»¶ç­¾å</title>
    <link href="https://notes.wanghao.work/2016-07-03-Android%E4%B9%8BKeystore%E6%96%87%E4%BB%B6%E7%AD%BE%E5%90%8D.html"/>
    <id>https://notes.wanghao.work/2016-07-03-Androidä¹‹Keystoreæ–‡ä»¶ç­¾å.html</id>
    <published>2016-07-03T12:58:16.000Z</published>
    <updated>2016-11-06T01:31:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>Androidåº”ç”¨å¼€å‘çš„æ—¶å€™ä¼šç»å¸¸ä½¿ç”¨åˆ°ç¬¬ä¸‰æ–¹SDKï¼Œä¾‹å¦‚åœ°å›¾ã€æ¨é€ã€æ”¯ä»˜ä»¥åŠåˆ†äº«ç­‰ã€‚è€Œè¿™äº›ç¬¬ä¸‰æ–¹æœåŠ¡SDKä¸ºäº†åº”ç”¨ä¸è¢«æ»¥ç”¨éƒ½ä¼šæœ‰ç­¾åéªŒè¯æœºåˆ¶ã€‚æˆ‘ä»¬é€šè¿‡ä¸Šä¼ Androidåº”ç”¨çš„ç­¾åæ¥åœ¨æœåŠ¡ç«¯é…ç½®ä»¥éªŒè¯åº”ç”¨çš„åˆæ³•æ€§ã€‚æœ¬æ–‡å°†è®²è¿°ä¸‹åœ¨Android Stduioä¸­å¸¸ç”¨çš„ç­¾åæ“ä½œã€‚</p>
<h3 id="é»˜è®¤KeyStore"><a href="#é»˜è®¤KeyStore" class="headerlink" title="é»˜è®¤KeyStore"></a>é»˜è®¤KeyStore</h3><h4 id="é»˜è®¤KeyStoreå­˜å‚¨è·¯å¾„"><a href="#é»˜è®¤KeyStoreå­˜å‚¨è·¯å¾„" class="headerlink" title="é»˜è®¤KeyStoreå­˜å‚¨è·¯å¾„"></a>é»˜è®¤KeyStoreå­˜å‚¨è·¯å¾„</h4><p>åœ¨Android Stduioä¸­ç³»ç»Ÿé»˜è®¤å†…ç½®äº†ä¸€ä¸ªç­¾åæ–‡ä»¶<code>debug.keystore</code>ï¼Œç”¨äºæˆ‘ä»¬åœ¨debugä¸‹çš„é»˜è®¤Appç­¾åã€‚å¦‚æœæ²¡æœ‰åœ¨Gradleæ–‡ä»¶ä¸­ç‰¹æ®ŠæŒ‡å®šï¼Œé‚£ä¹ˆAndroid Studioå°†è‡ªåŠ¨ä½¿ç”¨é»˜è®¤çš„<code>debug.keystore</code>æ–‡ä»¶ä¸ºé¡¹ç›®Appç”ŸæˆDebugç‰ˆæœ¬çš„ç­¾åã€‚</p>
<a id="more"></a>
<ul>
<li><p>åœ¨Mac/Linuxç³»ç»Ÿä¸­ï¼Œ<code>debug.keystore</code>æ–‡ä»¶é»˜è®¤å‚¨å­˜åœ¨<code>~/.android/</code>è·¯å¾„ä¸‹ã€‚</p>
</li>
<li><p>åœ¨Windowsç³»ç»Ÿä¸­ï¼Œ<code>debug.keystore</code>æ–‡ä»¶å°†é»˜è®¤å­˜å‚¨åœ¨<code>C:\Users\{USERNAME}\.android\</code>è·¯å¾„ä¸‹ã€‚</p>
</li>
</ul>
<h4 id="è·å–é»˜è®¤KeyStore-SHA-1"><a href="#è·å–é»˜è®¤KeyStore-SHA-1" class="headerlink" title="è·å–é»˜è®¤KeyStore SHA-1"></a>è·å–é»˜è®¤KeyStore <code>SHA-1</code></h4><p>çŸ¥é“äº†Android Stduio é»˜è®¤çš„<code>debug.keystore</code>ä¹‹åï¼Œä¸‹ä¸€æ­¥æˆ‘ä»¬å°†æ˜¯è¦è·å–å…¶æŒ‡çº¹ä¿¡æ¯ï¼Œä»¥ä¾¿äºåœ¨ç¬¬ä¸‰æ–¹æœåŠ¡é…ç½®ä¸­å¡«å…¥DebugæŒ‡çº¹ä¿¡æ¯ã€‚</p>
<ul>
<li>åœ¨Linux/Macç³»ç»Ÿä¸­ï¼Œæ‰“å¼€ç»ˆç«¯å¹¶è¾“å…¥ä»¥ä¸‹å‘½ä»¤:</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">keytool -list -v -keystore ~/.android/debug.keystore -<span class="built_in">alias</span> androiddebugkey -storepass android -keypass android</div></pre></td></tr></table></figure>
<ul>
<li>åœ¨Windowsç³»ç»Ÿä¸­ï¼Œåœ¨CMDä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤:</li>
</ul>
<figure class="highlight bat"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">keytool -list -v -keystore "<span class="variable">%USERPROFILE%</span>\.android\debug.keystore" -alias androiddebugkey -storepass android -keypass android</div></pre></td></tr></table></figure>
<p>å›è½¦æ‰§è¡Œä¹‹åï¼Œä½ å°†ä¼šçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„<code>debug.keystore</code>è¾“å‡ºæç¤º:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">åˆ«å: androiddebugkey</div><div class="line">åˆ›å»ºæ—¥æœŸ: 2015-11-18</div><div class="line">æ¡ç›®ç±»å‹: PrivateKeyEntry</div><div class="line">è¯ä¹¦é“¾é•¿åº¦: 1</div><div class="line">è¯ä¹¦[1]:</div><div class="line">æ‰€æœ‰è€…: CN=Android Debug, O=Android, C=US</div><div class="line">å‘å¸ƒè€…: CN=Android Debug, O=Android, C=US</div><div class="line">åºåˆ—å·: b15af1</div><div class="line">æœ‰æ•ˆæœŸå¼€å§‹æ—¥æœŸ: Wed Nov 18 07:18:45 CST 2015, æˆªæ­¢æ—¥æœŸ: Fri Nov 10 07:18:45 CST 2045</div><div class="line">è¯ä¹¦æŒ‡çº¹:</div><div class="line">         MD5: FE:A1:9C:02:71:A2:DA:F9:7F:1C:2B:61:D7:65:89:44</div><div class="line">         SHA1: 01:DF:58:7D:04:3E:76:B5:92:98:37:0E:DD:70:61:01:70:F5:C9:8E</div><div class="line">         SHA256: 84:18:44:C2:BD:AD:5D:A8:88:A1:96:EF:A6:27:86:0A:36:44:31:38:F2:5F:B6:4E:F1:10:EE:93:D6:22:CD:59</div><div class="line">         ç­¾åç®—æ³•åç§°: SHA256withRSA</div><div class="line">         ç‰ˆæœ¬: 3</div><div class="line"></div><div class="line">æ‰©å±•:</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å°†å…¶ä¸­çš„è¯ä¹¦æŒ‡çº¹å¡«å…¥åˆ°ç¬¬ä¸‰æ–¹æœåŠ¡DEBUGé…ç½®ä¸­å³å¯ã€‚å½“ç„¶äº†ï¼Œæœ‰çš„æ—¶å€™å‡ºäºè¿™æ ·æˆ–è€…é‚£æ ·çš„åŸå› è€ƒè™‘ï¼Œæˆ‘ä»¬å¹¶ä¸æƒ³ä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„KeyStoreæˆ–è€…å°±æƒ³è‡ªå·±ç”Ÿæˆä¸€ä¸ªæ–°çš„KeyStoreï¼ŒDebugç¯å¢ƒä¸Releaseç¯å¢ƒéƒ½ä½¿ç”¨åŒä¸€ä¸ªæ¥å‡å°‘é…ç½®çš„éº»çƒ¦ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„KeyStoreæ–‡ä»¶äº†ã€‚</p>
<h3 id="åˆ›å»ºæ–°çš„KeyStore"><a href="#åˆ›å»ºæ–°çš„KeyStore" class="headerlink" title="åˆ›å»ºæ–°çš„KeyStore"></a>åˆ›å»ºæ–°çš„KeyStore</h3><p>æˆ‘ä»¬ä½¿ç”¨JDKè‡ªå¸¦çš„Keytoolå‘½ä»¤è¡Œå·¥å…·å³å¯å®ŒæˆKeyStoreå¯†é’¥åº“æ–‡ä»¶çš„åˆ›å»ºï¼Œæ­¤å¤„éœ€è¦è¯´æ˜çš„æ˜¯ï¼ŒAndroid Stduioä¸­è‡ªå¸¦çš„å›¾å½¢åŒ–ç•Œé¢<code>KeyStore</code>ç”Ÿæˆå·¥å…·ç”Ÿæˆçš„<code>.jks</code>æ–‡ä»¶ä¸Keytoolç”Ÿæˆçš„<code>.keystore</code>æ–‡ä»¶åœ¨ä½¿ç”¨ä¸Šæ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚</p>
<h4 id="ç”ŸæˆKeyStore"><a href="#ç”ŸæˆKeyStore" class="headerlink" title="ç”ŸæˆKeyStore"></a>ç”ŸæˆKeyStore</h4><p>åœ¨ç»ˆç«¯ä¸­é”®å…¥ä»¥ä¸‹å‘½ä»¤:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">keytool -genkey -v -keystore &#123;FILENAME.keystore&#125; -<span class="built_in">alias</span> &#123;ALIAS&#125; -keyalg RSA -validity &#123;DURATION&#125;</div></pre></td></tr></table></figure>
<ul>
<li><code>{FILENAME.keystore}</code> ä¸ºç”Ÿæˆçš„KeyStoreçš„æ–‡ä»¶å</li>
<li><code>{ALIAS}</code> ä¸ºç”Ÿæˆçš„KeyStoreæ–‡ä»¶çš„åˆ«å</li>
<li><code>{DURATION}</code> ä¸ºè¯¥KeyStoreæ–‡ä»¶çš„è¿‡æœŸæ—¶é—´</li>
</ul>
<p>ä¸‹é¢å°†ä»¥ç”Ÿæˆä¸€ä¸ªtest.keystoreæ–‡ä»¶ä¸ºç¤ºä¾‹:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">keytool -genkey -v -keystore test.keystore -<span class="built_in">alias</span> <span class="built_in">test</span> -keyalg RSA -validity 365</div></pre></td></tr></table></figure>
<p>é”®å…¥ä»¥ä¸Šå‘½ä»¤å°†ç”Ÿæˆä¸€ä¸ªä»¥RSAç®—æ³•åŠ å¯†çš„æœ‰æ•ˆæœŸ365å¤©çš„åä¸º<code>test.keystore</code>çš„æ–‡ä»¶ï¼Œè¯¥KeyStoreæ–‡ä»¶çš„aliasä¸º testã€‚å›è½¦ç¡®è®¤æ‰§è¡Œè¯¥å‘½ä»¤ä¹‹åï¼Œå°†ä¼šè¦æ±‚è¾“å…¥å¯†é’¥åº“å£ä»¤ä»¥åŠä¸€äº›åŸºæœ¬çš„ä¿¡æ¯ï¼Œæ ¹æ®æç¤ºè¾“å…¥æ— è¯¯ä¹‹åå°†ä¼šåœ¨å½“å‰ç»ˆç«¯æ‰€åœ¨ç›®å½•ç”ŸæˆæŒ‡å®šçš„KeyStoreæ–‡ä»¶ã€‚å®Œæ•´çš„ç¤ºä¾‹å¦‚ä¸‹æ‰€ç¤º:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">$ keytool -genkey -v -keystore test.keystore -<span class="built_in">alias</span> <span class="built_in">test</span> -keyalg RSA -validity 365</div><div class="line">è¾“å…¥å¯†é’¥åº“å£ä»¤:  android</div><div class="line">å†æ¬¡è¾“å…¥æ–°å£ä»¤: android</div><div class="line">æ‚¨çš„åå­—ä¸å§“æ°æ˜¯ä»€ä¹ˆ?</div><div class="line">  [Unknown]:  Doublemine</div><div class="line">æ‚¨çš„ç»„ç»‡å•ä½åç§°æ˜¯ä»€ä¹ˆ?</div><div class="line">  [Unknown]:  Test</div><div class="line">æ‚¨çš„ç»„ç»‡åç§°æ˜¯ä»€ä¹ˆ?</div><div class="line">  [Unknown]:  Test</div><div class="line">æ‚¨æ‰€åœ¨çš„åŸå¸‚æˆ–åŒºåŸŸåç§°æ˜¯ä»€ä¹ˆ?</div><div class="line">  [Unknown]:  Test</div><div class="line">æ‚¨æ‰€åœ¨çš„çœ/å¸‚/è‡ªæ²»åŒºåç§°æ˜¯ä»€ä¹ˆ?</div><div class="line">  [Unknown]:  Test</div><div class="line">è¯¥å•ä½çš„åŒå­—æ¯å›½å®¶/åœ°åŒºä»£ç æ˜¯ä»€ä¹ˆ?</div><div class="line">  [Unknown]:  Test</div><div class="line">CN=Doublemine, OU=Test, O=Test, L=Test, ST=Test, C=Testæ˜¯å¦æ­£ç¡®?</div><div class="line">  [å¦]:  y</div><div class="line"></div><div class="line">æ­£åœ¨ä¸ºä»¥ä¸‹å¯¹è±¡ç”Ÿæˆ 2,048 ä½RSAå¯†é’¥å¯¹å’Œè‡ªç­¾åè¯ä¹¦ (SHA256withRSA) (æœ‰æ•ˆæœŸä¸º 365 å¤©):</div><div class="line">         CN=Doublemine, OU=Test, O=Test, L=Test, ST=Test, C=Test</div><div class="line">è¾“å…¥ &lt;<span class="built_in">test</span>&gt; çš„å¯†é’¥å£ä»¤</div><div class="line">        (å¦‚æœå’Œå¯†é’¥åº“å£ä»¤ç›¸åŒ, æŒ‰å›è½¦):</div><div class="line">[æ­£åœ¨å­˜å‚¨test.keystore]</div></pre></td></tr></table></figure>
<p>è¿™æ ·æˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ªå…¨æ–°çš„KeyStoreæ–‡ä»¶å¯ä»¥ç”¨äºAndroidçš„Appç­¾åï¼Œæœ‰äº†KeyStoreæ–‡ä»¶ä¸‹ä¸€æ­¥å½“ç„¶å°±æ˜¯è·å–æˆ‘ä»¬ç”Ÿæˆçš„KeyStoreæ–‡ä»¶çš„æŒ‡çº¹ä¿¡æ¯å’¯~</p>
<h4 id="è·å–KeyStoreæŒ‡çº¹ä¿¡æ¯"><a href="#è·å–KeyStoreæŒ‡çº¹ä¿¡æ¯" class="headerlink" title="è·å–KeyStoreæŒ‡çº¹ä¿¡æ¯"></a>è·å–KeyStoreæŒ‡çº¹ä¿¡æ¯</h4><p>ä¸è·å–é»˜è®¤çš„<code>debug.keystore</code>æ–‡ä»¶æŒ‡çº¹ä¿¡æ¯ç±»ä¼¼ï¼Œæˆ‘ä»¬åœ¨ç»ˆç«¯ä¸­é”®å…¥ä»¥ä¸‹å‘½ä»¤:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">keytool -v -list -keystore test.keystore -<span class="built_in">alias</span> <span class="built_in">test</span> -keypass android -storepass android</div></pre></td></tr></table></figure>
<p>å³å¯è·å–åˆ°æˆ‘ä»¬ç”Ÿæˆçš„KeyStoreæŒ‡çº¹ä¿¡æ¯ï¼Œæœ‰çš„åŒå­¦å·²ç»çœ‹å‡ºæ¥äº†ï¼Œåªè¦å°†ä¸Šè¿°å‘½ä»¤ä¸­çš„å‡ ä¸ªå‚æ•°æ›¿æ¢ä¸‹ï¼Œå³å¯æŸ¥çœ‹ä»»æ„KeyStoreçš„æŒ‡çº¹ä¿¡æ¯:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">keytool -v -list -keystore &#123;FILENAME.keystore&#125; -<span class="built_in">alias</span> &#123;ALIAS&#125; -keypass &#123;KEYPASSWD&#125; -storepass &#123;STOREPASSWD&#125;</div></pre></td></tr></table></figure>
<ul>
<li><code>{FILENAME.keystore}</code>ä¸ºkeystoreæ–‡ä»¶å</li>
<li><code>{ALIAS}</code>ä¸ºKeyStoreçš„åˆ«å</li>
<li><code>{KEYPASSWD}</code>ä¸ºKeyStoreçš„å¯†é’¥å£ä»¤</li>
<li><code>{STOREPASSWD}</code>ä¸ºKeyStoreçš„å¯†é’¥åº“å£ä»¤</li>
</ul>
<h3 id="åº”ç”¨KeyStore"><a href="#åº”ç”¨KeyStore" class="headerlink" title="åº”ç”¨KeyStore"></a>åº”ç”¨KeyStore</h3><p>å‰é¢æˆ‘ä»¬å¿™æ´»äº†å¤§åŠå¤©ç”Ÿæˆäº†KeyStoreæ–‡ä»¶ï¼Œå¹¶æŸ¥çœ‹å…¶æŒ‡çº¹ä¿¡æ¯ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬ä¸ä½¿ç”¨åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œæ¯•ç«Ÿè¿˜æ˜¯ä¸ä¼šå¯¹æˆ‘ä»¬çš„é¡¹ç›®ç”Ÿæ•ˆçš„~æˆ‘ä»¬è¿˜éœ€è¦åœ¨Gradleè„šæœ¬ä¸­å¯¹å…¶è¿›è¡Œé…ç½®ï¼Œæˆ‘ä»¬çš„é¡¹ç›®æ‰ä¼šåº”ç”¨å…¶KeyStoreæ–‡ä»¶ã€‚</p>
<p>å…¶ä¸­æˆ‘ä»¬æœ‰ä¸¤ç§è¾ƒä¸ºæ™®éçš„æ–¹å¼åœ¨é¡¹ç›®ä¸­é…ç½®æˆ‘ä»¬çš„KeyStoreæ–‡ä»¶ï¼Œç¬¬ä¸€ç§æ¯”è¾ƒç®€å•ç²—æš´ï¼Œç›´æ¥åœ¨gradleæ„å»ºè„šæœ¬ä¸­å†™å…¥KeyStoreä¿¡æ¯,ç¬¬äºŒç§åˆ™å°†KeyStoreä¿¡æ¯é…ç½®åœ¨ä¸€ä¸ªå•ç‹¬çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œåœ¨gradleæ„å»ºæ—¶åŠ¨æ€è¯»å–ã€‚</p>
<h4 id="ç­¾åä¿¡æ¯å†™å…¥Gradleè„šæœ¬"><a href="#ç­¾åä¿¡æ¯å†™å…¥Gradleè„šæœ¬" class="headerlink" title="ç­¾åä¿¡æ¯å†™å…¥Gradleè„šæœ¬"></a>ç­¾åä¿¡æ¯å†™å…¥Gradleè„šæœ¬</h4><p>åœ¨Android Stduioä¸­æ‰“å¼€ä¸»moudleçš„<code>build.gradle</code>æ–‡ä»¶,åœ¨å…¶ä¸­çš„<code>android</code>é—­åŒ…ä¸­é”®å…¥å¦‚ä¸‹å†…å®¹:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">signingConfigs &#123;</div><div class="line">    release &#123;</div><div class="line">      keyAlias <span class="string">'test'</span></div><div class="line">      keyPassword <span class="string">'android'</span></div><div class="line">      storeFile <span class="keyword">file</span>(<span class="string">'./keystore/test.keystore'</span>)</div><div class="line">      storePassword <span class="string">'android'</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>å…¶ä¸­å£°æ˜çš„releaseé—­åŒ…ä¸­åŒ…å«äº†<code>keyAlias</code>ã€<code>keyPassword</code>ã€<code>storeFile</code>ã€<code>storePassword</code>å››ä¸ªPropertyã€‚å…¶ä¸­å«ä¹‰åˆ†åˆ«ä¸º:</p>
<ul>
<li><code>keyAlias</code> keystoreçš„<code>alias</code></li>
<li><code>keyPassword</code> KeyStoreçš„å¯†é’¥å£ä»¤</li>
<li><code>storeFile</code>ä¸ºKeyStoreçš„æ–‡ä»¶å­˜æ”¾è·¯å¾„ï¼Œå¯ä»¥ä¸ºç›¸å¯¹æˆ–è€…ç»å¯¹è·¯å¾„ï¼Œæ­¤å¤„ä½¿ç”¨çš„ä¸ºç›¸å¯¹è·¯å¾„</li>
<li><code>storePassword</code>ä¸ºKeyStoreçš„å¯†é’¥åº“å£ä»¤</li>
</ul>
<p>ä»¥ä¸Šçš„Gradle DSLå°†ä¼šä½œç”¨äºæˆ‘ä»¬çš„é¡¹ç›®çš„Releaseç‰ˆæœ¬ï¼Œå½“æˆ‘ä»¬åœ¨ç»ˆç«¯ä¸­ä¸ªè¾“å…¥:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gradlew assembleRelease</div></pre></td></tr></table></figure>
<p>é¡¹ç›®å°†ä¼šä½¿ç”¨æˆ‘ä»¬ä¸Šé¢å®šä¹‰çš„<code>test.keystore</code>å¯†é’¥åº“æ–‡ä»¶ç­¾åæ‰“åŒ…é¡¹ç›®ä¸ºReleaseå‘å¸ƒç‰ˆã€‚</p>
<p>åŒæ ·ï¼Œå¦‚æœæˆ‘ä»¬ä¸æƒ³ä½¿ç”¨é»˜è®¤çš„<code>debug.keystore</code>ç­¾åé¡¹ç›®çš„Debugç‰ˆæœ¬ï¼Œæˆ‘ä»¬äº¦å¯ä»¥é‡æ–°ç”Ÿæˆä¸€ä¸ªKeyStoreæ–‡ä»¶æˆ–è€…ä½¿ç”¨Releaseç‰ˆæœ¬çš„ç­¾åè¯¥æ–‡ä»¶ï¼Œæ”¾å…¥debugé—­åŒ…ä¸­å³å¯:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">signingConfigs &#123;</div><div class="line">    release &#123;</div><div class="line">      keyAlias <span class="string">'test'</span></div><div class="line">      keyPassword <span class="string">'android'</span></div><div class="line">      storeFile <span class="keyword">file</span>(<span class="string">'./keystore/test.keystore'</span>)</div><div class="line">      storePassword <span class="string">'android'</span></div><div class="line">    &#125;</div><div class="line">    debug &#123;</div><div class="line">     keyAlias <span class="string">'test'</span></div><div class="line">      keyPassword <span class="string">'android'</span></div><div class="line">      storeFile <span class="keyword">file</span>(<span class="string">'./keystore/test.keystore'</span>)</div><div class="line">      storePassword <span class="string">'android'</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<h4 id="ç­¾åä¿¡æ¯å†™å…¥é…ç½®æ–‡ä»¶"><a href="#ç­¾åä¿¡æ¯å†™å…¥é…ç½®æ–‡ä»¶" class="headerlink" title="ç­¾åä¿¡æ¯å†™å…¥é…ç½®æ–‡ä»¶"></a>ç­¾åä¿¡æ¯å†™å…¥é…ç½®æ–‡ä»¶</h4><p>ç»†å¿ƒçš„åŒå­¦å¯èƒ½å‘ç°äº†ï¼Œè™½ç„¶ä¸Šé¢çš„æŠŠç­¾åä¿¡æ¯å†™å…¥gradleè„šæœ¬ä¸­æ¯”è¾ƒæ–¹ä¾¿çœäº‹ï¼Œä½†æ˜¯å´åœ¨å¯†é’¥æ–‡ä»¶çš„å¯†é’¥å¯†ç æ³„éœ²é—®é¢˜ï¼Œä»»ä½•èƒ½å¤Ÿçœ‹åˆ°æ­¤Moudleçš„build.gradleè„šæœ¬çš„äººéƒ½å¯ä»¥æ‹¿åˆ°KeyStoreæ–‡ä»¶åŠå…¶å¯¹åº”çš„å¯†é’¥å£ä»¤ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸€äº›å®‰å…¨é£é™©ã€‚å› æ­¤åœ¨ä¸€äº›å¼€æºé¡¹ç›®æˆ–è€…æ¯”è¾ƒæ•æ„Ÿçš„é¡¹ç›®ä¸­ï¼Œå¯èƒ½ä¼šå­˜åœ¨ç±»ä¼¼çš„gradleé…ç½®:</p>
<p>åœ¨ä¸»moudleçš„build.gradleè„šæœ¬çš„androidé—­åŒ…ä¸­:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">applicationVariants.all &#123;  </div><div class="line">    <span class="keyword">if</span> (<span class="keyword">project</span>.hasProperty(<span class="string">'keyAlias'</span>) &amp;&amp; <span class="keyword">project</span>.hasProperty(<span class="string">'storeFile'</span>) &amp;&amp;</div><div class="line">    <span class="keyword">project</span>.hasProperty(<span class="string">'storePassword'</span>) &amp;&amp;</div><div class="line">    <span class="keyword">project</span>.hasProperty(<span class="string">'keyPassword'</span>)) &#123;</div><div class="line">  android.signingConfigs.release.keyAlias = keyAlias</div><div class="line">  android.signingConfigs.release.storeFile = <span class="keyword">file</span>(storeFile)</div><div class="line">  android.signingConfigs.release.storePassword = storePassword</div><div class="line">  android.signingConfigs.release.keyPassword = keyPassword</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">  android.buildTypes.release.signingConfig = <span class="keyword">null</span></div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å…¶ä¸­<code>Variants</code>ç¿»è¯‘ä¸­æ–‡ä¸º<code>å˜ç§</code>,<code>applicationVariants.all</code>å±æ€§å«ä¹‰ä¸º<code>app plugin</code>ä¸‹æ‰€æœ‰çš„<code>Variant</code>çš„é…ç½®ä¿¡æ¯ï¼Œå¯ä»¥å°†å…¶çœ‹ä½œä¸ºä¸€ä¸ªæ€»è§ˆï¼Œå¯ä»¥æ–¹ä¾¿çš„è®¿é—®æ‰€æœ‰å¯¹è±¡ã€‚<br><a href="http://tools.android.com/tech-docs/new-build-system/user-guide" target="_blank" rel="external">ç›¸å…³å»¶ä¼¸é˜…è¯»Gradle Plugin User Guide</a>ï¼Œæˆ‘ä»¬åœ¨å…¶ä¸­é€šè¿‡<code>project.hasProperty</code>è¯»å–é¡¹ç›®ä¸­çš„é…ç½®ï¼Œå¹¶å°†å…¶åŠ¨æ€çš„èµ‹å€¼ç»™<code>signingConfigs.release</code>ä¸‹çš„ç›¸å…³å±æ€§ã€‚</p>
<p>ç„¶åæˆ‘ä»¬é€šè¿‡åœ¨<code>gradle.properties</code>æˆ–è€…å…¶å®ƒé¡¹ç›®ä¸­èƒ½å¤Ÿè¢«gradleçš„æ–‡ä»¶ä¸­å®šä¹‰ä»¥ä¸Šå±æ€§å¹¶èµ‹å€¼å³å¯ï¼š</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">storeFile=.<span class="regexp">/keystore/</span>test.keystore</div><div class="line">storePassword=android</div><div class="line">keyAlias=test</div><div class="line">keyPassword=android</div></pre></td></tr></table></figure>
<p>è¿™æ ·æˆ‘ä»¬åœ¨é¡¹ç›®å›¢é˜Ÿåä½œæ—¶ï¼Œå°†<code>gradle.properties</code>æ–‡ä»¶å¿½ç•¥å³å¯ã€‚</p>
<p>Enjoy IT!</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Androidåº”ç”¨å¼€å‘çš„æ—¶å€™ä¼šç»å¸¸ä½¿ç”¨åˆ°ç¬¬ä¸‰æ–¹SDKï¼Œä¾‹å¦‚åœ°å›¾ã€æ¨é€ã€æ”¯ä»˜ä»¥åŠåˆ†äº«ç­‰ã€‚è€Œè¿™äº›ç¬¬ä¸‰æ–¹æœåŠ¡SDKä¸ºäº†åº”ç”¨ä¸è¢«æ»¥ç”¨éƒ½ä¼šæœ‰ç­¾åéªŒè¯æœºåˆ¶ã€‚æˆ‘ä»¬é€šè¿‡ä¸Šä¼ Androidåº”ç”¨çš„ç­¾åæ¥åœ¨æœåŠ¡ç«¯é…ç½®ä»¥éªŒè¯åº”ç”¨çš„åˆæ³•æ€§ã€‚æœ¬æ–‡å°†è®²è¿°ä¸‹åœ¨Android Stduioä¸­å¸¸ç”¨çš„ç­¾åæ“ä½œã€‚&lt;/p&gt;
&lt;h3 id=&quot;é»˜è®¤KeyStore&quot;&gt;&lt;a href=&quot;#é»˜è®¤KeyStore&quot; class=&quot;headerlink&quot; title=&quot;é»˜è®¤KeyStore&quot;&gt;&lt;/a&gt;é»˜è®¤KeyStore&lt;/h3&gt;&lt;h4 id=&quot;é»˜è®¤KeyStoreå­˜å‚¨è·¯å¾„&quot;&gt;&lt;a href=&quot;#é»˜è®¤KeyStoreå­˜å‚¨è·¯å¾„&quot; class=&quot;headerlink&quot; title=&quot;é»˜è®¤KeyStoreå­˜å‚¨è·¯å¾„&quot;&gt;&lt;/a&gt;é»˜è®¤KeyStoreå­˜å‚¨è·¯å¾„&lt;/h4&gt;&lt;p&gt;åœ¨Android Stduioä¸­ç³»ç»Ÿé»˜è®¤å†…ç½®äº†ä¸€ä¸ªç­¾åæ–‡ä»¶&lt;code&gt;debug.keystore&lt;/code&gt;ï¼Œç”¨äºæˆ‘ä»¬åœ¨debugä¸‹çš„é»˜è®¤Appç­¾åã€‚å¦‚æœæ²¡æœ‰åœ¨Gradleæ–‡ä»¶ä¸­ç‰¹æ®ŠæŒ‡å®šï¼Œé‚£ä¹ˆAndroid Studioå°†è‡ªåŠ¨ä½¿ç”¨é»˜è®¤çš„&lt;code&gt;debug.keystore&lt;/code&gt;æ–‡ä»¶ä¸ºé¡¹ç›®Appç”ŸæˆDebugç‰ˆæœ¬çš„ç­¾åã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Android" scheme="https://notes.wanghao.work/categories/Android/"/>
    
    
      <category term="Android" scheme="https://notes.wanghao.work/tags/Android/"/>
    
      <category term="Android Studio" scheme="https://notes.wanghao.work/tags/Android-Studio/"/>
    
      <category term="KeyStore" scheme="https://notes.wanghao.work/tags/KeyStore/"/>
    
  </entry>
  
  <entry>
    <title>RxJavaã€Retrofitæ¥æ”¶Error Response Body</title>
    <link href="https://notes.wanghao.work/2016-07-02-RxJava%E9%85%8D%E5%90%88Retofit%E6%8E%A5%E6%94%B6%E9%94%99%E8%AF%AFbody.html"/>
    <id>https://notes.wanghao.work/2016-07-02-RxJavaé…åˆRetofitæ¥æ”¶é”™è¯¯body.html</id>
    <published>2016-07-02T14:10:53.000Z</published>
    <updated>2016-11-06T01:31:11.000Z</updated>
    
    <content type="html"><![CDATA[<p><code>RxJava</code>é…åˆ<code>Retrofit</code>èƒ½å¤Ÿå¤§å¤§ç®€åŒ–Androidé¡¹ç›®ä¸­çš„ç½‘ç»œè¯·æ±‚ä»£ç é‡ï¼Œä½¿å¾—é€»è¾‘æ›´æ¸…æ™°ï¼Œå½“ç„¶ä¹Ÿå¯èƒ½ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ã€‚ä¸‹é¢ç»™å‡ºä¸€ç§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h3><p>ä¸€ä¸ªåŸºæœ¬çš„RxJavaé…åˆRetrofitä»¥åŠLambdaçš„ç½‘ç»œè°ƒç”¨çœ‹èµ·æ¥åƒè¿™ä¸ªæ ·å­çš„:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Subscription subscription = mApi.getSimpleApi()</div><div class="line">       .subscribeOn(Schedulers.io())</div><div class="line">       .observeOn(AndroidSchedulers.mainThread())</div><div class="line">       .subscribe(response -&gt; &#123;</div><div class="line"></div><div class="line">        <span class="comment">//do Something</span></div><div class="line"></div><div class="line">       &#125;, throwable -&gt; &#123;</div><div class="line"></div><div class="line">       <span class="comment">//Ops Error</span></div><div class="line"></div><div class="line">       &#125;);</div></pre></td></tr></table></figure>
<p>å½“<code>Retrofit</code>ä¸­çš„ç½‘ç»œè¯·æ±‚è¿”å›ç çŠ¶æ€ç ä¸º<code>200</code>æ—¶ï¼Œæ‰§è¡Œ<code>do Something</code>ä¸­çš„é€»è¾‘å¤„ç†æ­£å¸¸çš„<br>ä¸šåŠ¡æµç¨‹ï¼Œä½†æ˜¯å½“æœåŠ¡å™¨è¿”å›çŠ¶æ€ç ä¸º<code>é200</code>æ—¶ï¼Œå°†ä¼šæ‰§è¡Œ<code>Ops Error</code>ä¸­çš„ä¸šåŠ¡æµç¨‹è€Œä¸ä¼š<br>æ‰§è¡Œ<code>do Something</code>ä¸­çš„ä¸šåŠ¡é€»è¾‘ã€‚</p>
<a id="more"></a>
<p>è¿™æ ·æœ¬æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¼šåœ¨é”™è¯¯å¤„ç†é€»è¾‘ä¸­åœ¨UIä¸­ç»™å‡ºé”™è¯¯æç¤ºï¼Œåƒè¿™æ ·:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Log.e(<span class="string">"Ops"</span>, <span class="string">"Error:"</span> + throwable.getMessage());</div></pre></td></tr></table></figure>
<p>ä½†æ˜¯è¿™æ ·çš„è¯æˆ‘ä»¬åªèƒ½è·å–åˆ°ä¸€æœåŠ¡å™¨çš„é”™è¯¯å“åº”ç ä»¥åŠå¯¹åº”çš„ç®€çŸ­çš„å“åº”ç é”™è¯¯è¯´æ˜ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬æœåŠ¡å™¨<br>éƒ½ä¼šåŒ…è£…é”™è¯¯ä¿¡æ¯ä¸ºä¸€ä¸ªJSONï¼Œå®¢æˆ·ç«¯è§£æé”™è¯¯ä¿¡æ¯å¿…è¦çš„æ—¶å€™åŠ¨æ€å±•ç¤ºåœ¨UIä¸Šä»¥æç¤ºç”¨æˆ·ã€‚å¦‚æœæˆ‘ä»¬è¦æ‹¿åˆ°è¿™æ ·çš„JSONï¼Œä½¿ç”¨<code>throwable.getMessage()</code>è¿™æ ·åšæ˜¾ç„¶æ˜¯ä¸è¡Œçš„ã€‚æ˜¯ä¸æ˜¯ä½¿ç”¨RxJavaé…åˆRetrofitåªèƒ½æ‹¿åˆ°è¿™æ ·çš„é”™è¯¯Throwableä¿¡æ¯å‘¢ï¼Ÿ</p>
<p>æ˜¾ç„¶ä¸æ˜¯çš„ï¼Œå…¶å®æœåŠ¡å™¨è¿”å›çš„é”™è¯¯ä¿¡æ¯<code>é200</code>å“åº”ç çš„<code>Response Body</code>JSONå¯¹è±¡åŒ…å«åœ¨è¿™ä¸ª<code>throwable</code>å¯¹è±¡ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å°†å…¶è§£æå‡ºæ¥:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">throwable -&gt; &#123;</div><div class="line">          <span class="keyword">if</span>(throwable <span class="keyword">instanceof</span> HttpException)&#123;</div><div class="line">            HttpException httpException= (HttpException) throwable;</div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">              String errorBody= httpException.response().errorBody().string();</div><div class="line"></div><div class="line">		<span class="comment">//<span class="doctag">TODO:</span> parse To JSON Obj</span></div><div class="line"></div><div class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">              e.printStackTrace();</div><div class="line">            &#125;</div><div class="line">          &#125;</div><div class="line">	 <span class="comment">//Ops Print throwable</span></div><div class="line"></div><div class="line">        &#125;);</div></pre></td></tr></table></figure>
<p>åœ¨<code>Parse to JSON Obj</code>ä¸­å°†<code>errorBody</code>è§£æä¸ºJSONå¯¹è±¡è¿›è¡Œç›¸åº”çš„å¤„ç†å³å¯ã€‚</p>
<p>ç„¶è€Œï¼Œä½ ä¸èƒ½è®©æˆ‘æ¯ä¸ªåœ°æ–¹éƒ½åŠ ä¸Šè¿™æ ·çš„ä¸€æ®µä»£ç å§ï¼Œæ—¢ç„¶æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯<code>RxJava</code>ï¼Œæˆ‘ä»¬å¯ä»¥è®©è¿™ç§å¤„ç†ç¨å¾®çœ‹èµ·æ¥ä¼˜é›…ç‚¹ã€‚ä»¥ä¸‹ä»¥<code>Jackson</code>ä¸ºä¾‹:</p>
<h4 id="è‡ªå®šä¹‰Action1"><a href="#è‡ªå®šä¹‰Action1" class="headerlink" title="è‡ªå®šä¹‰Action1"></a>è‡ªå®šä¹‰Action1</h4><p>ç”±äº<code>RxJava</code>çš„é”™è¯¯å¼‚å¸¸å¤„ç†æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå¹¶ä¸”æ²¡æœ‰è¿”å›å€¼ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ª<code>Action1</code>æ¥æ›¿ä»£é»˜è®¤çš„Error Action:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">ErrorAction</span> <span class="keyword">implements</span> <span class="title">Action1</span>&lt;<span class="title">Throwable</span>&gt; </span>&#123;</div><div class="line"></div><div class="line">  <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Throwable throwable)</span> </span>&#123;</div><div class="line">    call(ErrorMessage.handle(throwable));</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(ErrorMessage error)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å…¶ä¸­<code>ErrorMessage</code>ä¸ºæˆ‘ä»¬å®šä¹‰å¥½çš„é”™è¯¯æ¶ˆæ¯Model:</p>
<h4 id="å®šä¹‰Throwable-Handle"><a href="#å®šä¹‰Throwable-Handle" class="headerlink" title="å®šä¹‰Throwable Handle"></a>å®šä¹‰Throwable Handle</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@JsonIgnoreProperties</span>(ignoreUnknown = <span class="keyword">true</span>) <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResponseError</span> </span>&#123;</div><div class="line">  <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> ERROR_CODE_IO_ERROR = <span class="number">2072</span>;</div><div class="line">  <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> ERROR_CODE_UN_KNOW = <span class="number">2073</span>;</div><div class="line">  <span class="meta">@JsonProperty</span>(<span class="string">"status_code"</span>) <span class="keyword">public</span> <span class="keyword">int</span> statusCode;</div><div class="line">  <span class="keyword">public</span> String message;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStatusCode</span><span class="params">(<span class="keyword">int</span> statusCode)</span> </span>&#123;</div><div class="line">    <span class="keyword">this</span>.statusCode = statusCode;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMessage</span><span class="params">(String message)</span> </span>&#123;</div><div class="line">    <span class="keyword">this</span>.message = message;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ResponseError <span class="title">handle</span><span class="params">(Throwable throwable)</span> </span>&#123;</div><div class="line">    ResponseError responseError = <span class="keyword">null</span>;</div><div class="line">    <span class="keyword">if</span> (throwable <span class="keyword">instanceof</span> HttpException) &#123;</div><div class="line">      HttpException exception = (HttpException) throwable;</div><div class="line">      <span class="keyword">try</span> &#123;</div><div class="line">        responseError = <span class="keyword">new</span> ObjectMapper().readValue(exception.response().errorBody().string(),</div><div class="line">            ResponseError.class);</div><div class="line">      &#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">        responseError = <span class="keyword">new</span> ResponseError();</div><div class="line">        responseError.setMessage(e.getLocalizedMessage());</div><div class="line">        responseError.setStatusCode(ERROR_CODE_IO_ERROR);</div><div class="line">      &#125;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      responseError = <span class="keyword">new</span> ResponseError();</div><div class="line">      responseError.setMessage(throwable.getMessage());</div><div class="line">      responseError.setStatusCode(ERROR_CODE_UN_KNOW);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> responseError;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†ä¸€ä¸ªè‡ªå®šä¹‰<code>Action1</code>äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¾¿å¯ä»¥è¿™æ ·ä½¿ç”¨äº†:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Subscription subscription = mApi.getSimpleApi()</div><div class="line">        .subscribeOn(Schedulers.io())</div><div class="line">        .observeOn(AndroidSchedulers.mainThread())</div><div class="line">        .subscribe(response -&gt; &#123;</div><div class="line"></div><div class="line">         <span class="comment">//do Something</span></div><div class="line"></div><div class="line">        &#125;,  <span class="keyword">new</span> ErrorAction() &#123;</div><div class="line">              <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(ErrorMessage msg)</span> </span>&#123;</div><div class="line">			<span class="comment">//Do Error               </span></div><div class="line"></div><div class="line">              &#125;</div><div class="line">            &#125;);</div></pre></td></tr></table></figure>
<p>å…¶ä¸­åœ¨<code>Do Error</code>ä¸­æ‹¿åˆ°<code>ErrorMessage</code>å¯¹è±¡ï¼Œè¿›è¡Œç›¸åº”çš„å¯¹è±¡æ“ä½œå³å¯~</p>
<p>Enjoy IT!</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;code&gt;RxJava&lt;/code&gt;é…åˆ&lt;code&gt;Retrofit&lt;/code&gt;èƒ½å¤Ÿå¤§å¤§ç®€åŒ–Androidé¡¹ç›®ä¸­çš„ç½‘ç»œè¯·æ±‚ä»£ç é‡ï¼Œä½¿å¾—é€»è¾‘æ›´æ¸…æ™°ï¼Œå½“ç„¶ä¹Ÿå¯èƒ½ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ã€‚ä¸‹é¢ç»™å‡ºä¸€ç§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h3 id=&quot;éœ€æ±‚&quot;&gt;&lt;a href=&quot;#éœ€æ±‚&quot; class=&quot;headerlink&quot; title=&quot;éœ€æ±‚&quot;&gt;&lt;/a&gt;éœ€æ±‚&lt;/h3&gt;&lt;p&gt;ä¸€ä¸ªåŸºæœ¬çš„RxJavaé…åˆRetrofitä»¥åŠLambdaçš„ç½‘ç»œè°ƒç”¨çœ‹èµ·æ¥åƒè¿™ä¸ªæ ·å­çš„:&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Subscription subscription = mApi.getSimpleApi()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       .subscribeOn(Schedulers.io())&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       .observeOn(AndroidSchedulers.mainThread())&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       .subscribe(response -&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//do Something&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       &amp;#125;, throwable -&amp;gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       &lt;span class=&quot;comment&quot;&gt;//Ops Error&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       &amp;#125;);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å½“&lt;code&gt;Retrofit&lt;/code&gt;ä¸­çš„ç½‘ç»œè¯·æ±‚è¿”å›ç çŠ¶æ€ç ä¸º&lt;code&gt;200&lt;/code&gt;æ—¶ï¼Œæ‰§è¡Œ&lt;code&gt;do Something&lt;/code&gt;ä¸­çš„é€»è¾‘å¤„ç†æ­£å¸¸çš„&lt;br&gt;ä¸šåŠ¡æµç¨‹ï¼Œä½†æ˜¯å½“æœåŠ¡å™¨è¿”å›çŠ¶æ€ç ä¸º&lt;code&gt;é200&lt;/code&gt;æ—¶ï¼Œå°†ä¼šæ‰§è¡Œ&lt;code&gt;Ops Error&lt;/code&gt;ä¸­çš„ä¸šåŠ¡æµç¨‹è€Œä¸ä¼š&lt;br&gt;æ‰§è¡Œ&lt;code&gt;do Something&lt;/code&gt;ä¸­çš„ä¸šåŠ¡é€»è¾‘ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Android" scheme="https://notes.wanghao.work/categories/Android/"/>
    
    
      <category term="Android" scheme="https://notes.wanghao.work/tags/Android/"/>
    
      <category term="Android Studio" scheme="https://notes.wanghao.work/tags/Android-Studio/"/>
    
      <category term="RxJava" scheme="https://notes.wanghao.work/tags/RxJava/"/>
    
      <category term="Retrofit" scheme="https://notes.wanghao.work/tags/Retrofit/"/>
    
  </entry>
  
  <entry>
    <title>ä¸ºNexTä¸»é¢˜æ·»åŠ æ–‡ç« é˜…è¯»é‡ç»Ÿè®¡åŠŸèƒ½</title>
    <link href="https://notes.wanghao.work/2015-10-21-%E4%B8%BANexT%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E6%96%87%E7%AB%A0%E9%98%85%E8%AF%BB%E9%87%8F%E7%BB%9F%E8%AE%A1%E5%8A%9F%E8%83%BD.html"/>
    <id>https://notes.wanghao.work/2015-10-21-ä¸ºNexTä¸»é¢˜æ·»åŠ æ–‡ç« é˜…è¯»é‡ç»Ÿè®¡åŠŸèƒ½.html</id>
    <published>2015-10-21T13:57:00.000Z</published>
    <updated>2017-06-14T15:28:50.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><hr>
<p>ç”±äºæœ€è¿‘åœ¨æŠ˜è…¾Androidé¡¹ç›®ï¼Œéœ€è¦ç”¨åˆ°ä¸€äº›ä¸æœåŠ¡å™¨äº¤äº’ã€ä»¥åŠæ•°æ®å­˜å‚¨çš„ç›¸å…³åŠŸèƒ½ï¼Œç„¶åå‘ç°äº†<a href="https://leancloud.cn" target="_blank" rel="external">LeanCloud</a>è¿™å®¶æœåŠ¡æä¾›å•†,ä½¿ç”¨ä¸‹æ¥è¿˜æ„Ÿè§‰è¿˜æŒºé è°±çš„(è¯·ç»™æˆ‘å¹¿å‘Šè´¹)ã€‚æ­£å¥½å‘ç°ä»–ä»¬æœåŠ¡æä¾›äº†<a href="https://leancloud.cn/docs/js_guide.html" target="_blank" rel="external">JavaScript SDK</a>ï¼Œäºæ˜¯å°±æƒ³ç€å°è¯•ç€å®ç°Hexoåšå®¢æ–‡ç« çš„æµè§ˆæ•°ç»Ÿè®¡åŠŸèƒ½ï¼Œä¹‹å‰è™½ç„¶åœ¨ä½¿ç”¨ä¸è’œå­ï¼Œä½†æ˜¯ä¸è’œå­ä¸èƒ½å¤Ÿåœ¨ä¸»é¡µå±•ç¤ºæ–‡ç« é˜…è¯»é‡å•Šï¼å¯¹äºåšä¸»è¿™ç§æœ‰å¼ºè¿«ç—‡åˆæƒ³è£…Xçš„äººæ¥è¯´æœæ–­ä¸èƒ½å¿å•Šï¼</p>
<h3 id="ä¿®æ”¹NexTä¸»é¢˜æ¨¡ç‰ˆ"><a href="#ä¿®æ”¹NexTä¸»é¢˜æ¨¡ç‰ˆ" class="headerlink" title="ä¿®æ”¹NexTä¸»é¢˜æ¨¡ç‰ˆ"></a><del>ä¿®æ”¹NexTä¸»é¢˜æ¨¡ç‰ˆ</del></h3><p><del>æœ¬æ–¹æ³•ç†è®ºä¸Šå¯¹Hexoåšå®¢é€šç”¨ï¼Œç”±äºåšä¸»ä½¿ç”¨çš„æ˜¯NexTä¸»é¢˜ï¼Œæ‰€ä»¥å½“ç„¶é’ˆå¯¹NexTæ¥è¯´å’¯ã€‚</del><strong><font color="red">NexTä¸»é¢˜ç›®å‰å·²ç»åˆå¹¶è¿™ä¸ªFeatureï¼Œå› æ­¤å¦‚æœä½ ä½¿ç”¨çš„æ˜¯NexTä¸»é¢˜ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ä¸ç”¨ä¿®æ”¹ä¸»é¢˜æ¨¡ç‰ˆè€Œç›´æ¥åœ¨<code>_config.yml</code>ä¸­é…ç½®å³å¯ï¼Œè¯·ç›´æ¥è·³è½¬æŸ¥çœ‹<a href="#%E9%85%8D%E7%BD%AELeanCloud">é…ç½®LeanCloud</a></font></strong></p>
<a id="more"></a>
<h4 id="ä¿®æ”¹-config-ymlæ–‡ä»¶"><a href="#ä¿®æ”¹-config-ymlæ–‡ä»¶" class="headerlink" title="ä¿®æ”¹_config.ymlæ–‡ä»¶"></a><del>ä¿®æ”¹<code>_config.yml</code>æ–‡ä»¶</del></h4><p><del>æ‰“å¼€NexTä¸»é¢˜çš„æ ¹ç›®å½•ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ï¼Œåœ¨ä»»æ„ä½ç½®æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</del></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">leancloud_visitors:</div><div class="line">  enable: <span class="literal">true</span></div><div class="line">  app_id: #&lt;AppID&gt;</div><div class="line">  app_key: #&lt;AppKEY&gt;</div></pre></td></tr></table></figure>
<h4 id="æ·»åŠ lean-analytics-swigæ–‡ä»¶"><a href="#æ·»åŠ lean-analytics-swigæ–‡ä»¶" class="headerlink" title="æ·»åŠ lean-analytics.swigæ–‡ä»¶"></a><del>æ·»åŠ <code>lean-analytics.swig</code>æ–‡ä»¶</del></h4><p><del>åœ¨ä¸»é¢˜çš„<code>layout\_scripts</code>è·¯å¾„ä¸‹ï¼Œæ–°å»ºä¸€ä¸ª<code>lean-analytics.swig</code>æ–‡ä»¶ï¼Œå¹¶å‘é‡Œé¢æ·»åŠ ä»¥ä¸‹å†…å®¹</del></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div></pre></td><td class="code"><pre><div class="line">&lt;!-- custom analytics part create by xiamo --&gt;</div><div class="line">&lt;script src=<span class="string">"https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div><div class="line">&lt;script&gt;AV.initialize(<span class="string">"&#123;&#123;theme.leancloud_visitors.app_id&#125;&#125;"</span>, <span class="string">"&#123;&#123;theme.leancloud_visitors.app_key&#125;&#125;"</span>);<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div><div class="line">&lt;script&gt;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">showTime</span>(<span class="params">Counter</span>) </span>&#123;</div><div class="line">	<span class="keyword">var</span> query = <span class="keyword">new</span> AV.Query(Counter);</div><div class="line">	$(<span class="string">".leancloud_visitors"</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="keyword">var</span> url = $(<span class="keyword">this</span>).attr(<span class="string">"id"</span>).trim();</div><div class="line">		query.equalTo(<span class="string">"url"</span>, url);</div><div class="line">		query.find(&#123;</div><div class="line">			success: <span class="function"><span class="keyword">function</span>(<span class="params">results</span>) </span>&#123;</div><div class="line">				<span class="keyword">if</span> (results.length == <span class="number">0</span>) &#123;</div><div class="line">					<span class="keyword">var</span> content = $(<span class="built_in">document</span>.getElementById(url)).text() + <span class="string">': 0'</span>;</div><div class="line">					$(<span class="built_in">document</span>.getElementById(url)).text(content);</div><div class="line">					<span class="keyword">return</span>;</div><div class="line">				&#125;</div><div class="line">				<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; results.length; i++) &#123;</div><div class="line">					<span class="keyword">var</span> object = results[i];</div><div class="line">					<span class="keyword">var</span> content = $(<span class="built_in">document</span>.getElementById(url)).text() + <span class="string">': '</span> + object.get(<span class="string">'time'</span>);</div><div class="line">					$(<span class="built_in">document</span>.getElementById(url)).text(content);</div><div class="line">				&#125;</div><div class="line">			&#125;,</div><div class="line">			error: <span class="function"><span class="keyword">function</span>(<span class="params">object, error</span>) </span>&#123;</div><div class="line">				<span class="built_in">console</span>.log(<span class="string">"Error: "</span> + error.code + <span class="string">" "</span> + error.message);</div><div class="line">			&#125;</div><div class="line">		&#125;);</div><div class="line"></div><div class="line">	&#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">addCount</span>(<span class="params">Counter</span>) </span>&#123;</div><div class="line">	<span class="keyword">var</span> Counter = AV.Object.extend(<span class="string">"Counter"</span>);</div><div class="line">	url = $(<span class="string">".leancloud_visitors"</span>).attr(<span class="string">'id'</span>).trim();</div><div class="line">	title = $(<span class="string">".leancloud_visitors"</span>).attr(<span class="string">'data-flag-title'</span>).trim();</div><div class="line">	<span class="keyword">var</span> query = <span class="keyword">new</span> AV.Query(Counter);</div><div class="line">	query.equalTo(<span class="string">"url"</span>, url);</div><div class="line">	query.find(&#123;</div><div class="line">		success: <span class="function"><span class="keyword">function</span>(<span class="params">results</span>) </span>&#123;</div><div class="line">			<span class="keyword">if</span> (results.length &gt; <span class="number">0</span>) &#123;</div><div class="line">				<span class="keyword">var</span> counter = results[<span class="number">0</span>];</div><div class="line">				counter.fetchWhenSave(<span class="literal">true</span>);</div><div class="line">				counter.increment(<span class="string">"time"</span>);</div><div class="line">				counter.save(<span class="literal">null</span>, &#123;</div><div class="line">					success: <span class="function"><span class="keyword">function</span>(<span class="params">counter</span>) </span>&#123;</div><div class="line">						<span class="keyword">var</span> content = $(<span class="built_in">document</span>.getElementById(url)).text() + <span class="string">': '</span> + counter.get(<span class="string">'time'</span>);</div><div class="line">						$(<span class="built_in">document</span>.getElementById(url)).text(content);</div><div class="line">					&#125;,</div><div class="line">					error: <span class="function"><span class="keyword">function</span>(<span class="params">counter, error</span>) </span>&#123;</div><div class="line">						<span class="built_in">console</span>.log(<span class="string">'Failed to save Visitor num, with error message: '</span> + error.message);</div><div class="line">					&#125;</div><div class="line">				&#125;);</div><div class="line">			&#125; <span class="keyword">else</span> &#123;</div><div class="line">				<span class="keyword">var</span> newcounter = <span class="keyword">new</span> Counter();</div><div class="line">				newcounter.set(<span class="string">"title"</span>, title);</div><div class="line">				newcounter.set(<span class="string">"url"</span>, url);</div><div class="line">				newcounter.set(<span class="string">"time"</span>, <span class="number">1</span>);</div><div class="line">				newcounter.save(<span class="literal">null</span>, &#123;</div><div class="line">					success: <span class="function"><span class="keyword">function</span>(<span class="params">newcounter</span>) </span>&#123;</div><div class="line">					    <span class="built_in">console</span>.log(<span class="string">"newcounter.get('time')="</span>+newcounter.get(<span class="string">'time'</span>));</div><div class="line">						<span class="keyword">var</span> content = $(<span class="built_in">document</span>.getElementById(url)).text() + <span class="string">': '</span> + newcounter.get(<span class="string">'time'</span>);</div><div class="line">						$(<span class="built_in">document</span>.getElementById(url)).text(content);</div><div class="line">					&#125;,</div><div class="line">					error: <span class="function"><span class="keyword">function</span>(<span class="params">newcounter, error</span>) </span>&#123;</div><div class="line">						<span class="built_in">console</span>.log(<span class="string">'Failed to create'</span>);</div><div class="line">					&#125;</div><div class="line">				&#125;);</div><div class="line">			&#125;</div><div class="line">		&#125;,</div><div class="line">		error: <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</div><div class="line">			<span class="built_in">console</span>.log(<span class="string">'Error:'</span> + error.code + <span class="string">" "</span> + error.message);</div><div class="line">		&#125;</div><div class="line">	&#125;);</div><div class="line">&#125;</div><div class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">var</span> Counter = AV.Object.extend(<span class="string">"Counter"</span>);</div><div class="line">	<span class="keyword">if</span> ($(<span class="string">'.leancloud_visitors'</span>).length == <span class="number">1</span>) &#123;</div><div class="line">		addCount(Counter);</div><div class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> ($(<span class="string">'.post-title-link'</span>).length &gt; <span class="number">1</span>) &#123;</div><div class="line">		showTime(Counter);</div><div class="line">	&#125;</div><div class="line">&#125;);</div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<h4 id="ä¿®æ”¹post-swigæ–‡ä»¶"><a href="#ä¿®æ”¹post-swigæ–‡ä»¶" class="headerlink" title="ä¿®æ”¹post.swigæ–‡ä»¶"></a><del>ä¿®æ”¹<code>post.swig</code>æ–‡ä»¶</del></h4><p><del>åœ¨ä¸»é¢˜çš„<code>layout\_macro</code>è·¯å¾„ä¸‹ï¼Œæ‰“å¼€<code>post.swig</code>æ–‡ä»¶ï¼Œæ‰¾åˆ°ä»¥ä¸‹å†…å®¹ï¼ˆå¤§æ¦‚88è¡Œï¼‰ï¼š</del></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&#123;% if not is_index and theme.facebook_sdk.enable and theme.facebook_sdk.like_button %&#125;</div><div class="line">  &amp;nbsp; | &amp;nbsp;</div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"fb-like"</span> <span class="attr">data-layout</span>=<span class="string">"button_count"</span> <span class="attr">data-share</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">&#123;% endif %&#125;</div></pre></td></tr></table></figure>
<p><del>åœ¨å…¶åé¢æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</del></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&#123;% if theme.leancloud_visitors.enable %&#125;</div><div class="line">		  	 <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"&#123;&#123; url_for(post.path) &#125;&#125;"</span><span class="attr">class</span>=<span class="string">"leancloud_visitors"</span>  <span class="attr">data-flag-title</span>=<span class="string">"&#123;&#123; post.title &#125;&#125;"</span>&gt;</span></div><div class="line">            &amp;nbsp; | &amp;nbsp; &#123;&#123;__('post.visitors')&#125;&#125;</div><div class="line">            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">		  &#123;% endif %&#125;</div></pre></td></tr></table></figure>
<p><del>æ·»åŠ å®Œæ¯•ä¹‹åï¼Œæ–‡ä»¶å†…å®¹åƒè¿™ä¸ªæ ·å­ï¼š</del></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">      &#123;% if not is_index and theme.facebook_sdk.enable and theme.facebook_sdk.like_button %&#125;</div><div class="line">        &amp;nbsp; | &amp;nbsp;</div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"fb-like"</span> <span class="attr">data-layout</span>=<span class="string">"button_count"</span> <span class="attr">data-share</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">      &#123;% endif %&#125;</div><div class="line">&#123;% if theme.leancloud_visitors.enable %&#125;</div><div class="line">	 <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"&#123;&#123; url_for(post.path) &#125;&#125;"</span><span class="attr">class</span>=<span class="string">"leancloud_visitors"</span>  <span class="attr">data-flag-title</span>=<span class="string">"&#123;&#123; post.title &#125;&#125;"</span>&gt;</span></div><div class="line">        &amp;nbsp; | &amp;nbsp; &#123;&#123;__('post.visitors')&#125;&#125;</div><div class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">&#123;% endif %&#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">header</span>&gt;</span></div><div class="line">&#123;% endif %&#125;</div></pre></td></tr></table></figure>
<h4 id="ä¿®æ”¹layout-swigæ–‡ä»¶"><a href="#ä¿®æ”¹layout-swigæ–‡ä»¶" class="headerlink" title="ä¿®æ”¹layout.swigæ–‡ä»¶"></a><del>ä¿®æ”¹<code>layout.swig</code>æ–‡ä»¶</del></h4><p><del>åœ¨NexTæ ¹ç›®å½•çš„<code>layout</code>è·¯å¾„ä¸‹ï¼Œæ‰“å¼€ <code>_layout.swig</code>æ–‡ä»¶ï¼Œåœ¨<code>&lt;/body&gt;</code>ä¸Šæ–¹æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</del><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;% if theme.leancloud_visitors.enable %&#125;</div><div class="line">  	 &#123;% include '_scripts/lean-analytics.swig' %&#125;</div><div class="line">  &#123;%  endif %&#125;</div></pre></td></tr></table></figure></p>
<p><del>æ·»åŠ å®Œæˆä¹‹åï¼Œæ–‡ä»¶å†…å®¹åƒè¿™ä¸ªæ ·å­ï¼š</del></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&#123;# LazyLoad #&#125;</div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"&#123;&#123; url_for(theme.js) &#125;&#125;/lazyload.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="javascript">    $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></div><div class="line"><span class="javascript">      $(<span class="string">"#posts"</span>).find(<span class="string">'img'</span>).lazyload(&#123;</span></div><div class="line"><span class="javascript">        placeholder: <span class="string">"&#123;&#123; url_for(theme.images) &#125;&#125;/loading.gif"</span>,</span></div><div class="line"><span class="javascript">        effect: <span class="string">"fadeIn"</span></span></div><div class="line"><span class="undefined">      &#125;);</span></div><div class="line"><span class="undefined">    &#125;);</span></div><div class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">  &#123;% if theme.leancloud_visitors.enable %&#125;</div><div class="line">  	 &#123;% include '_scripts/lean-analytics.swig' %&#125;</div><div class="line">  &#123;%  endif %&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h4 id="ä¿®æ”¹zh-Hans-ymlæ–‡ä»¶"><a href="#ä¿®æ”¹zh-Hans-ymlæ–‡ä»¶" class="headerlink" title="ä¿®æ”¹zh-Hans.ymlæ–‡ä»¶"></a><del>ä¿®æ”¹<code>zh-Hans.yml</code>æ–‡ä»¶</del></h4><p><del>åœ¨NexTç›®å½•çš„<code>languages</code>è·¯å¾„ä¸‹çš„<code>zh-Hans.yml</code>æ–‡ä»¶ï¼Œåœ¨<code>post:</code>ç»“ç‚¹ä¸‹æ·»åŠ <code>visitors: é˜…è¯»æ¬¡æ•°</code>ï¼Œåƒè¿™ä¸ªæ ·å­ï¼š</del><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">post:</div><div class="line">  posted: å‘è¡¨äº</div><div class="line">  visitors: é˜…è¯»æ¬¡æ•°</div><div class="line">  updated: æ›´æ–°äº</div><div class="line">  in: åˆ†ç±»äº</div><div class="line">  read_more: é˜…è¯»å…¨æ–‡</div><div class="line">  untitled: æœªå‘½å</div><div class="line">  toc_empty: æ­¤æ–‡ç« æœªåŒ…å«ç›®å½•</div></pre></td></tr></table></figure></p>
<p><del><strong> å¦‚æœä½ ä½¿ç”¨çš„æ˜¯å…¶å®ƒNexTçš„è¯­è¨€ï¼Œè¯·ç›¸åº”çš„æ·»åŠ è¯¥å­—æ®µå³å¯ã€‚</strong></del></p>
<p><del>è‡³æ­¤NexTçš„ä¿®æ”¹å·¥ä½œå°±å®Œæˆäº†ï¼Œä½†æ˜¯ç°åœ¨è¿˜æ˜¯ä¸èƒ½å¤Ÿä½¿ç”¨æ–‡ç« é˜…è¯»é‡è¿™ä¸ªç»Ÿè®¡åŠŸèƒ½çš„ã€‚è¿™ä¸ªåŠŸèƒ½ä¾èµ–äº<a href="https://leancloud.cn/" target="_blank" rel="external">LeanCloud</a>æä¾›åç«¯æ•°æ®å­˜å–ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ³¨å†Œä¸€ä¸ª<a href="https://leancloud.cn/login.html#/signup" target="_blank" rel="external">LeanCloudå¸å·</a>æ‰èƒ½ç»§ç»­ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œ<strong><a href="https://leancloud.cn/login.html#/signup" target="_blank" rel="external">ç‚¹æˆ‘å¿«é€Ÿæ³¨å†Œ</a>.</strong></del></p>
<hr>
<h3 id="é…ç½®LeanCloud"><a href="#é…ç½®LeanCloud" class="headerlink" title="é…ç½®LeanCloud"></a>é…ç½®<a href="https://leancloud.cn" target="_blank" rel="external">LeanCloud</a></h3><p>åœ¨æ³¨å†Œå®ŒæˆLeanCloudå¸å·å¹¶éªŒè¯é‚®ç®±ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç™»å½•æˆ‘ä»¬çš„LeanCloudå¸å·ï¼Œè¿›è¡Œä¸€ç•ªé…ç½®ä¹‹åæ‹¿åˆ°<code>AppID</code>ä»¥åŠ<code>AppKey</code>è¿™ä¸¤ä¸ªå‚æ•°å³å¯æ­£å¸¸ä½¿ç”¨æ–‡ç« é˜…è¯»é‡ç»Ÿè®¡çš„åŠŸèƒ½äº†ã€‚</p>
<h4 id="åˆ›å»ºåº”ç”¨"><a href="#åˆ›å»ºåº”ç”¨" class="headerlink" title="åˆ›å»ºåº”ç”¨"></a>åˆ›å»ºåº”ç”¨</h4><ul>
<li>æˆ‘ä»¬æ–°å»ºä¸€ä¸ªåº”ç”¨æ¥ä¸“é—¨è¿›è¡Œåšå®¢çš„è®¿é—®ç»Ÿè®¡çš„æ•°æ®æ“ä½œã€‚é¦–å…ˆï¼Œæ‰“å¼€æ§åˆ¶å°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</li>
</ul>
<p><img src="http://7xkj6q.com1.z0.glb.clouddn.com/static/images/leancloud-page-anlysis/open_consoloe.png" alt="" title="æ‰“å¼€æ§åˆ¶å°"></p>
<ul>
<li>åœ¨å‡ºç°çš„ç•Œé¢ç‚¹å‡»<code>åˆ›å»ºåº”ç”¨</code>ï¼š</li>
</ul>
<p><img src="http://7xkj6q.com1.z0.glb.clouddn.com/static/images/leancloud-page-anlysis/create_app.png" alt="" title="åˆ›å»ºåº”ç”¨"></p>
<ul>
<li>åœ¨æ¥ä¸‹æ¥çš„é¡µé¢ï¼Œæ–°å»ºçš„åº”ç”¨åç§°æˆ‘ä»¬å¯ä»¥éšæ„è¾“å…¥ï¼Œå³ä¾¿æ˜¯è¾“å…¥çš„ä¸æ»¡æ„æˆ‘ä»¬åç»­ä¹Ÿæ˜¯å¯ä»¥æ›´æ”¹çš„:</li>
</ul>
<p><img src="http://7xkj6q.com1.z0.glb.clouddn.com/static/images/leancloud-page-anlysis/creating_app.png" alt="" title="åˆ›å»ºçš„æ–°åº”ç”¨åç§°"></p>
<ul>
<li>è¿™é‡Œä¸ºäº†æ¼”ç¤ºçš„æ–¹ä¾¿ï¼Œæˆ‘æ–°åˆ›å»ºä¸€ä¸ªå–åä¸ºtestçš„åº”ç”¨ã€‚åˆ›å»ºå®Œæˆä¹‹åæˆ‘ä»¬ç‚¹å‡»æ–°åˆ›å»ºçš„åº”ç”¨çš„åå­—æ¥è¿›è¡Œè¯¥åº”ç”¨çš„å‚æ•°é…ç½®ï¼š</li>
</ul>
<p><img src="http://7xkj6q.com1.z0.glb.clouddn.com/static/images/leancloud-page-anlysis/create_class.png" alt="" title="æ‰“å¼€åº”ç”¨å‚æ•°é…ç½®ç•Œé¢"></p>
<ul>
<li>åœ¨åº”ç”¨çš„æ•°æ®é…ç½®ç•Œé¢ï¼Œå·¦ä¾§ä¸‹åˆ’çº¿å¼€å¤´çš„éƒ½æ˜¯ç³»ç»Ÿé¢„å®šä¹‰å¥½çš„è¡¨ï¼Œä¸ºäº†ä¾¿äºåŒºåˆ†æˆ‘ä»¬æ–°å»ºä¸€å¼ è¡¨æ¥ä¿å­˜æˆ‘ä»¬çš„æ•°æ®ã€‚ç‚¹å‡»å·¦ä¾§å³ä¸Šè§’çš„é½¿è½®å›¾æ ‡ï¼Œæ–°å»ºClassï¼š<br> åœ¨å¼¹å‡ºçš„é€‰é¡¹ä¸­é€‰æ‹©<code>åˆ›å»ºClass</code>æ¥æ–°å»ºClassç”¨æ¥ä¸“é—¨ä¿å­˜æˆ‘ä»¬åšå®¢çš„æ–‡ç« è®¿é—®é‡ç­‰æ•°æ®:<br> ç‚¹å‡»<code>åˆ›å»ºClass</code>ä¹‹åï¼Œ<del>ç†è®ºä¸Šæ¥è¯´åå­—å¯ä»¥éšæ„å–åï¼Œåªè¦ä½ äº¤äº’ä»£ç åšç›¸åº”çš„æ›´æ”¹å³å¯</del>ï¼Œä½†æ˜¯ä¸ºäº†ä¿è¯æˆ‘ä»¬å‰é¢å¯¹NexTä¸»é¢˜çš„ä¿®æ”¹å…¼å®¹ï¼Œæ­¤å¤„çš„<strong><font color="green">æ–°å»ºClassåå­—å¿…é¡»ä¸º<font color="red"><code>Counter</code></font></font></strong>:</li>
</ul>
<p><img src="http://7xkj6q.com1.z0.glb.clouddn.com/static/images/leancloud-page-anlysis/creating_class.png" alt="" title="æƒé™é…ç½®"></p>
<ul>
<li>ç”±äºLeanCloudå‡çº§äº†é»˜è®¤çš„ACLæƒé™ï¼Œå¦‚æœä½ æƒ³é¿å…åç»­å› ä¸ºæƒé™çš„é—®é¢˜å¯¼è‡´æ¬¡æ•°ç»Ÿè®¡æ˜¾ç¤ºä¸æ­£å¸¸ï¼Œå»ºè®®åœ¨æ­¤å¤„é€‰æ‹©<code>æ— é™åˆ¶</code>ã€‚</li>
</ul>
<p><img src="http://7xkj6q.com1.z0.glb.clouddn.com/static/images/leancloud-page-anlysis/open_app_key.png" alt="" title="æ‰“å¼€åº”ç”¨è®¾ç½®"></p>
<p>åˆ›å»ºå®Œæˆä¹‹åï¼Œå·¦ä¾§æ•°æ®æ åº”è¯¥ä¼šå¤šå‡ºä¸€æ åä¸º<code>Counter</code>çš„æ ç›®ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬ç‚¹å‡»é¡¶éƒ¨çš„è®¾ç½®ï¼Œåˆ‡æ¢åˆ°teståº”ç”¨çš„æ“ä½œç•Œé¢:<br>åœ¨å¼¹å‡ºçš„ç•Œé¢ä¸­ï¼Œé€‰æ‹©å·¦ä¾§çš„<code>åº”ç”¨Key</code>é€‰é¡¹ï¼Œå³å¯å‘ç°æˆ‘ä»¬åˆ›å»ºåº”ç”¨çš„<code>AppID</code>ä»¥åŠ<code>AppKey</code>ï¼Œæœ‰äº†å®ƒï¼Œæˆ‘ä»¬å°±æœ‰æƒé™èƒ½å¤Ÿé€šè¿‡ä¸»é¢˜ä¸­é…ç½®å¥½çš„Javascriptä»£ç ä¸è¿™ä¸ªåº”ç”¨çš„Counterè¡¨è¿›è¡Œæ•°æ®å­˜å–æ“ä½œäº†:</p>
<p><img src="http://7xkj6q.com1.z0.glb.clouddn.com/static/images/leancloud-page-anlysis/opened_app_key.png" alt="" title="è·å–Appidã€Appkey"></p>
<p>å¤åˆ¶<code>AppID</code>ä»¥åŠ<code>AppKey</code>å¹¶åœ¨NexTä¸»é¢˜çš„<code>_config.yml</code>æ–‡ä»¶ä¸­æˆ‘ä»¬ç›¸åº”çš„ä½ç½®å¡«å…¥å³å¯ï¼Œæ­£ç¡®é…ç½®ä¹‹åæ–‡ä»¶å†…å®¹åƒè¿™ä¸ªæ ·å­:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">leancloud_visitors:</div><div class="line">  enable: true</div><div class="line">  app_id: joaeuuc4hsqudUUwx4gIvGF6-gzGzoHsz</div><div class="line">  app_key: E9UJsJpw1omCHuS22PdSpKoh</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ—¶å€™é‡æ–°ç”Ÿæˆéƒ¨ç½²Hexoåšå®¢ï¼Œåº”è¯¥å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨æ–‡ç« é˜…è¯»é‡ç»Ÿè®¡çš„åŠŸèƒ½äº†ã€‚éœ€è¦ç‰¹åˆ«è¯´æ˜çš„æ˜¯ï¼šè®°å½•æ–‡ç« è®¿é—®é‡çš„å”¯ä¸€æ ‡è¯†ç¬¦æ˜¯æ–‡ç« çš„<code>å‘å¸ƒæ—¥æœŸ</code>ä»¥åŠ<code>æ–‡ç« çš„æ ‡é¢˜</code>ï¼Œå› æ­¤è¯·ç¡®ä¿è¿™ä¸¤ä¸ªæ•°å€¼ç»„åˆçš„å”¯ä¸€æ€§ï¼Œå¦‚æœä½ æ›´æ”¹äº†è¿™ä¸¤ä¸ªæ•°å€¼ï¼Œä¼šé€ æˆæ–‡ç« é˜…è¯»æ•°å€¼çš„æ¸…é›¶é‡è®¡ã€‚</p>
<h3 id="åå°ç®¡ç†"><a href="#åå°ç®¡ç†" class="headerlink" title="åå°ç®¡ç†"></a>åå°ç®¡ç†</h3><p>å½“ä½ é…ç½®éƒ¨åˆ†å®Œæˆä¹‹åï¼Œåˆå§‹çš„æ–‡ç« ç»Ÿè®¡é‡æ˜¾ç¤ºä¸º0ï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™æˆ‘ä»¬LeanCloudå¯¹åº”çš„åº”ç”¨çš„<code>Counter</code>è¡¨ä¸­å¹¶æ²¡æœ‰ç›¸åº”çš„è®°å½•ï¼Œåªæ˜¯å•çº¯çš„æ˜¾ç¤ºä¸º0è€Œå·²ï¼Œå½“åšå®¢æ–‡ç« åœ¨é…ç½®å¥½é˜…è¯»é‡ç»Ÿè®¡æœåŠ¡ä¹‹åç¬¬ä¸€æ¬¡æ‰“å¼€æ—¶ï¼Œä¾¿ä¼šè‡ªåŠ¨å‘æœåŠ¡å™¨å‘é€æ•°æ®æ¥åˆ›å»ºä¸€æ¡æ•°æ®ï¼Œè¯¥æ•°æ®ä¼šè¢«è®°å½•åœ¨å¯¹åº”çš„åº”ç”¨çš„<code>Counter</code>è¡¨ä¸­ã€‚</p>
<p><img src="http://7xkj6q.com1.z0.glb.clouddn.com/static/images/leancloud-page-anlysis/background.png" alt="" title="åå°ç®¡ç†"></p>
<p>æˆ‘ä»¬å¯ä»¥ä¿®æ”¹å…¶ä¸­çš„<code>time</code>å­—æ®µçš„æ•°å€¼æ¥è¾¾åˆ°ä¿®æ”¹æŸä¸€ç¯‡æ–‡ç« çš„è®¿é—®é‡çš„ç›®çš„ï¼ˆåšå®¢æ–‡ç« è®¿é—®é‡å¿«é€’æå‡äººæ°”çš„è£…é€¼åˆ©å™¨ï¼‰ã€‚åŒå‡»å…·ä½“çš„æ•°å€¼ï¼Œä¿®æ”¹ä¹‹åå›è½¦å³å¯ä¿å­˜ã€‚</p>
<ul>
<li><code>url</code>å­—æ®µè¢«å½“ä½œå”¯ä¸€<code>ID</code>æ¥ä½¿ç”¨ï¼Œå› æ­¤å¦‚æœä½ ä¸çŸ¥é“å¸¦æ¥çš„åæœçš„è¯è¯·ä¸è¦ä¿®æ”¹ã€‚</li>
<li><code>title</code>å­—æ®µæ˜¾ç¤ºçš„æ˜¯åšå®¢æ–‡ç« çš„æ ‡é¢˜ï¼Œç”¨äºåå°ç®¡ç†çš„æ—¶å€™åŒºåˆ†æ–‡ç« ä¹‹ç”¨ï¼Œæ²¡æœ‰ä»€ä¹ˆå®é™…ä½œç”¨ã€‚</li>
<li>å…¶ä»–å­—æ®µçš†ä¸ºè‡ªåŠ¨ç”Ÿæˆï¼Œå…·ä½“ä½œç”¨è¯·æŸ¥é˜…LeanCloudå®˜æ–¹æ–‡æ¡£ï¼Œå¦‚æœä½ ä¸çŸ¥é“æœ‰ä»€ä¹ˆä½œç”¨è¯·ä¸è¦éšæ„ä¿®æ”¹ã€‚</li>
</ul>
<h3 id="Webå®‰å…¨"><a href="#Webå®‰å…¨" class="headerlink" title="Webå®‰å…¨"></a>Webå®‰å…¨</h3><p>å› ä¸ºAppIDä»¥åŠAppKeyæ˜¯æš´éœ²åœ¨å¤–çš„ï¼Œå› æ­¤å¦‚æœä¸€äº›åˆ«ç”¨ç”¨å¿ƒä¹‹äººçŸ¥é“äº†ä¹‹åç”¨äºå…¶å®ƒç›®çš„æ˜¯å¾—ä¸å¿å¤±çš„ï¼Œä¸ºäº†ç¡®ä¿åªç”¨äºæˆ‘ä»¬è‡ªå·±çš„åšå®¢ï¼Œå»ºè®®å¼€å¯Webå®‰å…¨é€‰é¡¹ï¼Œè¿™æ ·å°±åªèƒ½é€šè¿‡æˆ‘ä»¬è‡ªå·±çš„åŸŸåæ‰æœ‰æƒè®¿é—®åå°çš„æ•°æ®äº†ï¼Œå¯ä»¥è¿›ä¸€æ­¥æå‡å®‰å…¨æ€§ã€‚</p>
<p>é€‰æ‹©åº”ç”¨çš„è®¾ç½®çš„<code>å®‰å…¨ä¸­å¿ƒ</code>é€‰é¡¹å¡:</p>
<p><img src="http://7xkj6q.com1.z0.glb.clouddn.com/static/images/leancloud-page-anlysis/open_safe_center.png" alt="" title="è¿›å…¥å®‰å…¨ä¸­å¿ƒ"></p>
<p>åœ¨<code>Web å®‰å…¨åŸŸå</code>ä¸­å¡«å…¥æˆ‘ä»¬è‡ªå·±çš„åšå®¢åŸŸåï¼Œæ¥ç¡®ä¿æ•°æ®è°ƒç”¨çš„å®‰å…¨:</p>
<p><img src="http://7xkj6q.com1.z0.glb.clouddn.com/static/images/leancloud-page-anlysis/bind_domain.png" alt="" title="é”å®šåŸŸå"></p>
<p>å¦‚æœä½ ä¸çŸ¥é“æ€ä¹ˆå¡«å†™å®‰å…¨åŸŸåè€Œæˆ–è€…å¡«å†™å®Œæˆä¹‹åå‘ç°åšå®¢æ–‡ç« è®¿é—®é‡æ˜¾ç¤ºä¸æ­£å¸¸ï¼Œæ‰“å¼€æµè§ˆå™¨è°ƒè¯•æ¨¡å¼ï¼Œå‘ç°å¦‚ä¸‹å›¾çš„è¾“å‡º:</p>
<p><img src="http://7xkj6q.com1.z0.glb.clouddn.com/static/images/leancloud-page-anlysis/broswer_403.png" alt="" title="Webå®‰å…¨åŸŸåå¡«å†™é”™è¯¯"></p>
<p>è¿™è¯´æ˜ä½ çš„å®‰å…¨åŸŸåå¡«å†™é”™è¯¯ï¼Œå¯¼è‡´æœåŠ¡å™¨æ‹’ç»äº†æ•°æ®äº¤äº’çš„è¯·æ±‚ï¼Œä½ å¯ä»¥æ›´æ”¹ä¸ºæ­£ç¡®çš„å®‰å…¨åŸŸåæˆ–è€…ä½ ä¸çŸ¥é“å¦‚ä½•ä¿®æ”¹è¯·åœ¨æœ¬åšæ–‡ä¸­ç•™è¨€æˆ–è€…æ”¾å¼ƒè®¾ç½®Webå®‰å…¨åŸŸåã€‚</p>
<p>Enjoy itï¼</p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h3&gt;&lt;hr&gt;
&lt;p&gt;ç”±äºæœ€è¿‘åœ¨æŠ˜è…¾Androidé¡¹ç›®ï¼Œéœ€è¦ç”¨åˆ°ä¸€äº›ä¸æœåŠ¡å™¨äº¤äº’ã€ä»¥åŠæ•°æ®å­˜å‚¨çš„ç›¸å…³åŠŸèƒ½ï¼Œç„¶åå‘ç°äº†&lt;a href=&quot;https://leancloud.cn&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;LeanCloud&lt;/a&gt;è¿™å®¶æœåŠ¡æä¾›å•†,ä½¿ç”¨ä¸‹æ¥è¿˜æ„Ÿè§‰è¿˜æŒºé è°±çš„(è¯·ç»™æˆ‘å¹¿å‘Šè´¹)ã€‚æ­£å¥½å‘ç°ä»–ä»¬æœåŠ¡æä¾›äº†&lt;a href=&quot;https://leancloud.cn/docs/js_guide.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;JavaScript SDK&lt;/a&gt;ï¼Œäºæ˜¯å°±æƒ³ç€å°è¯•ç€å®ç°Hexoåšå®¢æ–‡ç« çš„æµè§ˆæ•°ç»Ÿè®¡åŠŸèƒ½ï¼Œä¹‹å‰è™½ç„¶åœ¨ä½¿ç”¨ä¸è’œå­ï¼Œä½†æ˜¯ä¸è’œå­ä¸èƒ½å¤Ÿåœ¨ä¸»é¡µå±•ç¤ºæ–‡ç« é˜…è¯»é‡å•Šï¼å¯¹äºåšä¸»è¿™ç§æœ‰å¼ºè¿«ç—‡åˆæƒ³è£…Xçš„äººæ¥è¯´æœæ–­ä¸èƒ½å¿å•Šï¼&lt;/p&gt;
&lt;h3 id=&quot;ä¿®æ”¹NexTä¸»é¢˜æ¨¡ç‰ˆ&quot;&gt;&lt;a href=&quot;#ä¿®æ”¹NexTä¸»é¢˜æ¨¡ç‰ˆ&quot; class=&quot;headerlink&quot; title=&quot;ä¿®æ”¹NexTä¸»é¢˜æ¨¡ç‰ˆ&quot;&gt;&lt;/a&gt;&lt;del&gt;ä¿®æ”¹NexTä¸»é¢˜æ¨¡ç‰ˆ&lt;/del&gt;&lt;/h3&gt;&lt;p&gt;&lt;del&gt;æœ¬æ–¹æ³•ç†è®ºä¸Šå¯¹Hexoåšå®¢é€šç”¨ï¼Œç”±äºåšä¸»ä½¿ç”¨çš„æ˜¯NexTä¸»é¢˜ï¼Œæ‰€ä»¥å½“ç„¶é’ˆå¯¹NexTæ¥è¯´å’¯ã€‚&lt;/del&gt;&lt;strong&gt;&lt;font color=&quot;red&quot;&gt;NexTä¸»é¢˜ç›®å‰å·²ç»åˆå¹¶è¿™ä¸ªFeatureï¼Œå› æ­¤å¦‚æœä½ ä½¿ç”¨çš„æ˜¯NexTä¸»é¢˜ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ä¸ç”¨ä¿®æ”¹ä¸»é¢˜æ¨¡ç‰ˆè€Œç›´æ¥åœ¨&lt;code&gt;_config.yml&lt;/code&gt;ä¸­é…ç½®å³å¯ï¼Œè¯·ç›´æ¥è·³è½¬æŸ¥çœ‹&lt;a href=&quot;#%E9%85%8D%E7%BD%AELeanCloud&quot;&gt;é…ç½®LeanCloud&lt;/a&gt;&lt;/font&gt;&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Hexo" scheme="https://notes.wanghao.work/categories/Hexo/"/>
    
    
      <category term="Hexo" scheme="https://notes.wanghao.work/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>Create a Simple Android Keyboard</title>
    <link href="https://notes.wanghao.work/2015-09-04-Create-a-Simple-Android-Keyboard.html"/>
    <id>https://notes.wanghao.work/2015-09-04-Create-a-Simple-Android-Keyboard.html</id>
    <published>2015-09-04T07:12:11.000Z</published>
    <updated>2017-06-14T15:36:14.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>&emsp;&emsp;ç”±äºæœ€è¿‘åšçš„ä¸€ä¸ªAndroidé¡¹ç›®éœ€è¦ç”¨åˆ°ç”¨æˆ·çš„è¾“å…¥ä¸€äº›å­—ç¬¦ï¼Œå¸¸è§„çš„è¾“å…¥æ³•è¾“å…¥éå¸¸çš„ä¸æ–¹ä¾¿ã€‚å› æ­¤æœ‰å¿…è¦è‡ªå®šä¹‰ä¸€ä¸ªè¾“å…¥æ³•æ¥å®Œæˆè¿™ä¸ªè¿‡ç¨‹ã€‚æ­¤å¤„ç»™å‡ºä¸€ä¸ªç®€å•çš„è¾“å…¥æ³•Demo<br>æ¥å¸®åŠ©ç†è§£è‡ªå®šä¹‰è¾“å…¥æ³•çš„ä¸€äº›å®ç°è¿‡ç¨‹ã€‚</p>
<ul>
<li><strong>æœ‰å…³è¾“å…¥æ³•çš„ä¸€äº›è¯´æ˜ï¼Œè¯·å‚è§:<a href="http://notes.xiamo.tk/2015-04-01-Create-an-Android-IME.html" target="_blank" rel="external">Create a Android IME</a></strong></li>
</ul>
<a id="more"></a>
<h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><p>&emsp;&emsp;ç£¨åˆ€ä¸è¯¯ç æŸ´å·¥ï¼Œåˆ›å»ºä¸€ä¸ªAndroidæ˜¯éœ€è¦ä¸€ç‚¹ç‚¹å‡†å¤‡å·¥ä½œçš„,é€‰æ‹©ä¸€ä¸ªå¥½çš„IDEèƒ½å¤Ÿæé«˜æˆ‘ä»¬ç¼–ç çš„æ•ˆç‡ï¼š</p>
<ul>
<li>Android Studioï¼ˆæ¨èï¼‰</li>
<li>Android SDK</li>
</ul>
<p>æœ¬åšæ–‡çš„ç¼–å†™ç¯å¢ƒä¸ºAndroid Studioï¼Œå¦‚æœä½ è¿˜åœ¨ä½¿ç”¨Eclipseçš„è¯ï¼Œè½¬åˆ°Android Studioä¸Šæ¥å§ï¼å¦‚æœå¯¹ä¸Šè¿°IDEçš„ä¸‹è½½æ„Ÿåˆ°èŒ«ç„¶çš„è¯ï¼Œæ¨èä¸€ä¸ªå›½å†…Androidå¼€å‘çš„å¥½ç½‘ç«™ï¼š<a href="http://www.androiddevtools.cn/" target="_blank" rel="external">http://www.androiddevtools.cn</a>ã€‚</p>
<h2 id="åˆ›å»ºä¸€ä¸ªAndroidé¡¹ç›®"><a href="#åˆ›å»ºä¸€ä¸ªAndroidé¡¹ç›®" class="headerlink" title="åˆ›å»ºä¸€ä¸ªAndroidé¡¹ç›®"></a>åˆ›å»ºä¸€ä¸ªAndroidé¡¹ç›®</h2><ul>
<li>æ‰“å¼€Android Studioï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„Androidé¡¹ç›®ï¼Œå‘½åä¸º<code>SimpleKeyboard</code>ï¼Œå¦‚ä¸‹å›¾ï¼š</li>
</ul>
<p><img src="http://i3.piimg.com/37ae2bfdf945c18e.png" alt="" title="åˆ›å»ºä¸€ä¸ªSimpleKeyboardé¡¹ç›®"></p>
<ul>
<li>æœ€å°çš„Androidæ”¯æŒç‰ˆæœ¬æˆ‘ä»¬åœ¨è¿™é‡Œé€‰æ‹©API 9ä¹Ÿå°±æ˜¯Android 2.3å’¯ï¼š</li>
</ul>
<p><img src="http://i3.piimg.com/f337c436d68dcc22.png" alt="" title="è®¾ç½®æœ€å°SDKæ”¯æŒç‰ˆæœ¬"></p>
<ul>
<li>ç”±äºæˆ‘ä»¬åªæ˜¯ä¸€ä¸ªå•ç‹¬çš„é”®ç›˜Demoï¼Œä¸ºäº†è¾¾åˆ°æè‡´ç²¾ç®€ï¼Œè¿˜æ˜¯ä¸éœ€è¦Activityäº†ï¼Œå› æ­¤æˆ‘ä»¬é€‰æ‹©<code>Add No Activity</code>ï¼š</li>
</ul>
<p><img src="http://i3.piimg.com/fed92e215ec17e4f.png" alt="" title="é€‰æ‹©Add No Activity"></p>
<p>ç‚¹å‡»Finishï¼Œè¿™æ ·å°±å®Œæˆäº†æˆ‘ä»¬Android Keyboardé¡¹ç›®çš„åˆ›å»ºäº†ã€‚è¿™ä¸ªç­‰å¾…Gradleæ„å»ºå®Œæˆï¼Œå› ä¸ºæˆ‘ä»¬è¿™ä¸ªé¡¹ç›®æ˜¯æ²¡æœ‰Activityçš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æŒ‰ç…§å¦‚ä¸‹å›¾ç¨å¾®é…ç½®ä¸€ä¸‹ï¼š</p>
<p><img src="http://i3.piimg.com/4c72f6d152c54dee.png" alt=""></p>
<p><img src="http://i3.piimg.com/2195d3987d5dddd1.png" alt=""></p>
<h2 id="ç¼–è¾‘AndroidManifest-xmlæ–‡ä»¶"><a href="#ç¼–è¾‘AndroidManifest-xmlæ–‡ä»¶" class="headerlink" title="ç¼–è¾‘AndroidManifest.xmlæ–‡ä»¶"></a>ç¼–è¾‘AndroidManifest.xmlæ–‡ä»¶</h2><p>&emsp;&emsp;é”®ç›˜åœ¨Androidç³»ç»Ÿä¸­è¢«è¯†åˆ«ä¸ºä¸€ä¸ªè¾“å…¥æ³•ç¼–è¾‘å™¨ï¼ˆIMEï¼‰ï¼ŒIMEä½œä¸ºä¸€ä¸ªServiceè¿è¡Œã€‚åªæœ‰åœ¨AndroidManifest.xmlæ–‡ä»¶ä¸­é€šè¿‡<code>android.permission.BIND_INPUT_METHOD</code>æƒé™å£°æ˜çš„Serviceå¹¶ä¸”å“åº”<code>android.view.im</code>è¿™ä¸ªå…ƒæ•°æ®åŠ¨ä½œæ‰èƒ½å¤Ÿè¢«Androidç³»ç»Ÿæ­£ç¡®çš„è¯†åˆ«ä¸ºIMEã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨<code>AndroidManifest.xml</code>æ–‡ä»¶ä¸­çš„applicationæ ‡ç­¾å¯¹ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">service</span></span></div><div class="line"><span class="tag">          <span class="attr">android:name</span>=<span class="string">".SimpleIME"</span></span></div><div class="line"><span class="tag">          <span class="attr">android:label</span>=<span class="string">"@string/custom_ime"</span></span></div><div class="line"><span class="tag">          <span class="attr">android:permission</span>=<span class="string">"android.permission.BIND_INPUT_METHOD"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">meta-data</span></span></div><div class="line"><span class="tag">              <span class="attr">android:name</span>=<span class="string">"android.view.im"</span></span></div><div class="line"><span class="tag">              <span class="attr">android:resource</span>=<span class="string">"@xml/method"</span> /&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></div><div class="line">              <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.view.InputMethod"</span> /&gt;</span></div><div class="line">          <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">service</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºmethod-xml"><a href="#åˆ›å»ºmethod-xml" class="headerlink" title="åˆ›å»ºmethod.xml"></a>åˆ›å»ºmethod.xml</h2><blockquote>
<p>&emsp;&emsp;åœ¨ä¸Šé¢çš„Serviceå£°æ˜ä¸­ï¼Œmeta-dataæ ‡ç­¾å£°æ˜å¼•ç”¨äº†ä¸€ä¸ªå«åš<code>method.xml</code>çš„æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆAndroidç³»ç»Ÿå°†ä¸èƒ½å¤Ÿè¯†åˆ«æˆ‘ä»¬çš„Serviceä¸ºä¸€ä¸ªæœ‰æ•ˆçš„IME Serviceã€‚è¿™ä¸ªæ–‡ä»¶åŒ…å«äº†æœ‰å…³è¾“å…¥æ³•åŠå…¶å­ç±»çš„è¯¦ç»†ä¿¡æ¯ã€‚</p>
</blockquote>
<p>åœ¨æˆ‘ä»¬çš„Demoä¸­ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª<code>subtyoe</code>æ¥å£°æ˜è¾“å…¥æ³•çš„æ˜¾ç¤ºåç§°ä»¥åŠå…¶è¯­è¨€ç¯å¢ƒï¼šï¼ˆå¦‚æœæ²¡æœ‰res/xmlç›®å½•çš„è¯ï¼Œåˆ›å»ºä¸€ä¸ªå¹¶å°†ä¸‹é¢çš„å†…å®¹æ·»åŠ åˆ°è¯¥ç›®å½•çš„method.xmlæ–‡ä»¶ä¸­ï¼‰</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">input-method</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">subtype</span></span></div><div class="line"><span class="tag">        <span class="attr">android:imeSubtypeLocale</span>=<span class="string">"zh_CN"</span></span></div><div class="line"><span class="tag">        <span class="attr">android:imeSubtypeMode</span>=<span class="string">"keyboard"</span></span></div><div class="line"><span class="tag">        <span class="attr">android:label</span>=<span class="string">"tk_xiamo_notes"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">input-method</span>&gt;</span></div></pre></td></tr></table></figure>
<p>å¦‚æœä½ å¯¹labelä¸­ç›´æ¥å†™æ­»å­—ç¬¦ä¸²è¿™ç§åšæ³•æ¯”è¾ƒæœ‰å¼ºè¿«ç—‡çš„è¯ï¼Œå¯ä»¥å°†å…¶æŠ½å–åˆ°Strings.xmlæ–‡ä»¶ä¸­ã€‚</p>
<h2 id="å®šä¹‰é”®ç›˜å¸ƒå±€"><a href="#å®šä¹‰é”®ç›˜å¸ƒå±€" class="headerlink" title="å®šä¹‰é”®ç›˜å¸ƒå±€"></a>å®šä¹‰é”®ç›˜å¸ƒå±€</h2><p>&emsp;&emsp;æˆ‘ä»¬çš„é”®ç›˜å¸ƒå±€æ¯”è¾ƒç®€å•ï¼Œä»…ä»…åŒ…å«äº†ä¸€ä¸ªKeyboardViewï¼Œå› æ­¤åœ¨<code>layout</code>ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª<code>keyboard.xml</code>æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä¸€ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">android.inputmethodservice.KeyboardView</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/keyboard"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:layout_alignParentBottom</span>=<span class="string">"true"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:keyPreviewLayout</span>=<span class="string">"@layout/preview"</span> /&gt;</span></div></pre></td></tr></table></figure>
<p>å…¶ä¸­éœ€è¦è¯´æ˜çš„æ˜¯ï¼š</p>
<ul>
<li><code>layout_alignParentBottom</code>å±æ€§è®¾ç½®ä¸º<code>true</code>æ¥ä¿è¯é”®ç›˜ä¼šåœ¨è®¾å¤‡å±å¹•çš„åº•ç«¯å¼¹å‡ºè€Œä¸æ˜¯åœ¨å…¶å®ƒä»€ä¹ˆåœ°æ–¹å¼¹å‡ºã€‚</li>
<li><code>keyPreviewLayout</code>å±æ€§ç”¨äºæŒ‰ä¸‹æŒ‰é”®æ—¶æš‚çŸ­çš„æŒ‰é”®é¢„è§ˆã€‚è¿™é‡Œæˆ‘ä»¬ç”±äºå›¾æ–¹ä¾¿çœäº‹ï¼Œå°±ç”¨ä¸€ä¸ªTextViewæ¥é¢„è§ˆå§~</li>
</ul>
<p>åœ¨<code>layout</code>ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªpreview.xmlæ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">TextView</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:gravity</span>=<span class="string">"center"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">"#A6A6A6"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:textStyle</span>=<span class="string">"bold"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:textSize</span>=<span class="string">"30sp"</span></span></div><div class="line"><span class="tag">    &gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">TextView</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="å®šä¹‰é”®ç›˜æŒ‰é”®"><a href="#å®šä¹‰é”®ç›˜æŒ‰é”®" class="headerlink" title="å®šä¹‰é”®ç›˜æŒ‰é”®"></a>å®šä¹‰é”®ç›˜æŒ‰é”®</h2><blockquote>
<p>é”®ç›˜æŒ‰é”®æ‰€ä»£è¡¨çš„é”®å€¼ä»¥åŠå…¶ä½ç½®ç­‰è¯¦ç»†ä¿¡æ¯éƒ½è¢«æŒ‡å®šåœ¨ä¸€ä¸ªxmlæ–‡ä»¶ä¸­ï¼Œæ¯ä¸ªç‹¬ç«‹çš„é”®ç›˜æŒ‰é”®è‡³å°‘éƒ½å¿…é¡»åŒ…å«ä¸€ä¸‹ä¸¤ä¸ªå±æ€§ï¼š</p>
</blockquote>
<table>
<thead>
<tr>
<th>å±æ€§å</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>keyLabel</td>
<td>å†³å®šè¿™ä¸ªæŒ‰é”®ä¸Šæ˜¾ç¤ºçš„å­—ç¬¦ä¿¡æ¯</td>
</tr>
<tr>
<td>codes</td>
<td>å†³å®šè¿™ä¸ªæŒ‰é”®çš„å¯¹åº”çš„å­—ç¬¦ä¿¡æ¯æ‰€ä»£è¡¨çš„é”®å€¼</td>
</tr>
</tbody>
</table>
<p><strong>ä¾‹å¦‚ï¼šå®šä¹‰ä¸€ä¸ªå­—æ¯Açš„æŒ‰é”®é‚£ä¹ˆå®ƒçš„<code>codes</code>å±æ€§å€¼åº”è¯¥ä¸ºï¼š97ï¼Œ<code>keyLabel</code>å±æ€§å€¼åº”è¯¥ä¸ºAã€‚</strong></p>
<p>å¦‚æœä¸€ä¸ªæŒ‰é”®å…³è”äº†å¤šä¸ªé”®å€¼ï¼Œé‚£ä¹ˆç‚¹å‡»è¯¥æŒ‰é”®è¾“å‡ºçš„å­—ç¬¦ä¾èµ–äºæ•²å‡»è¯¥æŒ‰é”®çš„æ¬¡æ•°ã€‚</p>
<p><strong>ä¾‹å¦‚ï¼šå¦‚æœä¸€ä¸ªæŒ‰é”®æ‹¥æœ‰ä¸‰ä¸ªé”®å€¼ï¼š63ã€33ã€58:</strong></p>
<table>
<thead>
<tr>
<th>æ•²å‡»è¯¥æŒ‰é”®çš„æ¬¡æ•°</th>
<th>è¾“å‡ºçš„å­—ç¬¦</th>
</tr>
</thead>
<tbody>
<tr>
<td>1æ¬¡</td>
<td>?</td>
</tr>
<tr>
<td>2æ¬¡</td>
<td>!</td>
</tr>
<tr>
<td>3æ¬¡</td>
<td>:</td>
</tr>
</tbody>
</table>
<p>å½“ç„¶äº†ï¼Œé™¤äº†ä¸Šè¿°å±æ€§ä¹‹å¤–ï¼Œä¸€ä¸ªæŒ‰é”®è¿˜æœ‰ä¸€äº›å…¶ä»–çš„å±æ€§ï¼š</p>
<table>
<thead>
<tr>
<th>å±æ€§å</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>keyEdgeFlags</td>
<td>å¯ä»¥è®¾ç½®çš„å€¼æœ‰ï¼šrightæˆ–è€…leftï¼Œè¯¥å±æ€§é€šå¸¸ç”¨åœ¨ä¸€è¡Œæœ€å·¦è¾¹æˆ–è€…æœ€å³è¾¹çš„æŒ‰é”®ä¸Šç”¨äºè¡¨ç¤ºæŒ‰é”®çš„æ’å¸ƒ</td>
</tr>
<tr>
<td>keyWidth</td>
<td>å®šä¹‰ä¸€ä¸ªæŒ‰é”®çš„å®½åº¦ï¼Œé€šå¸¸è¯¥å®½åº¦å€¼è¢«å®šä¹‰ä¸ºä¸€ä¸ªç™¾åˆ†æ¯”å€¼</td>
</tr>
<tr>
<td>isRepeatable</td>
<td>å¦‚æœè¿™ä¸ªå±æ€§è¢«è®¾ç½®ä¸ºtrueçš„è¯ï¼Œé•¿æŒ‰è¢«è®¾ç½®ä¸ºè¯¥å±æ€§çš„æŒ‰é”®å°†ä¼šåœ¨é•¿æŒ‰è¿™æ®µæ—¶é—´ä¸­å¤šæ¬¡é‡å¤è¯¥æŒ‰é”®çš„åŠ¨ä½œã€‚é€šè¿‡ï¼Œåœ¨åˆ é™¤é”®æˆ–è€…ç©ºæ ¼é”®ä¸­è®¾ç½®è¯¥å±æ€§ä¸ºtrue</td>
</tr>
</tbody>
</table>
<p>é”®ç›˜ä¸Šçš„æŒ‰é”®é€šè¿‡Rowæ ‡è¯†ä¸ºä¸€ç»„æŒ‰é”®ï¼Œæ¯”è¾ƒæ¨èçš„åšæ³•æ˜¯é™åˆ¶æ¯ç»„ä¸­æœ€å¤š10æšæŒ‰é”®ï¼Œè¿™æ ·çš„è¯ï¼Œæ¯ä¸ªæŒ‰é”®çš„å®½åº¦ç­‰äºé”®ç›˜å®½åº¦çš„10%ã€‚åœ¨æœ¬Demoä¸­ï¼ŒæŒ‰é”®é«˜åº¦è¢«è®¾ç½®ä¸º60dpï¼Œè¿™ä¸ªæ•°å€¼å¯ä»¥ä»»æ„è°ƒæ•´ã€‚ä½†æ˜¯æ¨èä¸è¦ä½äº48dpã€‚</p>
<p>åœ¨<code>res/xml</code>ç›®å½•ä¸­ï¼Œåˆ›å»ºä¸€ä¸ª<code>qwerty.xml</code>æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹å®ŒæˆæŒ‰é”®çš„å®šä¹‰ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">Keyboard</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:horizontalGap</span>=<span class="string">"0px"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:keyHeight</span>=<span class="string">"60dp"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:keyWidth</span>=<span class="string">"10%p"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:verticalGap</span>=<span class="string">"0px"</span></span></div><div class="line"><span class="tag">    &gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">Row</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"49"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyEdgeFlags</span>=<span class="string">"left"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"1"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"50"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"2"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"51"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"3"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"52"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"4"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"53"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"5"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"54"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"6"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"55"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"7"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"56"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"8"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"57"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"9"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"48"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyEdgeFlags</span>=<span class="string">"right"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"0"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">Row</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">Row</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"113"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyEdgeFlags</span>=<span class="string">"left"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"q"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"119"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"w"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"101"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"e"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"114"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"r"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"116"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"t"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"121"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"y"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"117"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"u"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"105"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"i"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"111"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"o"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"112"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyEdgeFlags</span>=<span class="string">"right"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"p"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">Row</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">Row</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"97"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyEdgeFlags</span>=<span class="string">"left"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"a"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"115"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"s"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"100"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"d"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"102"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"f"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"103"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"g"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"104"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"h"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"106"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"j"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"107"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"k"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"108"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"l"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"35,64"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyEdgeFlags</span>=<span class="string">"right"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"\#\@"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">Row</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">Row</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"-1"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyEdgeFlags</span>=<span class="string">"left"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"â†‘"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"122"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"z"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"120"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"x"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"99"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"c"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"118"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"v"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"98"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"b"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"110"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"n"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"109"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"m"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"46"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"."</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"63,33,58"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyEdgeFlags</span>=<span class="string">"right"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"\?!:"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">Row</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">Row</span> <span class="attr">android:rowEdgeFlags</span>=<span class="string">"bottom"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"44"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyEdgeFlags</span>=<span class="string">"left"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">","</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyWidth</span>=<span class="string">"10%p"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"47"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"/"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyWidth</span>=<span class="string">"10%p"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"32"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:isRepeatable</span>=<span class="string">"true"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"SPACE"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyWidth</span>=<span class="string">"40%p"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"-5"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:isRepeatable</span>=<span class="string">"true"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"Del"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyWidth</span>=<span class="string">"20%p"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Key</span></span></div><div class="line"><span class="tag">            <span class="attr">android:codes</span>=<span class="string">"-4"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyEdgeFlags</span>=<span class="string">"right"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyLabel</span>=<span class="string">"Done"</span></span></div><div class="line"><span class="tag">            <span class="attr">android:keyWidth</span>=<span class="string">"20%p"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">Row</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">Keyboard</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºServiceç±»"><a href="#åˆ›å»ºServiceç±»" class="headerlink" title="åˆ›å»ºServiceç±»"></a>åˆ›å»ºServiceç±»</h2><p>åˆ›å»ºä¸€ä¸ªjavaç±»ï¼Œå‘½åä¸º<code>SimpleIME.java</code>ï¼ˆä¸AndroidManifest.xmlæ–‡ä»¶ä¸­çš„å®šä¹‰å‘å¯¹åº”ï¼‰ï¼š</p>
<ul>
<li><code>SimpleIME</code>ç±»åº”è¯¥ç»§æ‰¿è‡³<code>InputMethodService</code>ç±»ã€‚</li>
<li><code>SimpleIME</code>ç±»åº”è¯¥å®ç°<code>OnKeyboardActionListener</code>æ¥å£ï¼Œè¯¥æ¥å£åŒ…å«äº†é”®ç›˜è¢«ç‚¹å‡»æˆ–è€…è¢«æŒ‰ä¸‹æ—¶å›è°ƒçš„ä¸€äº›å‡½æ•°ã€‚</li>
</ul>
<p>åˆ›å»ºå®Œæˆä¹‹åï¼Œå°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°è¯¥æ–‡ä»¶ä¸­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> tk.xiamo.notes.simplekeyboard;</div><div class="line"></div><div class="line"><span class="keyword">import</span> android.inputmethodservice.InputMethodService;</div><div class="line"><span class="keyword">import</span> android.inputmethodservice.Keyboard;</div><div class="line"><span class="keyword">import</span> android.inputmethodservice.KeyboardView;</div><div class="line"><span class="keyword">import</span> android.media.AudioManager;</div><div class="line"><span class="keyword">import</span> android.view.KeyEvent;</div><div class="line"><span class="keyword">import</span> android.view.View;</div><div class="line"><span class="keyword">import</span> android.view.inputmethod.InputConnection;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleIME</span> <span class="keyword">extends</span> <span class="title">InputMethodService</span> <span class="keyword">implements</span> <span class="title">KeyboardView</span>.<span class="title">OnKeyboardActionListener</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> KeyboardView keyboardView;</div><div class="line">    <span class="keyword">private</span> Keyboard keyboard;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> caps = <span class="keyword">false</span>;<span class="comment">//å¤§å°å†™è½¬æ¢</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * onKeyæ–¹æ³•ç”¨äºå¤„ç†é”®ç›˜ä¸å…¶ä»–åº”ç”¨ç¨‹åºè¾“å…¥åŸŸè¿›è¡Œäº¤äº’ã€‚</span></div><div class="line"><span class="comment">     * getCurrentInputConnection è¿™ä¸ªæ–¹æ³•è¢«ç”¨äºè·å–å…¶å®ƒåº”ç”¨ç¨‹åºçš„è¾“å…¥åŸŸï¼Œä¸€æ—¦æˆ‘ä»¬è·å–åˆ°è¿™ä¸ªConnectionå¯¹è±¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•äº†ï¼š</span></div><div class="line"><span class="comment">     * commitText ï¼šè¾“å‡ºä¸€ä¸ªæˆ–è€…å¤šä¸ªå­—ç¬¦åˆ°è¾“å…¥åŸŸä¸­ã€‚</span></div><div class="line"><span class="comment">     * deleteSurroundingText ï¼šä»è¾“å…¥åŸŸä¸­åˆ é™¤ä¸€ä¸ªæˆ–è€…å¤šä¸ªå­—ç¬¦ã€‚</span></div><div class="line"><span class="comment">     * sendKeyEvent ï¼šå‘é€ä¸€ä¸ªäº‹ä»¶ï¼ˆå¦‚KEYCODE_ENTERï¼‰åˆ°å¤–éƒ¨çš„åº”ç”¨ç¨‹åºã€‚</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onKey</span><span class="params">(<span class="keyword">int</span> primaryCode, <span class="keyword">int</span>[] keyCodes)</span> </span>&#123;</div><div class="line">        InputConnection inputConnection = getCurrentInputConnection();</div><div class="line">        playClick(primaryCode);</div><div class="line">        <span class="keyword">switch</span> (primaryCode) &#123;</div><div class="line">            <span class="keyword">case</span> Keyboard.KEYCODE_DELETE:</div><div class="line">                inputConnection.deleteSurroundingText(<span class="number">1</span>, <span class="number">0</span>);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> Keyboard.KEYCODE_SHIFT:</div><div class="line">                caps = !caps;</div><div class="line">                keyboardView.setShifted(caps);</div><div class="line">                keyboardView.invalidateAllKeys();</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> Keyboard.KEYCODE_DONE:</div><div class="line">                inputConnection.sendKeyEvent(<span class="keyword">new</span> KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_ENTER));</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">default</span>:</div><div class="line">                <span class="keyword">char</span> code = (<span class="keyword">char</span>) primaryCode;</div><div class="line">                <span class="keyword">if</span> (Character.isLetter(code) &amp;&amp; caps) &#123;</div><div class="line">                    code = Character.toUpperCase(code);</div><div class="line">                &#125;</div><div class="line">                inputConnection.commitText(String.valueOf(code), <span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * å½“é”®ç›˜è¢«åˆ›å»ºçš„æ—¶å€™ï¼ŒonCreateInputViewæ–¹æ³•å°†ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ã€‚æ‰€æœ‰çš„Serviceæˆå‘˜å˜é‡å¯ä»¥åœ¨è¯¥æ–¹æ³•ä¸­è¢«åˆå§‹åŒ–ã€‚</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">onCreateInputView</span><span class="params">()</span> </span>&#123;</div><div class="line">        keyboardView = (KeyboardView) getLayoutInflater().inflate(R.layout.keyboard, <span class="keyword">null</span>);</div><div class="line">        keyboard = <span class="keyword">new</span> Keyboard(<span class="keyword">this</span>, R.xml.qwerty);</div><div class="line">        keyboardView.setKeyboard(keyboard);</div><div class="line">        keyboardView.setOnKeyboardActionListener(<span class="keyword">this</span>);</div><div class="line">        <span class="keyword">return</span> keyboardView;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * <span class="doctag">@param</span> keyCode æŒ‰é”®çš„é”®ç </span></div><div class="line"><span class="comment">     *                å¯¹æŒ‡å®šçš„æŒ‰é”®æ’­æ”¾ä¸åŒçš„æŒ‰é”®å£°éŸ³</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">playClick</span><span class="params">(<span class="keyword">int</span> keyCode)</span> </span>&#123;</div><div class="line">        AudioManager am = (AudioManager) getSystemService(AUDIO_SERVICE);</div><div class="line">        <span class="keyword">switch</span> (keyCode) &#123;</div><div class="line">            <span class="keyword">case</span> <span class="number">32</span>:</div><div class="line">                am.playSoundEffect(AudioManager.FX_KEYPRESS_SPACEBAR);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> Keyboard.KEYCODE_DONE:</div><div class="line">            <span class="keyword">case</span> <span class="number">10</span>:</div><div class="line">                am.playSoundEffect(AudioManager.FX_KEYPRESS_RETURN);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> Keyboard.KEYCODE_DELETE:</div><div class="line">                am.playSoundEffect(AudioManager.FX_KEYPRESS_DELETE);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">default</span>:</div><div class="line">                am.playSoundEffect(AudioManager.FX_KEYPRESS_STANDARD);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onText</span><span class="params">(CharSequence text)</span> </span>&#123;&#125;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swipeLeft</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swipeRight</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swipeDown</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swipeUp</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPress</span><span class="params">(<span class="keyword">int</span> primaryCode)</span> </span>&#123;&#125;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRelease</span><span class="params">(<span class="keyword">int</span> primaryCode)</span> </span>&#123;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>éœ€è¦ç‰¹åˆ«è¯´æ˜çš„æ˜¯ï¼šä¸€æ—¦ç”¨æˆ·åœ¨é”®ç›˜ä¸ŠæŒ‰ä¸‹äº†ä¸€ä¸ªæŒ‰é”®ï¼ŒonKeyæ–¹æ³•å°†ä¼šå¸¦ç€è¢«æŒ‰ä¸‹çš„æŒ‰é”®çš„æ‰€ä»£è¡¨çš„é”®å€¼å‚æ•°è€Œè¢«è°ƒç”¨ï¼ŒåŸºäºé”®å€¼çš„ä¸åŒï¼Œå°†ä¼šæ‰§è¡Œä»¥ä¸‹åŠ¨ä½œï¼š</strong></p>
<table>
<thead>
<tr>
<th>é”®å€¼</th>
<th>æŒ‡å®šçš„åŠ¨ä½œ</th>
</tr>
</thead>
<tbody>
<tr>
<td>KEYCODE_DELETE</td>
<td>å°†ä¼šä½¿ç”¨deleteSurroundingText æ–¹æ³•åˆ é™¤å…‰æ ‡å·¦ä¾§çš„ä¸€ä¸ªå­—ç¬¦ã€‚</td>
</tr>
<tr>
<td>KEYCODE_DONE</td>
<td>å°†ä¼šæ¿€å‘ä¸€ä¸ªKEYCODE_ENTER äº‹ä»¶ã€‚</td>
</tr>
<tr>
<td>KEYCODE_SHIFT</td>
<td>capså˜é‡çš„å€¼å°†ä¼šè¢«æ”¹å˜å¹¶ä¸”é€šè¿‡setShiftedæ–¹æ³•æ›´æ–°é”®ç›˜çš„çŠ¶æ€ã€‚æ•´ä¸ªé”®ç›˜éƒ½ä¼šè¢«é‡æ–°ç»˜åˆ¶æ¥ä¿è¯çŠ¶æ€æ”¹å˜ä¹‹åæŒ‰é”®çš„labelæ ‡ç­¾å¯ä»¥è¢«æ›´æ–°ã€‚å…¶ä¸­ï¼šinvalidateAllKeys æ–¹æ³•å°†å¯ä»¥é‡ç»˜æ‰€æœ‰æŒ‰é”®ã€‚</td>
</tr>
<tr>
<td>æ™®é€šé”®å€¼</td>
<td>å°†ä¼šè¢«ç®€å•çš„è½¬æ¢ä¸ºä¸€ä¸ªå­—ç¬¦ç„¶åå‘é€åˆ°æ–‡æœ¬è¾“å…¥åŸŸä¸­ï¼Œå¦‚æœcapså˜é‡è¢«è®¾ç½®ä¸ºtrueï¼Œé‚£ä¹ˆæŒ‰é”®å­—ç¬¦éƒ½å°†è¢«è½¬æ¢ä¸ºå¤§å†™ã€‚</td>
</tr>
</tbody>
</table>
<h2 id="ç¼–è¯‘è¿è¡Œ"><a href="#ç¼–è¯‘è¿è¡Œ" class="headerlink" title="ç¼–è¯‘è¿è¡Œ"></a>ç¼–è¯‘è¿è¡Œ</h2><p>ç¼–è¯‘è¿è¡Œï¼Œåœ¨æ‰‹æœºä¸Šè¿è¡Œçš„æ•ˆæœå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="http://i1.piimg.com/e15673195304af50.jpg" alt="" title="é”®ç›˜è¿è¡Œæ•ˆæœ"></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;&amp;emsp;&amp;emsp;ç”±äºæœ€è¿‘åšçš„ä¸€ä¸ªAndroidé¡¹ç›®éœ€è¦ç”¨åˆ°ç”¨æˆ·çš„è¾“å…¥ä¸€äº›å­—ç¬¦ï¼Œå¸¸è§„çš„è¾“å…¥æ³•è¾“å…¥éå¸¸çš„ä¸æ–¹ä¾¿ã€‚å› æ­¤æœ‰å¿…è¦è‡ªå®šä¹‰ä¸€ä¸ªè¾“å…¥æ³•æ¥å®Œæˆè¿™ä¸ªè¿‡ç¨‹ã€‚æ­¤å¤„ç»™å‡ºä¸€ä¸ªç®€å•çš„è¾“å…¥æ³•Demo&lt;br&gt;æ¥å¸®åŠ©ç†è§£è‡ªå®šä¹‰è¾“å…¥æ³•çš„ä¸€äº›å®ç°è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœ‰å…³è¾“å…¥æ³•çš„ä¸€äº›è¯´æ˜ï¼Œè¯·å‚è§:&lt;a href=&quot;http://notes.xiamo.tk/2015-04-01-Create-an-Android-IME.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Create a Android IME&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="Android" scheme="https://notes.wanghao.work/categories/Android/"/>
    
    
      <category term="Android" scheme="https://notes.wanghao.work/tags/Android/"/>
    
      <category term="IME" scheme="https://notes.wanghao.work/tags/IME/"/>
    
  </entry>
  
  <entry>
    <title>éƒ¨ç½²PPTP and OpenConnect VPN</title>
    <link href="https://notes.wanghao.work/2015-08-28-%E5%90%8C%E6%97%B6%E9%83%A8%E7%BD%B2PPTP-Server-and-OpenConnect-Server.html"/>
    <id>https://notes.wanghao.work/2015-08-28-åŒæ—¶éƒ¨ç½²PPTP-Server-and-OpenConnect-Server.html</id>
    <published>2015-08-28T15:17:55.000Z</published>
    <updated>2017-06-14T15:29:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç”±äºå‡ å¤©ä¹‹å‰<a href="https://github.com/clowwindy" target="_blank" rel="external">@clowwindy</a>è¢«æŸéƒ¨é—¨è¯·å–èŒ¶ï¼Œå¯¼è‡´ç°Githubä¸ŠShadowsocksé¡¹ç›®æºç è¢«è¿«å…¨éƒ¨æ¸…é™¤ã€‚éå¸¸æ„Ÿè°¢clowwindyæ‰€åšçš„ä¸€åˆ‡ï¼Œå¸Œæœ›ä»–ä¸€åˆ‡å®‰å¥½ã€‚</p>
<p>è™½ç„¶ç›®å‰Shadowsocksè¿˜èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œä½†æ˜¯ç”±äºé¡¹ç›®ä¸åœ¨æ›´æ–°ç»´æŠ¤ï¼Œè¿˜æ˜¯è¦å‡†å¤‡Shadowsocksçš„æ›¿ä»£å·¥å…·ï¼Œä»¥å¤‡ä¸æ—¶ä¹‹éœ€ï¼Œæ¯•ç«Ÿç»å¸¸è¦ä¸ŠGoogleä»¥åŠstackoverflowä»¥åŠæ—¶ä¸æ—¶çœ‹çœ‹YouTubeã€‚</p>
<h2 id="PPTP-Server"><a href="#PPTP-Server" class="headerlink" title="PPTP Server"></a>PPTP Server</h2><p>å¦‚æœå¯¹é€Ÿåº¦è¦æ±‚è¾ƒé«˜ï¼Œåˆä¸é‚£ä¹ˆåœ¨ä¹è¿æ¥çš„å®‰å…¨æ€§çš„è¯ï¼ŒPPTP VPN æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œæœ‰ç€å…¼å®¹æ€§è¾ƒå¥½,é€Ÿåº¦å¿«é…ç½®ç®€å•çš„ä¼˜ç‚¹ã€‚å½“ç„¶ä¹Ÿæœ‰ç€åŠ å¯†å¼ºåº¦ä¸å¤Ÿï¼Œè¿æ¥å¼ºåº¦ã€æŠ—å¹²æ‰°èƒ½åŠ›å¼±ç­‰ç¼ºç‚¹ï¼Œä½†æ˜¯åŸºæœ¬ä¸Šå¤Ÿç”¨å’¯~</p>
<a id="more"></a>
<h3 id="é…ç½®æ–¹æ³•"><a href="#é…ç½®æ–¹æ³•" class="headerlink" title="é…ç½®æ–¹æ³•"></a>é…ç½®æ–¹æ³•</h3><p>å¦‚ä½•é…ç½®PPTP VPNæœåŠ¡å™¨ï¼Œåšä¸»å†™äº†ä¸€ä¸ªç®€å•çš„è„šæœ¬æ¥è‡ªåŠ¨ä¸€é”®é…ç½®PPTPï¼Œè„šæœ¬åœ°å€ï¼š<a href="https://github.com/smilexiamo/AutoProxyScript" target="_blank" rel="external">https://github.com/smilexiamo/AutoProxyScript</a></p>
<p>å…·ä½“ç”¨æ³•æ­¤å¤„å°±ä¸å†èµ˜è¿°ï¼Œè¿è¡Œè„šæœ¬ç­‰ç€é…ç½®å®Œæˆå³å¯ä½¿ç”¨ã€‚</p>
<p><strong>éœ€è¦æ³¨æ„çš„æ˜¯è¯¥è„šæœ¬è¿è¡Œç¯å¢ƒä¸ºDebianæˆ–è€…Ubuntuã€‚ä¸é€‚ç”¨äºCentOSä¹‹ç±»çš„Red Hatç³»Linuxã€‚</strong></p>
<h3 id="æ·»åŠ PPTPç”¨æˆ·"><a href="#æ·»åŠ PPTPç”¨æˆ·" class="headerlink" title="æ·»åŠ PPTPç”¨æˆ·"></a>æ·»åŠ PPTPç”¨æˆ·</h3><p>ç¼–è¾‘<code>/etc/ppp/chap-secrets</code>æ–‡ä»¶ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vim /etc/ppp/chap-secrets</div></pre></td></tr></table></figure></p>
<p>æŒ‰ç…§å¦‚ä¸‹æ ¼å¼æ·»åŠ ç”¨æˆ·ï¼Œæ¯è¡Œä¸€ä¸ªå³å¯ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Secrets for authentication using CHAP</span></div><div class="line"><span class="comment"># client    server       secret       IP addresses</span></div><div class="line">  vpn_user01  pptpd    vpn_password01     *</div><div class="line">  vpn_user02  pptpd    vpn_password02     *</div></pre></td></tr></table></figure></p>
<h2 id="OpenConnect-Server"><a href="#OpenConnect-Server" class="headerlink" title="OpenConnect Server"></a>OpenConnect Server</h2><p>å¯¹äºæŸä¸€äº›å®‰å…¨æ€§è¦æ±‚æ¯”è¾ƒé«˜çš„åœºåˆï¼ŒPPTPå¯èƒ½å°±ä¸é‚£ä¹ˆé€‚åˆäº†ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ä½¿ç”¨OpenConnect VPNäº†ã€‚å®ƒé€šè¿‡å®ç°Ciscoçš„AnyConnectåè®®ï¼Œç”¨DTLSä½œä¸ºä¸»è¦çš„åŠ å¯†ä¼ è¾“åè®®ã€‚å…¶ä¸»è¦çš„æœ‰ç‚¹æœ‰ï¼š</p>
<ul>
<li>AnyConnectçš„VPNåè®®é»˜è®¤ä½¿ç”¨UDP DTLSä½œä¸ºæ•°æ®ä¼ è¾“ï¼Œä½†å¦‚æœæœ‰ä»€ä¹ˆç½‘ç»œé—®é¢˜å¯¼è‡´UDPä¼ è¾“å‡ºç°é—®é¢˜ï¼Œå®ƒä¼šåˆ©ç”¨æœ€åˆå»ºç«‹çš„TCP TLSé€šé“ä½œä¸ºå¤‡ä»½é€šé“ï¼Œé™ä½VPNæ–­å¼€çš„æ¦‚ç‡ã€‚</li>
<li>AnyConnectä½œä¸ºCiscoæ–°ä¸€ä»£çš„VPNè§£å†³æ–¹æ¡ˆï¼Œè¢«ç”¨äºè®¸å¤šå¤§å‹ä¼ä¸šï¼Œè¿™äº›ä¼ä¸šä¾èµ–å®ƒæä¾›æ­£å¸¸çš„å•†ä¸šè¿ä½œã€‚</li>
<li>OpenConnetçš„æ¶è®¾è¶³å¤Ÿéº»çƒ¦ï¼Œå¦‚æœä½ ä¸æ˜¯å¤§å‹ä¼ä¸šï¼Œä½ ä¼šç”¨AnyConnectçš„æ¦‚ç‡æ— é™è¶‹è¿‘äºé›¶ã€‚</li>
<li>æ”¯æŒè‡ªå®šä¹‰è·¯ç”±è¡¨ï¼Œå› æ­¤æ˜¯Shadowsocksæ¯”è¾ƒå¥½çš„æ›¿ä»£æ–¹æ¡ˆã€‚</li>
</ul>
<p>å½“ç„¶å•¦ï¼Œæœ‰è¿™ä¹ˆå¤šæœ‰ç‚¹ï¼Œé‚£ä¹ˆç¼ºç‚¹ä¹Ÿæ¯”è¾ƒæ˜æ˜¾äº†ï¼šé…ç½®éº»çƒ¦å¤æ‚ã€‚</p>
<h3 id="é…ç½®æ–¹æ³•-1"><a href="#é…ç½®æ–¹æ³•-1" class="headerlink" title="é…ç½®æ–¹æ³•"></a>é…ç½®æ–¹æ³•</h3><p>æœ‰å…³å¦‚ä½•é…ç½®çš„é—®é¢˜ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªåšä¸»æµ‹è¯•å¯ç”¨çš„è¿˜ç®—æ¯”è¾ƒå¹²å‡€çš„è„šæœ¬ï¼Œå¤§å¤§ç®€åŒ–äº†é…ç½®çš„æµç¨‹ï¼š<a href="https://github.com/fanyueciyuan/eazy-for-ss/tree/master/ocservauto" target="_blank" rel="external">https://github.com/fanyueciyuan/eazy-for-ss/tree/master/ocservauto</a></p>
<p>å…ˆè¿è¡Œåšä¸»çš„è„šæœ¬ï¼Œé…ç½®å¥½PPTPï¼Œåœ¨è¿è¡Œæ­¤è„šæœ¬é…ç½®å¥½OpenConnect Serverã€‚åšä¸»æµ‹è¯•è¿™ä¸¤ç§æœåŠ¡å™¨æ˜¯å¯ä»¥åŒæ—¶è¿è¡Œçš„ã€‚</p>
<h3 id="è¿æ¥æ–¹æ³•"><a href="#è¿æ¥æ–¹æ³•" class="headerlink" title="è¿æ¥æ–¹æ³•"></a>è¿æ¥æ–¹æ³•</h3><p>è™½ç„¶OpenConnect Serverå…¼å®¹Ciscoçš„Anyconnectï¼Œä½†æ˜¯åšä¸»åœ¨<a href="https://software.cisco.com/download/navigator.html?mdfid=278875403&amp;flowid=17001" target="_blank" rel="external">windows</a>ä»¥åŠ<a href="https://play.google.com/store/apps/details?id=com.cisco.anyconnect.vpn.android.avf" target="_blank" rel="external">Androidå¹³å°</a>ä½¿ç”¨Ciscoå®˜æ–¹çš„å®¢æˆ·ç«¯å‡å‡ºç°å¯ä»¥è¿æ¥ä½†æ˜¯æ— æ³•è®¿é—®ç½‘ç»œçš„é—®é¢˜ã€‚æ”¹ç”¨OpenConnect Serverå®˜æ–¹æ¨èçš„å®¢æˆ·ç«¯å°±æ­£å¸¸äº†ã€‚ä»¥ä¸‹ç»™å‡ºOpenConnect Serverå®˜æ–¹å®¢æˆ·ç«¯é“¾æ¥ï¼š</p>
<ul>
<li><a href="https://github.com/openconnect/openconnect-gui/releases" target="_blank" rel="external">Windows OpenConnect-GUI</a></li>
<li><a href="https://github.com/openconnect/openconnect-gui/wiki/MacOSX" target="_blank" rel="external">MacOSX OpenConnect-GUI</a></li>
<li><a href="https://play.google.com/store/apps/details?id=app.openconnect" target="_blank" rel="external">Android OpenConnect-GUI</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç”±äºå‡ å¤©ä¹‹å‰&lt;a href=&quot;https://github.com/clowwindy&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;@clowwindy&lt;/a&gt;è¢«æŸéƒ¨é—¨è¯·å–èŒ¶ï¼Œå¯¼è‡´ç°Githubä¸ŠShadowsocksé¡¹ç›®æºç è¢«è¿«å…¨éƒ¨æ¸…é™¤ã€‚éå¸¸æ„Ÿè°¢clowwindyæ‰€åšçš„ä¸€åˆ‡ï¼Œå¸Œæœ›ä»–ä¸€åˆ‡å®‰å¥½ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶ç›®å‰Shadowsocksè¿˜èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œä½†æ˜¯ç”±äºé¡¹ç›®ä¸åœ¨æ›´æ–°ç»´æŠ¤ï¼Œè¿˜æ˜¯è¦å‡†å¤‡Shadowsocksçš„æ›¿ä»£å·¥å…·ï¼Œä»¥å¤‡ä¸æ—¶ä¹‹éœ€ï¼Œæ¯•ç«Ÿç»å¸¸è¦ä¸ŠGoogleä»¥åŠstackoverflowä»¥åŠæ—¶ä¸æ—¶çœ‹çœ‹YouTubeã€‚&lt;/p&gt;
&lt;h2 id=&quot;PPTP-Server&quot;&gt;&lt;a href=&quot;#PPTP-Server&quot; class=&quot;headerlink&quot; title=&quot;PPTP Server&quot;&gt;&lt;/a&gt;PPTP Server&lt;/h2&gt;&lt;p&gt;å¦‚æœå¯¹é€Ÿåº¦è¦æ±‚è¾ƒé«˜ï¼Œåˆä¸é‚£ä¹ˆåœ¨ä¹è¿æ¥çš„å®‰å…¨æ€§çš„è¯ï¼ŒPPTP VPN æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œæœ‰ç€å…¼å®¹æ€§è¾ƒå¥½,é€Ÿåº¦å¿«é…ç½®ç®€å•çš„ä¼˜ç‚¹ã€‚å½“ç„¶ä¹Ÿæœ‰ç€åŠ å¯†å¼ºåº¦ä¸å¤Ÿï¼Œè¿æ¥å¼ºåº¦ã€æŠ—å¹²æ‰°èƒ½åŠ›å¼±ç­‰ç¼ºç‚¹ï¼Œä½†æ˜¯åŸºæœ¬ä¸Šå¤Ÿç”¨å’¯~&lt;/p&gt;
    
    </summary>
    
      <category term="æŠ˜è…¾" scheme="https://notes.wanghao.work/categories/%E6%8A%98%E8%85%BE/"/>
    
    
      <category term="Proxy" scheme="https://notes.wanghao.work/tags/Proxy/"/>
    
  </entry>
  
  <entry>
    <title>MySQLå¼€å¯è¿œç¨‹è®¿é—®æˆæƒ</title>
    <link href="https://notes.wanghao.work/2015-08-20-MySQL%E5%BC%80%E5%90%AF%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90.html"/>
    <id>https://notes.wanghao.work/2015-08-20-MySQLå¼€å¯è¿œç¨‹è®¿é—®æƒé™.html</id>
    <published>2015-08-20T09:39:55.000Z</published>
    <updated>2016-11-06T01:31:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨åšå¼€å‘æµ‹è¯•çš„æ—¶å€™ï¼Œç»å¸¸ä¼šç”¨åˆ°MySQLæ•°æ®åº“ã€‚æµ‹è¯•ä½¿ç”¨çš„æ•°æ®åº“ä¸åœ¨æœ¬æœºä¸Šè€Œåœ¨è™šæ‹Ÿæœºé‡Œï¼Œè®¿é—®æ•°æ®åº“å°±æ¯”è¾ƒè›‹ç¢äº†ã€‚å› ä¸ºMySQLæ•°æ®åº“é»˜è®¤æ˜¯æ²¡æœ‰å¼€æ”¾è¿œç¨‹è®¿é—®æˆæƒçš„ã€‚ä¸èƒ½å¤Ÿç›´æ¥è®¿é—®ï¼Œä¸‹é¢ä»‹ç»ä¸¤ç§å¸¸ç”¨çš„å¼€å¯MySQLè¿œç¨‹è®¿é—®æƒé™å¼€å¯æ–¹æ³•:</p>
<h3 id="æ–¹æ³•ä¸€ï¼šä¿®æ”¹userè¡¨å¼€å¯è¿œç¨‹è®¿é—®"><a href="#æ–¹æ³•ä¸€ï¼šä¿®æ”¹userè¡¨å¼€å¯è¿œç¨‹è®¿é—®" class="headerlink" title="æ–¹æ³•ä¸€ï¼šä¿®æ”¹userè¡¨å¼€å¯è¿œç¨‹è®¿é—®"></a>æ–¹æ³•ä¸€ï¼šä¿®æ”¹<code>user</code>è¡¨å¼€å¯è¿œç¨‹è®¿é—®</h3><p>åœ¨ç»ˆç«¯ä¸­é”®å…¥ä»¥ä¸‹å‘½ä»¤ç™»å½•MySQLæ•°æ®åº“:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql -uROOT -pPASSWORD</div></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œ<font color="red"><code>ROOT</code></font>è¡¨ç¤ºç™»å½•çš„ç”¨æˆ·åï¼Œ<font color="red"><code>PASSWORD</code></font>è¡¨ç¤ºç™»å½•çš„è¯¥ç”¨æˆ·çš„å¯†ç ã€‚ç™»å½•æˆåŠŸä¹‹åï¼Œè®¿é—®<code>mysql</code>æ•°æ®åº“ï¼Œä¾æ¬¡æ‰§è¡Œä»¥ä¸‹SQLè¯­å¥:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mysql&gt;  use mysql;</div><div class="line">mysql&gt;  select host,user from user;</div></pre></td></tr></table></figure>
<a id="more"></a>
<p>å°†ä¼šæ‰“å°å‡ºMySQLæ•°æ®åº“ä¸­æ‰€æœ‰ç”¨æˆ·ä»¥åŠå…¶æˆæƒè®¿é—®åœ°å€ï¼Œä»¥åšä¸»çš„ä¸ºæµ‹è¯•æ•°æ®åº“ä¸ºä¾‹ï¼Œæ‰“å°ä¿¡æ¯å¦‚ä¸‹:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">+-------------------------+------------------+</div><div class="line">| host                    | user             |</div><div class="line">+-------------------------+------------------+</div><div class="line">| 127.0.0.1               | root             |</div><div class="line">| ::1                     | root             |</div><div class="line">| localhost               | debian-sys-maint |</div><div class="line">| localhost               | root             |</div><div class="line">| xiamo-virtual-machine   | root             |</div><div class="line">+-------------------------+------------------+</div><div class="line">5 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<font color="red"><code>host</code></font>æ è¡¨ç¤ºç™»å½•ä¸»æœºï¼Œå¯ä»¥æ˜¯ipåœ°å€æˆ–è€…ä¸»æœºåï¼Œä¸éš¾å‘ç°å…¶å®ä»–ä»¬éƒ½æ˜¯è™šæ‹Ÿæœºæœ¬åœ°åœ°å€ï¼Œå› æ­¤æˆ‘ä»¬æ˜¯æ²¡åŠæ³•ä»ç‰©ç†æœºè®¿é—®è¯¥æ•°æ®åº“çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åªéœ€è¦æ›´æ”¹ç™»å½•ä¸»æœºçš„<font color="red"><code>host</code></font>æ ç›®é‡Œçš„åœ°å€ï¼Œä¾¿å¯ä»¥åœ¨è¿œç¨‹ä¸»æœºä¸Šè®¿é—®äº†ã€‚</p>
<p>æ¯”å¦‚åšä¸»é€šè¿‡<code>æ¡¥æ¥æ¨¡å¼</code>ä¸è™šæ‹Ÿæœºç›¸è¿æ¥ï¼Œç‰©ç†æœºçš„ipåœ°å€ä¸º<code>192.168.1.101</code>,è™šæ‹Ÿæœºçš„ipåœ°å€ä¸º<code>192.168.1.103</code>ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œä»¥ä¸‹SQLè¯­å¥æ¥è¾¾åˆ°è¿œç¨‹è®¿é—®MySQL:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mysql&gt;  use mysql;</div><div class="line">mysql&gt;  update user <span class="built_in">set</span> host=<span class="string">'192.168.1.101'</span> <span class="built_in">where</span> user=<span class="string">'root'</span> and host=<span class="string">'127.0.0.1'</span>;</div></pre></td></tr></table></figure>
<p>ç„¶åå†æ‰§è¡Œä»¥ä¸‹å‘½ä»¤é‡å¯MySQLå³å¯é€šè¿‡ç‰©ç†æœºè®¿é—®MySQLå•¦:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo service mysql restart</div></pre></td></tr></table></figure></p>
<p>ä¹Ÿå¯ä»¥æ‰§è¡Œä»¥ä¸‹SQLè¯­å¥åˆ·æ–°æˆæƒä¿¡æ¯æ¥è¾¾åˆ°ä¸é‡å¯MySQLå³å¯è¿œç¨‹è®¿é—®:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql&gt;  FLUSH PRIVILEGES;</div></pre></td></tr></table></figure></p>
<p>å½“ç„¶ï¼Œåœ¨å¤§å¤šæ•°æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½å¸Œæœ›å¯ä»¥ä»ä»»æ„ipåœ°å€è®¿é—®ï¼Œè€Œä¸æ˜¯ä»…é™äºæŒ‡å®šçš„ipï¼Œè¿™æ ·å°±ç®—ipåœ°å€å˜åŠ¨ä¹Ÿä¸ä¼šå†æ¬¡æŠ˜è…¾ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥æ‰§è¡Œä»¥ä¸‹SQL:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mysql&gt;  use mysql;</div><div class="line">mysql&gt;  update user <span class="built_in">set</span> host=<span class="string">'%'</span> <span class="built_in">where</span> user=<span class="string">'root'</span> and host=<span class="string">'127.0.0.1'</span>;</div></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œå°†<font color="red"><code>host</code></font>å€¼æ”¹ä¸º<font color="red"><code>%</code></font>,å°±å¯ä»¥åœ¨ä»»æ„ä¸»æœºç™»å½•åˆ°MySQLå’¯ã€‚</p>
<h3 id="æ–¹æ³•äºŒï¼šé€šè¿‡æˆæƒè¯­å¥å¼€å¯è¿œç¨‹è®¿é—®"><a href="#æ–¹æ³•äºŒï¼šé€šè¿‡æˆæƒè¯­å¥å¼€å¯è¿œç¨‹è®¿é—®" class="headerlink" title="æ–¹æ³•äºŒï¼šé€šè¿‡æˆæƒè¯­å¥å¼€å¯è¿œç¨‹è®¿é—®"></a>æ–¹æ³•äºŒï¼šé€šè¿‡æˆæƒè¯­å¥å¼€å¯è¿œç¨‹è®¿é—®</h3><p>ä¸ä¿®æ”¹userè¡¨çš„æ–¹æ³•ç›¸åŒï¼Œåœ¨ç»ˆç«¯ä¸­è¿æ¥åˆ°MySQLæ•°æ®åº“ã€‚ç„¶åæ‰§è¡Œä»¥ä¸‹SQLè¯­å¥å³å¯æˆæƒæŒ‡å®šç”¨æˆ·è¿œç¨‹è®¿é—®MySQL:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mysql&gt;  grant all privileges  on *.* to USERNAME@<span class="string">'%'</span> identified by <span class="string">"PASSWORD"</span>;</div><div class="line">mysql&gt;  FLUSH PRIVILEGES;</div></pre></td></tr></table></figure></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå…¶ä¸­<code>*.*</code>çš„å«ä¹‰ä¸ºï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ª<font color="red"><code>*</code></font>ä¸ºMySQLä¸­çš„æ•°æ®åº“åã€‚</li>
<li>ç¬¬äºŒä¸ª<font color="red"><code>*</code></font>ä¸ºMySQLä¸­çš„æŒ‡å®šçš„æ•°æ®åº“çš„è¡¨åã€‚</li>
<li><font color="red"><code>USERNAME</code></font>ä¸ºæˆæƒç”¨æˆ·çš„ç”¨æˆ·åã€‚</li>
<li><font color="red"><code>%</code></font>ä¸ºä»»æ„ä¸»æœºï¼Œä¹Ÿå¯ä»¥å†™æŒ‡å®šçš„ipåœ°å€æˆ–è€…ä¸»æœºåã€‚</li>
<li><font color="red"><code>PASSWORD</code></font>ä¸ºæˆæƒæ”¹ç”¨æˆ·åœ¨æŒ‡å®šçš„æ•°æ®è®¿é—®MySQLæ—¶çš„å¯†ç ï¼Œ<strong>å¦‚æœè¯¥å¯†ç å’Œæœ¬åœ°ç”¨æˆ·åŒåç”¨æˆ·çš„å¯†ç ä¸ä¸€è‡´ï¼Œè¿œç¨‹è®¿é—®æ—¶åŠ¡å¿…ä½¿ç”¨è¯¥æˆæƒå¯†ç </strong>ã€‚</li>
</ul>
<h3 id="è§£å†³Linuxä¸‹ï¼ŒMySQLä¸­æ–‡ä¹±ç é—®é¢˜"><a href="#è§£å†³Linuxä¸‹ï¼ŒMySQLä¸­æ–‡ä¹±ç é—®é¢˜" class="headerlink" title="è§£å†³Linuxä¸‹ï¼ŒMySQLä¸­æ–‡ä¹±ç é—®é¢˜"></a>è§£å†³Linuxä¸‹ï¼ŒMySQLä¸­æ–‡ä¹±ç é—®é¢˜</h3><p>é¦–å…ˆï¼Œå½“ç„¶æ˜¯ç¡®ä¿è¡¨æˆ–è€…åˆ›å»ºçš„æ•°æ®åº“çš„ç¼–ç æ–¹å¼ä¸º<code>UTF-8</code>å•¦ï¼Œåœ¨è¿™äº›éƒ½æ²¡é—®é¢˜çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹SQLè¯­å¥ï¼ŒæŸ¥çœ‹MySQLçš„ç¼–ç æƒ…å†µï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql&gt;  show variables like <span class="string">'character%'</span>;</div></pre></td></tr></table></figure></p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå°†ä¼šå¾—åˆ°ä»¥ä¸‹ç»“æœ:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">+--------------------------+----------------------------+</div><div class="line">| Variable_name            | Value                      |</div><div class="line">+--------------------------+----------------------------+</div><div class="line">| character_set_client     | utf8                       |</div><div class="line">| character_set_connection | utf8                       |</div><div class="line">| character_set_database   | latin1                     |</div><div class="line">| character_set_filesystem | binary                     |</div><div class="line">| character_set_results    | utf8                       |</div><div class="line">| character_set_server     | latin1                     |</div><div class="line">| character_set_system     | utf8                       |</div><div class="line">| character_sets_dir       | /usr/share/mysql/charsets/ |</div><div class="line">+--------------------------+----------------------------+</div><div class="line">8 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</div></pre></td></tr></table></figure></p>
<p>æ­¤æ—¶ï¼Œæˆ‘ä»¬ä¿®æ”¹ä½äº<font color="red"><code>/etc/mysql/my.cnf</code></font>çš„<font color="red"><code>my.cnf</code></font>æ–‡ä»¶:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vim /etc/mysql/my.cnf</div></pre></td></tr></table></figure></p>
<p>åœ¨<font color="red"><code>[client]</code></font>ä¸­åŠ å…¥:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">default-character-set=utf8</div></pre></td></tr></table></figure></p>
<p>åœ¨<font color="red"><code>[mysqld]</code></font>ä¸­åŠ å…¥:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">character-set-server=utf8</div></pre></td></tr></table></figure></p>
<p>é€€å‡ºä¿å­˜ä¹‹åé‡å¯MySQLï¼Œå†æ¬¡æ‰§è¡Œï¼Œå¾—åˆ°å¦‚ä¸‹ç»“æœ:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">mysql&gt;  show variables like <span class="string">'character%'</span>;</div><div class="line">+--------------------------+----------------------------+</div><div class="line">| Variable_name            | Value                      |</div><div class="line">+--------------------------+----------------------------+</div><div class="line">| character_set_client     | utf8                       |</div><div class="line">| character_set_connection | utf8                       |</div><div class="line">| character_set_database   | utf8                       |</div><div class="line">| character_set_filesystem | binary                     |</div><div class="line">| character_set_results    | utf8                       |</div><div class="line">| character_set_server     | utf8                       |</div><div class="line">| character_set_system     | utf8                       |</div><div class="line">| character_sets_dir       | /usr/share/mysql/charsets/ |</div><div class="line">+--------------------------+----------------------------+</div><div class="line">8 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</div></pre></td></tr></table></figure></p>
<p>å³å¯çœ‹åˆ°ç¼–ç éƒ½ä¸ºUTF-8å•¦~</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨åšå¼€å‘æµ‹è¯•çš„æ—¶å€™ï¼Œç»å¸¸ä¼šç”¨åˆ°MySQLæ•°æ®åº“ã€‚æµ‹è¯•ä½¿ç”¨çš„æ•°æ®åº“ä¸åœ¨æœ¬æœºä¸Šè€Œåœ¨è™šæ‹Ÿæœºé‡Œï¼Œè®¿é—®æ•°æ®åº“å°±æ¯”è¾ƒè›‹ç¢äº†ã€‚å› ä¸ºMySQLæ•°æ®åº“é»˜è®¤æ˜¯æ²¡æœ‰å¼€æ”¾è¿œç¨‹è®¿é—®æˆæƒçš„ã€‚ä¸èƒ½å¤Ÿç›´æ¥è®¿é—®ï¼Œä¸‹é¢ä»‹ç»ä¸¤ç§å¸¸ç”¨çš„å¼€å¯MySQLè¿œç¨‹è®¿é—®æƒé™å¼€å¯æ–¹æ³•:&lt;/p&gt;
&lt;h3 id=&quot;æ–¹æ³•ä¸€ï¼šä¿®æ”¹userè¡¨å¼€å¯è¿œç¨‹è®¿é—®&quot;&gt;&lt;a href=&quot;#æ–¹æ³•ä¸€ï¼šä¿®æ”¹userè¡¨å¼€å¯è¿œç¨‹è®¿é—®&quot; class=&quot;headerlink&quot; title=&quot;æ–¹æ³•ä¸€ï¼šä¿®æ”¹userè¡¨å¼€å¯è¿œç¨‹è®¿é—®&quot;&gt;&lt;/a&gt;æ–¹æ³•ä¸€ï¼šä¿®æ”¹&lt;code&gt;user&lt;/code&gt;è¡¨å¼€å¯è¿œç¨‹è®¿é—®&lt;/h3&gt;&lt;p&gt;åœ¨ç»ˆç«¯ä¸­é”®å…¥ä»¥ä¸‹å‘½ä»¤ç™»å½•MySQLæ•°æ®åº“:&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;mysql -uROOT -pPASSWORD&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å…¶ä¸­ï¼Œ&lt;font color=&quot;red&quot;&gt;&lt;code&gt;ROOT&lt;/code&gt;&lt;/font&gt;è¡¨ç¤ºç™»å½•çš„ç”¨æˆ·åï¼Œ&lt;font color=&quot;red&quot;&gt;&lt;code&gt;PASSWORD&lt;/code&gt;&lt;/font&gt;è¡¨ç¤ºç™»å½•çš„è¯¥ç”¨æˆ·çš„å¯†ç ã€‚ç™»å½•æˆåŠŸä¹‹åï¼Œè®¿é—®&lt;code&gt;mysql&lt;/code&gt;æ•°æ®åº“ï¼Œä¾æ¬¡æ‰§è¡Œä»¥ä¸‹SQLè¯­å¥:&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;mysql&amp;gt;  use mysql;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;mysql&amp;gt;  select host,user from user;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="æ•°æ®åº“" scheme="https://notes.wanghao.work/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
      <category term="MySQL" scheme="https://notes.wanghao.work/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>å¼€å¯NexTä¸»é¢˜å¤šè¯´ä¸»åŠ¨è¯„è®ºé‚®ä»¶é€šçŸ¥</title>
    <link href="https://notes.wanghao.work/2015-07-25-%E5%A4%9A%E8%AF%B4%E4%B8%BB%E5%8A%A8%E9%82%AE%E4%BB%B6%E6%8F%90%E9%86%92.html"/>
    <id>https://notes.wanghao.work/2015-07-25-å¤šè¯´ä¸»åŠ¨é‚®ä»¶æé†’.html</id>
    <published>2015-07-25T04:00:22.000Z</published>
    <updated>2016-11-06T01:31:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç»è¿‡ä¸€æ®µæ—¶é—´çš„æŠ˜è…¾å¤šè¯´ï¼Œåšä¸»å‘ç°åŸæ¥å¤šè¯´æ˜¯ä¸æ”¯æŒä¸»åŠ¨è¯„è®ºæé†’çš„ã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æœåœ¨ä¸€ç¯‡åšå®¢ä¸­æœ‰äººä¸»åŠ¨è¯„è®ºç•™è¨€çš„è¯ï¼Œå¤šè¯´æ˜¯ä¸ä¼šé‚®ä»¶é€šçŸ¥çš„ã€‚é™¤éä»–å›å¤äº†ä½ ï¼Œé‚£ä¹ˆå¤šè¯´æ‰ä¼šé‚®ä»¶é€šçŸ¥ã€‚ï¼ˆæ€ªä¸å¾—åšä¸»è§‰å¾—ä¸€ä¼šå„¿æœ‰é‚®ä»¶æé†’ä¸€ä¼šå„¿æ²¡æœ‰å’‹ä¸ªè¿™ä¹ˆå¥‡æ€ªã€‚ã€‚ï¼‰</p>
<hr>
<p>å»å¤šè¯´çš„å®˜æ–¹ä¸€ç•ªæŠ˜è…¾ï¼Œæ‰¾åˆ°äº†å®˜æ–¹æ–‡æ¡£ï¼Œæœ‰è¯´åˆ°ä½¿ç”¨<code>data-author-key</code>å¯ä»¥è®¾ç½®ä¸»åŠ¨é‚®ä»¶æé†’,ä»¥ä¸‹ç»™å‡ºå¤šè¯´å®˜ç½‘è¯´æ˜çš„ä¼ é€é—¨ï¼š</p>
<ul>
<li><strong><a href="http://dev.duoshuo.com/docs/51435552047fe92f490225de" target="_blank" rel="external">åŒæ­¥ç”¨æˆ·åˆ°å¤šè¯´</a></strong></li>
<li><strong><a href="http://dev.duoshuo.com/docs/5003ecd94cab3e7250000008/" target="_blank" rel="external">è¯„è®ºæ¡†è°ƒç”¨ä»£ç å‚æ•°è¯´æ˜</a></strong></li>
</ul>
<a id="more"></a>
<p>é€šè¿‡ä¸Šé¢çš„é“¾æ¥æŸ¥çœ‹å¤šè¯´çš„APIè¯´æ˜ï¼Œä¸éš¾çœ‹è¦æƒ³å®ç°è¯„è®ºä¸»åŠ¨é‚®ä»¶é€šçŸ¥ï¼Œåªéœ€è¦:</p>
<ul>
<li>è‡ªå®šä¹‰åŒæ­¥ä¸€ä¸ªç”¨æˆ·åˆ°å¤šè¯´çš„æœåŠ¡å™¨ã€‚</li>
<li>å°†è¿™ä¸ªåŒæ­¥çš„ç”¨æˆ·åœ¨ç«™ç‚¹ä¸­çš„èº«ä»½è®¾ç½®ä¸ºä½œè€…ã€‚</li>
<li>å–å¾—è‡ªå®šä¹‰ç”¨æˆ·åœ¨ç«™ç‚¹ä¸­çš„IDã€‚</li>
<li>å°†è¿™ä¸ªIDä½œä¸º<code>data-author-key</code>çš„å€¼åŠ åœ¨ç«™ç‚¹çš„å¤šè¯´è¯„è®ºæ¡†ä¸­å³å¯ã€‚</li>
</ul>
<p>å®ç°ä¸Šè¿°æ“ä½œä¹‹åï¼Œå½“å…¶ä»–ç”¨æˆ·è¯„è®ºå¸¦æœ‰<code>data-author-key</code>æ ‡ç¤ºçš„æ–‡ç« æ—¶ï¼Œå¤šè¯´æœåŠ¡å™¨ä¼šé»˜è®¤ä¸ºåœ¨å‘æˆ‘ä»¬è‡ªå®šä¹‰çš„ä½œè€…ç”¨æˆ·è¯„è®ºï¼Œä¾¿ä¼šå‘æˆ‘ä»¬è‡ªå®šä¹‰ç”¨æˆ·çš„é‚®ç®±å‘é€é‚®ä»¶æé†’å•¦~</p>
<hr>
<p>åˆ†æäº†åŸç†ä¹‹åï¼Œæˆ‘ä»¬å…·ä½“åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p>
<p>å¾ˆç®€å•ï¼Œåªéœ€è¦å‘å¤šè¯´æä¾›çš„åŒæ­¥ç”¨æˆ·æ¥å£å‘ä¸ªPOSTå°±è¡Œäº†ã€‚è¯­è¨€ä¸é™ï¼Œä¸è¿‡æ—¢ç„¶æˆ‘ä»¬ç”¨çš„æ˜¯Hexoï¼Œé‚£å°±ä»¥NodeJSä¸ºä¾‹å§ï¼š</p>
<ul>
<li><strong>éšä¾¿åœ¨å“ªä¸ªåœ°æ–¹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹</strong>ï¼ˆå°±æ˜¯è¿™ä¹ˆéšæ„~ï¼‰</li>
<li><strong>è¿›å…¥è¯¥æ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤:</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev request</div></pre></td></tr></table></figure>
<ul>
<li><strong>æ–°å»ºä¸€ä¸ª<code>adduser.js</code>æ–‡ä»¶ï¼Œå°†ä¸‹é¢çš„ä»£ç ç²˜è´´è¿›å»ï¼Œå¹¶ä¿®æ”¹<code>data</code>ä¸­çš„æ•°æ®: </strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'request'</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> data = &#123;</div><div class="line">  <span class="string">'short_name'</span>         : <span class="string">''</span>,     <span class="comment">// ä½ çš„short_nameï¼Œåå°ç®¡ç†é‚£é‡Œå¯ä»¥çœ‹åˆ°</span></div><div class="line">  <span class="string">'secret'</span>             : <span class="string">''</span>,     <span class="comment">// å¯†é’¥ï¼Œåå°ç®¡ç†é‚£é‡Œå¯ä»¥çœ‹åˆ°</span></div><div class="line">  <span class="string">'users[0][user_key]'</span> : <span class="string">'1'</span>,    <span class="comment">// ç”¨æˆ·åœ¨ç«™ç‚¹çš„IDï¼Œå°±æ˜¯åé¢éœ€è¦è®¾ç½®çš„ data-author-keyå€¼ï¼Œå¯ä»¥éšæ„è®¾ç½®ï¼Œè¿™é‡Œé»˜è®¤ä¸º1å§</span></div><div class="line">  <span class="string">'users[0][name]'</span>     : <span class="string">''</span>,     <span class="comment">// æ˜¾ç¤ºçš„åå­—</span></div><div class="line">  <span class="string">'users[0][email]'</span>    : <span class="string">''</span>,     <span class="comment">// æé†’çš„é‚®ç®±</span></div><div class="line">  <span class="string">'users[0][role]'</span>     : <span class="string">'author'</span><span class="comment">// ç”¨æˆ·çš„ç±»å‹ï¼Œè®¾ç½®ä¸ºä½œè€…</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line">http.post(&#123;<span class="attr">url</span>:<span class="string">'http://api.duoshuo.com/users/import.json'</span>, <span class="attr">form</span>: data&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error, response, body</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (!error &amp;&amp; response.statusCode == <span class="number">200</span>) &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Post data to Duoshuo success'</span>);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">else</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Post data to Duoshuo fail'</span>);</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>å°†ä¸Šé¢çš„ä»£ç ä¸­dataä¸­çš„æ•°æ®æŒ‰ç…§è‡ªå·±çš„å¤šè¯´è´¦æˆ·è®¾ç½®å¥½ä¹‹åï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®Œæˆæ•°æ®åŒæ­¥åˆ°å¤šè¯´æœåŠ¡å™¨:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">node adduser.js</div></pre></td></tr></table></figure></p>
<ul>
<li>å¦‚æœè¾“å‡ºä¸º<code>Post data to Duoshuo fail</code>,é‚£ä¹ˆæ£€å¯Ÿä¸€ä¸‹dataæ•°æ®æ˜¯å¦ä¿®æ”¹æ­£ç¡®ï¼Œæˆ–è€…ç›´æ¥ç»™æˆ‘ç•™è¨€æ’æŸ¥é—®é¢˜ã€‚</li>
<li>å¦‚æœè¾“å‡ºä¸º<code>Post data to Duoshuo success</code>,é‚£ä¹ˆå°±å¯ä»¥ç™»å½•åˆ°å¤šè¯´çš„åå°ï¼Œåœ¨ç”¨æˆ·é‚£é‡Œçœ‹åˆ°æ–°æ·»åŠ çš„ç”¨æˆ·äº†ï¼Œç±»ä¼¼è¿™æ ·:<br><img src="http://7xkj6q.com1.z0.glb.clouddn.com/blog/image/jpg/1137805359113768cao.jpg" alt="" title="å¤šè¯´ç”¨æˆ·ç•Œé¢"></li>
</ul>
<p>å¦‚æœè§’è‰²ä¸æ˜¯ä½œè€…çš„è¯ï¼Œæ‰‹åŠ¨æ›´æ”¹ä¸ºä½œè€…ã€‚ç„¶åæˆ‘ä»¬æ‰¾åˆ°<code>NexT</code>ä¸»é¢˜çš„<code>layout/_layout.swig</code>æ–‡ä»¶ï¼Œæ‰“å¼€å¹¶æ‰¾åˆ°è¿™æ®µä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123;% <span class="keyword">if</span> page.comments %&#125;</div><div class="line">             &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"comments"</span> id=<span class="string">"comments"</span>&gt;</div><div class="line">               &#123;% <span class="keyword">if</span> (config.duoshuo and config.duoshuo.shortname) or config.duoshuo_shortname %&#125;</div><div class="line">                 &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"ds-thread"</span> data-thread-key=<span class="string">"&#123;&#123; page.path &#125;&#125;"</span></div><div class="line">                      data-title=<span class="string">"&#123;&#123; page.title &#125;&#125;"</span> data-url=<span class="string">"&#123;&#123; page.permalink &#125;&#125;"</span>&gt;</div><div class="line">                 &lt;<span class="regexp">/div&gt;</span></div></pre></td></tr></table></figure>
<p>å°†å…¶ä¿®æ”¹ä¸º:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123;% <span class="keyword">if</span> page.comments %&#125;</div><div class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"comments"</span> id=<span class="string">"comments"</span>&gt;</div><div class="line">    &#123;% <span class="keyword">if</span> (config.duoshuo and config.duoshuo.shortname) or config.duoshuo_shortname %&#125;</div><div class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"ds-thread"</span> data-thread-key=<span class="string">"&#123;&#123; page.path &#125;&#125;"</span></div><div class="line">           data-title=<span class="string">"&#123;&#123; page.title &#125;&#125;"</span> data-url=<span class="string">"&#123;&#123; page.permalink &#125;&#125;"</span> data-author-key=<span class="string">"&#123;&#123; theme.duoshuo_info.data_author_key &#125;&#125;"</span>&gt;</div><div class="line">      &lt;<span class="regexp">/div&gt;</span></div></pre></td></tr></table></figure></p>
<p>ç„¶ååœ¨ä¸»é¢˜çš„é…ç½®æ–‡ä»¶<code>_config.yml</code>æ–‡ä»¶ä¸­å¢åŠ ä»¥ä¸‹ä¸€è¡Œé…ç½®:<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attr">duoshuo_info:</span></div><div class="line"><span class="attr">  data_author_key:</span> <span class="number">1</span> <span class="comment">#æ­¤å¤„å¡«å†™ä¸Šé¢jsè„šæœ¬ä¸­çš„dataå˜é‡ä¸­çš„users[0][user_key]çš„å€¼ï¼Œå› ä¸ºä¸Šé¢ä¸º1ï¼Œè¿™é‡Œæˆ‘å°±å¡«å†™ä¸º1äº†ã€‚</span></div></pre></td></tr></table></figure></p>
<p>å½“ç„¶ä½ å¯ä»¥ä¹Ÿå¯ç›´æ¥å†™æ­»ä¸º1ï¼Œåƒè¿™ä¸ªæ ·å­:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123;% <span class="keyword">if</span> page.comments %&#125;</div><div class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"comments"</span> id=<span class="string">"comments"</span>&gt;</div><div class="line">    &#123;% <span class="keyword">if</span> (config.duoshuo and config.duoshuo.shortname) or config.duoshuo_shortname %&#125;</div><div class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"ds-thread"</span> data-thread-key=<span class="string">"&#123;&#123; page.path &#125;&#125;"</span></div><div class="line">           data-title=<span class="string">"&#123;&#123; page.title &#125;&#125;"</span> data-url=<span class="string">"&#123;&#123; page.permalink &#125;&#125;"</span> data-author-key=<span class="string">"1"</span>&gt;</div><div class="line">      &lt;<span class="regexp">/div&gt;</span></div></pre></td></tr></table></figure></p>
<p>ç„¶åé‡æ–°åšå®¢æ–‡ä»¶å¹¶å‘å¸ƒï¼Œè¿™æ ·åœ¨å°±å¯ä»¥å½“å…¶ä»–äººè¯„è®ºä½ çš„åšå®¢çš„æ—¶å€™ä¸»åŠ¨å‘é‚®ä»¶é€šçŸ¥å•¦~åƒè¿™ä¸ªæ ·å­çš„:</p>
<p><img src="http://7xkj6q.com1.z0.glb.clouddn.com/blog/image/jpg/1137805358f327217do.jpg" alt="" title="å¤šè¯´ä¸»åŠ¨æé†’ç¤ºä¾‹"></p>
<p>åƒè¿™æ ·å­ï¼Œå°±è®©æˆ‘ä»¬çš„<code>NexT</code>æ”¯æŒå¤šè¯´ä¸»åŠ¨è¯„è®ºé‚®ä»¶é€šçŸ¥å•¦ï¼Œæ„Ÿè°¢<a href="http://www.arao.me/" target="_blank" rel="external">@arao</a>çš„å‹æƒ…å‡ºé•œ~</p>
<p><strong>PS:è¿™ç§é‚®ä»¶æé†’ä¸æ˜¯å®æ—¶æé†’ï¼Œè€Œæ˜¯æ¯å¤©ä¸€å°æ±‡æ€»é‚®ä»¶ã€‚å¦‚æœä½ ä¸­é€”æŸ¥çœ‹äº†è¿™ä¸ªè¯„è®ºçš„è¯ï¼Œä¹Ÿæ˜¯ä¸ä¼šé‚®ä»¶æé†’çš„~</strong></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»è¿‡ä¸€æ®µæ—¶é—´çš„æŠ˜è…¾å¤šè¯´ï¼Œåšä¸»å‘ç°åŸæ¥å¤šè¯´æ˜¯ä¸æ”¯æŒä¸»åŠ¨è¯„è®ºæé†’çš„ã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æœåœ¨ä¸€ç¯‡åšå®¢ä¸­æœ‰äººä¸»åŠ¨è¯„è®ºç•™è¨€çš„è¯ï¼Œå¤šè¯´æ˜¯ä¸ä¼šé‚®ä»¶é€šçŸ¥çš„ã€‚é™¤éä»–å›å¤äº†ä½ ï¼Œé‚£ä¹ˆå¤šè¯´æ‰ä¼šé‚®ä»¶é€šçŸ¥ã€‚ï¼ˆæ€ªä¸å¾—åšä¸»è§‰å¾—ä¸€ä¼šå„¿æœ‰é‚®ä»¶æé†’ä¸€ä¼šå„¿æ²¡æœ‰å’‹ä¸ªè¿™ä¹ˆå¥‡æ€ªã€‚ã€‚ï¼‰&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;å»å¤šè¯´çš„å®˜æ–¹ä¸€ç•ªæŠ˜è…¾ï¼Œæ‰¾åˆ°äº†å®˜æ–¹æ–‡æ¡£ï¼Œæœ‰è¯´åˆ°ä½¿ç”¨&lt;code&gt;data-author-key&lt;/code&gt;å¯ä»¥è®¾ç½®ä¸»åŠ¨é‚®ä»¶æé†’,ä»¥ä¸‹ç»™å‡ºå¤šè¯´å®˜ç½‘è¯´æ˜çš„ä¼ é€é—¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;http://dev.duoshuo.com/docs/51435552047fe92f490225de&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;åŒæ­¥ç”¨æˆ·åˆ°å¤šè¯´&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;http://dev.duoshuo.com/docs/5003ecd94cab3e7250000008/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;è¯„è®ºæ¡†è°ƒç”¨ä»£ç å‚æ•°è¯´æ˜&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="Hexo" scheme="https://notes.wanghao.work/categories/Hexo/"/>
    
    
      <category term="Hexo" scheme="https://notes.wanghao.work/tags/Hexo/"/>
    
      <category term="å¤šè¯´" scheme="https://notes.wanghao.work/tags/%E5%A4%9A%E8%AF%B4/"/>
    
  </entry>
  
  <entry>
    <title>åŸºäºDebian Linuxæ­å»ºGitæœåŠ¡å™¨</title>
    <link href="https://notes.wanghao.work/2015-07-18-%E5%9F%BA%E4%BA%8EDebian-Linux%E6%90%AD%E5%BB%BAGit%E6%9C%8D%E5%8A%A1%E5%99%A8.html"/>
    <id>https://notes.wanghao.work/2015-07-18-åŸºäºDebian-Linuxæ­å»ºGitæœåŠ¡å™¨.html</id>
    <published>2015-07-18T09:47:37.000Z</published>
    <updated>2017-06-14T15:36:38.000Z</updated>
    
    <content type="html"><![CDATA[<p>&ensp;&ensp;&ensp;&ensp;å› ä¸ºä¸€äº›ä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼ŒæŸäº›é¡¹ç›®ä¸é€‚åˆå¼€æºï¼ˆä»£ç å†™çš„çƒ‚æˆ‘ä¼šä¹±è¯´ï¼Ÿ(â•¯ï¹â•°)b ï¼‰ã€‚åˆå› ä¸ºåšä¸»ä¸æ˜¯å£•ï¼Œä¹°ä¸èµ·Githubçš„ç§æœ‰ç©ºé—´ï¼Œæ‰€ä»¥åªèƒ½åˆ©ç”¨æ‰‹å¤´ä¸Šçš„DebianæœåŠ¡å™¨æ­å»ºGitæœåŠ¡å™¨å’¯~</p>
<hr>
<h3 id="å®‰è£…Git"><a href="#å®‰è£…Git" class="headerlink" title="å®‰è£…Git"></a>å®‰è£…Git</h3><p>â€‚â€‚â€‚â€‚è¦æ­å»ºGitæœåŠ¡å™¨ï¼Œç¬¬ä¸€æ­¥å½“ç„¶æ˜¯è¦å®‰è£…Gitäº†ï¼Œé”®å…¥ä»¥ä¸‹å‘½ä»¤æ¥å®ŒæˆGitçš„å®‰è£…ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install git</div></pre></td></tr></table></figure>
<h3 id="æ–°å»ºGitç”¨æˆ·"><a href="#æ–°å»ºGitç”¨æˆ·" class="headerlink" title="æ–°å»ºGitç”¨æˆ·"></a>æ–°å»ºGitç”¨æˆ·</h3><p>&ensp;&ensp;&ensp;&ensp;å‡ºäºå®‰å…¨çš„åŸå› è€ƒè™‘ï¼Œæˆ‘ä»¬è‚¯å®šæ˜¯ä¸ä¼šä½¿ç”¨<code>root</code>æˆ–è€…å…¶å®ƒå…·æœ‰å®Œæ•´çš„shellæ‰§è¡Œæƒé™çš„ç”¨æˆ·æ¥è¿è¡ŒGitçš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª<code>git</code>ç”¨æˆ·æ¥è¿è¡Œ<code>git</code>æœåŠ¡ã€‚</p>
<p>é”®å…¥ä»¥ä¸‹å‘½ä»¤æ¥å®Œæˆ<code>git</code>ç”¨æˆ·çš„åˆ›å»ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo adduser git</div></pre></td></tr></table></figure>
<p>åˆ›å»ºç”¨æˆ·çš„é€”ä¸­ä¼šè¦æ±‚è¾“å…¥ç”¨æˆ·å¯†ç ï¼Œè¿™ä¸ªå¯†ç è¯·åŠ¡å¿…è®°ä½ï¼Œè¿™ä¸ªå¯†ç çš„ä½œç”¨æˆ‘ä»¬åé¢å†è¯´ã€‚<code>git</code>ç”¨æˆ·çš„å…¶å®ƒé…ç½®ä½¿ç”¨é»˜è®¤å€¼ç›´æ¥å›è½¦å°±è¡Œã€‚</p>
<h3 id="ç¦ç”¨shellç™»å½•"><a href="#ç¦ç”¨shellç™»å½•" class="headerlink" title="ç¦ç”¨shellç™»å½•"></a>ç¦ç”¨shellç™»å½•</h3><p><code>git</code>ç”¨æˆ·åˆ›å»ºå®Œæˆä¹‹åï¼Œç³»ç»Ÿé»˜è®¤æ˜¯ä¸ºå…¶åˆ†é…çš„<code>bash</code>çš„ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›<code>git</code>ç”¨æˆ·æ‹¥æœ‰shellæ‰§è¡Œæƒé™ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ›´æ”¹<code>git</code>ç”¨æˆ·çš„é»˜è®¤shellï¼Œä½¿å…¶ä¸å…è®¸ç™»å½•shellã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ç¼–è¾‘<font color="red"><code>/etc/passwd</code></font>æ–‡ä»¶æ¥å®Œæˆå¯¹<code>git</code>ç”¨æˆ·shellçš„æ›´æ”¹ã€‚</p>
<p>é”®å…¥ä»¥ä¸‹å‘½ä»¤ç¼–è¾‘<font color="red"><code>/etc/passwd</code></font>æ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vim /etc/passwd</div></pre></td></tr></table></figure>
<a id="more"></a>
<p>æ‰¾åˆ°ç±»ä¼¼ä¸‹é¢çš„ä¸€è¡Œï¼ˆä¸€èˆ¬åœ¨æ–‡ä»¶çš„æœ«å°¾ï¼‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git:x:1000:1000:,,,:/home/git:/usr/bin/bash</div></pre></td></tr></table></figure>
<p>ä¿®æ”¹ä¸ºï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git:x:1000:1000:,,,:/home/git:/usr/bin/git-shell</div></pre></td></tr></table></figure></p>
<p>å¦‚æœä½ ä¸ç¡®å®š<font color="red"><code>git-shell</code></font>æ˜¯ä¸æ˜¯åœ¨<font color="red"><code>/usr/bin/git-shell</code></font>è¿™ä¸ªä½ç½®çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹<code>git-shell</code>çš„è·¯å¾„ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">which</span> git-shell</div></pre></td></tr></table></figure></p>
<p>è¿™æ ·ï¼Œ<code>git</code>ç”¨æˆ·å¯ä»¥æ­£å¸¸é€šè¿‡<code>ssh</code>ä½¿ç”¨gitï¼Œä½†æ— æ³•ç™»å½•shellï¼Œå› ä¸ºæˆ‘ä»¬ä¸º<code>gitç”¨æˆ·</code>æŒ‡å®šçš„<code>git-shell</code>æ¯æ¬¡ä¸€ç™»å½•å°±è‡ªåŠ¨é€€å‡ºã€‚</p>
<h3 id="Gitå¯†é’¥ç™»å½•"><a href="#Gitå¯†é’¥ç™»å½•" class="headerlink" title="Gitå¯†é’¥ç™»å½•"></a>Gitå¯†é’¥ç™»å½•</h3><p>æ—¢ç„¶æ˜¯ç§æœ‰GitæœåŠ¡å™¨ï¼Œå½“ç„¶å¿…è¦çš„<code>push</code>å’Œ<code>pull</code>ä»¥åŠ<code>clone</code>ç­‰æ“ä½œä¸èƒ½è®©å…¶ä»–æœªç»å…è®¸çš„äººä½¿ç”¨äº†ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿä¸æƒ³æ¯æ¬¡è¿›è¡Œè¿œç¨‹ä»“åº“æ“ä½œçš„æ—¶å€™éƒ½è¾“å…¥<code>git</code>ç”¨æˆ·çš„å¯†ç ã€‚</p>
<p>å› æ­¤ï¼Œé€šè¿‡sshå¯†é’¥è¯ä¹¦çš„æ–¹å¼å°±å¾ˆæœ‰å¿…è¦äº†~</p>
<ul>
<li>å¦‚åŒGithubå¯¼å…¥å…¬é’¥ä¸€æ ·ï¼Œé¦–å…ˆæ”¶é›†æˆæƒè®¿é—®ç”¨æˆ·çš„å…¬é’¥æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯ä»–ä»¬çš„<font color="red"><code>id_rsa.pub</code></font>æ–‡ä»¶ã€‚</li>
<li>å¤åˆ¶<code>id_rsa.pub</code>æ–‡ä»¶å…¶ä¸­å…¨éƒ¨çš„å†…å®¹ã€‚</li>
<li>å°†<font color="red"><code>id_rsa.pub</code></font>æ–‡ä»¶å…¶ä¸­å…¨éƒ¨çš„å†…å®¹å¯¼å…¥åˆ°GitæœåŠ¡å™¨çš„<font color="red"><code>/home/git/.ssh/authorized_keys</code></font>æ–‡ä»¶ä¸­ï¼Œæ¯ä¸€è¡Œå¯¼å…¥ä¸€ä¸ªå…¬é’¥æ–‡ä»¶ã€‚</li>
</ul>
<p>å¦‚æœæ²¡æœ‰<font color="red"><code>/home/git/.ssh/authorized_keys</code></font>æ–‡ä»¶ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è‡ªè¡Œåˆ›å»ºï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /home/git</div><div class="line">mkdir .ssh</div><div class="line"><span class="built_in">cd</span> .ssh</div><div class="line">touch authorized_keys</div></pre></td></tr></table></figure></p>
<p><strong>è¿™æ ·ï¼Œå‡¡æ˜¯æ·»åŠ äº†å…¬é’¥åˆ°<font color="red"><code>/home/git/.ssh/authorized_keys</code></font>æ–‡ä»¶çš„ç”¨æˆ·éƒ½èƒ½å¤Ÿæ­£å¸¸çš„ä½¿ç”¨è¿œç¨‹ä»“åº“çš„å¸¸ç”¨æ“ä½œäº†ï¼Œå¦‚æœGitå…¬é’¥æ²¡æœ‰è¢«æ·»åŠ åˆ°<font color="red"><code>/home/git/.ssh/authorized_keys</code></font>æ–‡ä»¶ä¸­åˆæƒ³æ‰§è¡Œè¿œç¨‹ä»“åº“çš„æ“ä½œçš„è¯ï¼Œé‚£ä¹ˆå°±éœ€è¦ç”¨åˆ°ä¸Šé¢<code>git</code>ç”¨æˆ·çš„å¯†ç äº†ï¼Œå› ä¸º<code>git</code>ä¼šè¦æ±‚è¾“å…¥GitæœåŠ¡å™¨çš„<code>git</code>ç”¨æˆ·çš„å¯†ç ã€‚è¿™å°±æ˜¯ä¸Šé¢è®¾ç½®<code>git</code>ç”¨æˆ·å¯†ç çš„ä½œç”¨äº†~</strong></p>
<h3 id="åˆå§‹åŒ–æœåŠ¡å™¨Gitä»“åº“"><a href="#åˆå§‹åŒ–æœåŠ¡å™¨Gitä»“åº“" class="headerlink" title="åˆå§‹åŒ–æœåŠ¡å™¨Gitä»“åº“"></a>åˆå§‹åŒ–æœåŠ¡å™¨Gitä»“åº“</h3><p>ä¸Šé¢çš„å‡†å¤‡å·¥ä½œåšå®Œï¼Œå°±éœ€è¦åœ¨GitæœåŠ¡å™¨ä¸Šé€‰å®šä¸€ä¸ªç›®å½•ä½œä¸ºGitä»“åº“äº†ã€‚å‡å®šæˆ‘ä»¬é€‰æ‹©<font color="red"><code>/gitserver/Demo.git</code></font>ä½œä¸ºGitä»“åº“ï¼Œé‚£ä¹ˆæˆ‘ä»¬é¦–å…ˆéœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»º<font color="red"><code>/gitserver</code></font>ç›®å½•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /</div><div class="line">mkdir gitserver</div><div class="line"><span class="built_in">cd</span> gitserver</div></pre></td></tr></table></figure>
<p>ç„¶åè¿›å…¥<code>gitserver</code>ç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo git init --bare demo.git</div></pre></td></tr></table></figure>
<p>Gitå°±ä¼šåˆ›å»ºä¸€ä¸ªè£¸ä»“åº“ï¼Œè£¸ä»“åº“æ²¡æœ‰å·¥ä½œåŒºï¼Œå› ä¸ºGitæœåŠ¡å™¨ä¸Šçš„Gitä»“åº“ä¸»è¦æ˜¯ä¸ºäº†å…±äº«ï¼Œæ‰€ä»¥ä¸è®©ç”¨æˆ·ç›´æ¥ç™»å½•åˆ°GitæœåŠ¡å™¨ä¸Šå»ä¿®æ”¹å·¥ä½œåŒºã€‚</p>
<p><strong>GitæœåŠ¡å™¨ä¸Šçš„Gitä»“åº“é€šå¸¸éƒ½ä»¥<font color="red"><code>.git</code></font>ç»“å°¾ã€‚</strong></p>
<h3 id="ä¿®æ”¹Gitä»“åº“owner"><a href="#ä¿®æ”¹Gitä»“åº“owner" class="headerlink" title="ä¿®æ”¹Gitä»“åº“owner"></a>ä¿®æ”¹Gitä»“åº“owner</h3><p>åˆ›å»ºå¥½ä»“åº“ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å°†ä»“åº“çš„ownerè®¾ç½®ä¸º<code>git</code>ç”¨æˆ·ï¼Œä¸è®©æˆ‘ä»¬å‰é¢ä¸º<code>git</code>ç”¨æˆ·æ‰€åšçš„é…ç½®å°±æ²¡å•¥æ„ä¹‰äº†~</p>
<p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä¿®æ”¹ä»“åº“çš„ownerï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo chown -R git:git demo.git</div></pre></td></tr></table></figure></p>
<h3 id="å…‹éš†è¿œç¨‹ä»“åº“"><a href="#å…‹éš†è¿œç¨‹ä»“åº“" class="headerlink" title="å…‹éš†è¿œç¨‹ä»“åº“"></a>å…‹éš†è¿œç¨‹ä»“åº“</h3><p>ç°åœ¨å°±å¯ä»¥é€šè¿‡<code>git clone</code>å‘½ä»¤å…‹éš†GitæœåŠ¡å™¨ä¸Šçš„<code>demo</code>ä»“åº“äº†ï¼Œåœ¨å„è‡ªçš„PCä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä»¥å®Œæˆå…‹éš†ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git <span class="built_in">clone</span> ssh://git@server:/gitserver/demo.git</div><div class="line">Cloning into <span class="string">'demo'</span>...</div><div class="line">warning: You appear to have cloned an empty repository.</div></pre></td></tr></table></figure>
<p>å…¶ä¸­éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p>
<ul>
<li>ä¸Šè¿°å‘½ä»¤<code>git clone ssh://git@SERVER:/gitserver/demo.git</code>ä¸­,<font color="red"><code>SERVER</code></font>çš„å€¼ä¸ºä½ çš„æœåŠ¡å™¨çš„<font color="red"><code>ipåœ°å€</code></font>æˆ–è€…<font color="red"><code>åŸŸå</code></font>ã€‚</li>
<li>å¦‚æœä½ çš„æœåŠ¡å™¨æ›´æ”¹äº†é»˜è®¤çš„sshç«¯å£å·ï¼Œé‚£ä¹ˆéœ€è¦åœ¨åœ°å€ä¸­æŒ‡å‡ºï¼Œåƒè¿™æ ·ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git <span class="built_in">clone</span> ssh://git@server:PORT/gitserver/demo.git</div></pre></td></tr></table></figure>
<p>å…¶ä¸­<font color="red"><code>PORT</code></font>å³ä¸ºæ›´æ”¹ä¹‹åçš„sshç«¯å£å·ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåšä¸»å¯¹æœåŠ¡å™¨åšäº†Aè®°å½•çš„åŸŸåè§£æï¼Œä¹Ÿæ›´æ”¹äº†é»˜è®¤ç«¯å£å·ä¸º9669ï¼Œé‚£ä¹ˆæ‰§è¡Œçš„å…‹éš†åœ°å€çš„å‘½ä»¤å³ä¸ºï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git <span class="built_in">clone</span> ssh://git@server.xiamo.tk:9669/gitserver/demo.git</div></pre></td></tr></table></figure></p>
<p>åé¢çš„æ“ä½œä¸ç”¨æˆ‘å¤šè¯´ï¼Œå¤§å®¶ä¹Ÿéƒ½æ‡‚çš„äº†~</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;å› ä¸ºä¸€äº›ä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼ŒæŸäº›é¡¹ç›®ä¸é€‚åˆå¼€æºï¼ˆä»£ç å†™çš„çƒ‚æˆ‘ä¼šä¹±è¯´ï¼Ÿ(â•¯ï¹â•°)b ï¼‰ã€‚åˆå› ä¸ºåšä¸»ä¸æ˜¯å£•ï¼Œä¹°ä¸èµ·Githubçš„ç§æœ‰ç©ºé—´ï¼Œæ‰€ä»¥åªèƒ½åˆ©ç”¨æ‰‹å¤´ä¸Šçš„DebianæœåŠ¡å™¨æ­å»ºGitæœåŠ¡å™¨å’¯~&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&quot;å®‰è£…Git&quot;&gt;&lt;a href=&quot;#å®‰è£…Git&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…Git&quot;&gt;&lt;/a&gt;å®‰è£…Git&lt;/h3&gt;&lt;p&gt;â€‚â€‚â€‚â€‚è¦æ­å»ºGitæœåŠ¡å™¨ï¼Œç¬¬ä¸€æ­¥å½“ç„¶æ˜¯è¦å®‰è£…Gitäº†ï¼Œé”®å…¥ä»¥ä¸‹å‘½ä»¤æ¥å®ŒæˆGitçš„å®‰è£…ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;sudo apt-get install git&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;æ–°å»ºGitç”¨æˆ·&quot;&gt;&lt;a href=&quot;#æ–°å»ºGitç”¨æˆ·&quot; class=&quot;headerlink&quot; title=&quot;æ–°å»ºGitç”¨æˆ·&quot;&gt;&lt;/a&gt;æ–°å»ºGitç”¨æˆ·&lt;/h3&gt;&lt;p&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;å‡ºäºå®‰å…¨çš„åŸå› è€ƒè™‘ï¼Œæˆ‘ä»¬è‚¯å®šæ˜¯ä¸ä¼šä½¿ç”¨&lt;code&gt;root&lt;/code&gt;æˆ–è€…å…¶å®ƒå…·æœ‰å®Œæ•´çš„shellæ‰§è¡Œæƒé™çš„ç”¨æˆ·æ¥è¿è¡ŒGitçš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª&lt;code&gt;git&lt;/code&gt;ç”¨æˆ·æ¥è¿è¡Œ&lt;code&gt;git&lt;/code&gt;æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;é”®å…¥ä»¥ä¸‹å‘½ä»¤æ¥å®Œæˆ&lt;code&gt;git&lt;/code&gt;ç”¨æˆ·çš„åˆ›å»ºï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;sudo adduser git&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åˆ›å»ºç”¨æˆ·çš„é€”ä¸­ä¼šè¦æ±‚è¾“å…¥ç”¨æˆ·å¯†ç ï¼Œè¿™ä¸ªå¯†ç è¯·åŠ¡å¿…è®°ä½ï¼Œè¿™ä¸ªå¯†ç çš„ä½œç”¨æˆ‘ä»¬åé¢å†è¯´ã€‚&lt;code&gt;git&lt;/code&gt;ç”¨æˆ·çš„å…¶å®ƒé…ç½®ä½¿ç”¨é»˜è®¤å€¼ç›´æ¥å›è½¦å°±è¡Œã€‚&lt;/p&gt;
&lt;h3 id=&quot;ç¦ç”¨shellç™»å½•&quot;&gt;&lt;a href=&quot;#ç¦ç”¨shellç™»å½•&quot; class=&quot;headerlink&quot; title=&quot;ç¦ç”¨shellç™»å½•&quot;&gt;&lt;/a&gt;ç¦ç”¨shellç™»å½•&lt;/h3&gt;&lt;p&gt;&lt;code&gt;git&lt;/code&gt;ç”¨æˆ·åˆ›å»ºå®Œæˆä¹‹åï¼Œç³»ç»Ÿé»˜è®¤æ˜¯ä¸ºå…¶åˆ†é…çš„&lt;code&gt;bash&lt;/code&gt;çš„ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›&lt;code&gt;git&lt;/code&gt;ç”¨æˆ·æ‹¥æœ‰shellæ‰§è¡Œæƒé™ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ›´æ”¹&lt;code&gt;git&lt;/code&gt;ç”¨æˆ·çš„é»˜è®¤shellï¼Œä½¿å…¶ä¸å…è®¸ç™»å½•shellã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥é€šè¿‡ç¼–è¾‘&lt;font color=&quot;red&quot;&gt;&lt;code&gt;/etc/passwd&lt;/code&gt;&lt;/font&gt;æ–‡ä»¶æ¥å®Œæˆå¯¹&lt;code&gt;git&lt;/code&gt;ç”¨æˆ·shellçš„æ›´æ”¹ã€‚&lt;/p&gt;
&lt;p&gt;é”®å…¥ä»¥ä¸‹å‘½ä»¤ç¼–è¾‘&lt;font color=&quot;red&quot;&gt;&lt;code&gt;/etc/passwd&lt;/code&gt;&lt;/font&gt;æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;vim /etc/passwd&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://notes.wanghao.work/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://notes.wanghao.work/tags/Linux/"/>
    
      <category term="Git" scheme="https://notes.wanghao.work/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>è‡ªåŠ¨å¤‡ä»½Hexoåšå®¢æºæ–‡ä»¶</title>
    <link href="https://notes.wanghao.work/2015-07-06-%E8%87%AA%E5%8A%A8%E5%A4%87%E4%BB%BDHexo%E5%8D%9A%E5%AE%A2%E6%BA%90%E6%96%87%E4%BB%B6.html"/>
    <id>https://notes.wanghao.work/2015-07-06-è‡ªåŠ¨å¤‡ä»½Hexoåšå®¢æºæ–‡ä»¶.html</id>
    <published>2015-07-06T04:49:01.000Z</published>
    <updated>2017-06-14T15:37:04.000Z</updated>
    
    <content type="html"><![CDATA[<p>&ensp;&ensp;ç”¨Hexoå†™åšå®¢æ˜¯ä¸€ä»¶æ¯”è¾ƒäº«å—çš„äº‹æƒ…ï¼Œæ— å¥ˆå¦‚æœæ¢ç”µè„‘çš„è¯ï¼Œå¤‡ä»½åšå®¢å°±æ˜¯ä¸€ä»¶æ¯”è¾ƒé—¹å¿ƒçš„äº‹æƒ…ã€‚</p>
<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>&ensp;&ensp;æˆ‘æ›¾ç»ç»™å‡ºè¿‡é€šè¿‡Gitå¤‡ä»½Hexoåšå®¢æºæ–‡ä»¶çš„æ–¹å¼ï¼Œè¿™ç§æ–¹å¼è™½ç„¶èƒ½å¤Ÿå¤‡ä»½Hexoåšå®¢çš„æºæ–‡ä»¶ï¼Œä½†æ˜¯å¯¹äºåšä¸»è¿™ç§æ‡’äººï¼Œæ¯æ¬¡æ›´æ–°åšæ–‡éƒ½éœ€è¦è¾“å…¥ä¸¤ä¸‰è¡Œé‡å¤çš„Gitå‘½ä»¤çœŸæ˜¯ä¸€ä»¶éº»çƒ¦çš„äº‹æƒ…ã€‚å†µä¸”æŒ‡ä¸å®šå“ªå¤©å°±æå¿˜pushåˆ°githubä¸Šäº†ã€‚</p>
<a id="more"></a>
<h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>å‰ä¸¤å¤©åšä¸»åˆšåˆšç¼–å†™è¿‡å…³äº<strong><a href="https://notes.wanghao.work/2015-06-29-Hexo%E6%B7%BB%E5%8A%A0%E6%96%87%E7%AB%A0%E6%97%B6%E8%87%AA%E5%8A%A8%E6%89%93%E5%BC%80%E7%BC%96%E8%BE%91%E5%99%A8.html">Hexoæ·»åŠ æ–‡ç« æ—¶è‡ªåŠ¨æ‰“å¼€ç¼–è¾‘å™¨</a></strong>çš„ç›¸å…³æ–‡ç« ï¼Œå…¶åŸç†å°±æ˜¯åˆ©ç”¨<code>NodeJS</code>çš„äº‹ä»¶ç›‘å¬æœºåˆ¶å®ç°ç›‘å¬Hexoçš„<code>new</code>äº‹ä»¶æ¥å¯åŠ¨ç¼–è¾‘å™¨ï¼Œå®Œæˆè‡ªåŠ¨å¯åŠ¨ç¼–è¾‘å™¨çš„æ“ä½œã€‚</p>
<p>é‚£ä¹ˆå¯ä¸å¯ä»¥é€šè¿‡é€šè¿‡ç›‘å¬Hexoçš„å…¶å®ƒäº‹ä»¶æ¥å®Œæˆè‡ªåŠ¨æ‰§è¡ŒGitå‘½ä»¤å®Œæˆè‡ªåŠ¨å¤‡ä»½å‘¢ï¼Ÿé€šè¿‡æŸ¥é˜…<a href="https://hexo.io/zh-cn/api/events.html" target="_blank" rel="external">Hexoæ–‡æ¡£</a>ï¼Œæ‰¾åˆ°äº†Hexoçš„ä¸»è¦äº‹ä»¶ï¼Œè§ä¸‹è¡¨ï¼š</p>
<table>
<thead>
<tr>
<th>äº‹ä»¶å</th>
<th>äº‹ä»¶å‘ç”Ÿæ—¶é—´</th>
</tr>
</thead>
<tbody>
<tr>
<td>deployBefore</td>
<td>åœ¨éƒ¨ç½²å®Œæˆå‰å‘å¸ƒ</td>
</tr>
<tr>
<td>deployAfter</td>
<td>åœ¨éƒ¨ç½²æˆåŠŸåå‘å¸ƒ</td>
</tr>
<tr>
<td>exit</td>
<td>åœ¨ Hexo ç»“æŸå‰å‘å¸ƒ</td>
</tr>
<tr>
<td>generateBefore</td>
<td>åœ¨é™æ€æ–‡ä»¶ç”Ÿæˆå‰å‘å¸ƒ</td>
</tr>
<tr>
<td>generateAfter</td>
<td>åœ¨é™æ€æ–‡ä»¶ç”Ÿæˆåå‘å¸ƒ</td>
</tr>
<tr>
<td>new</td>
<td>åœ¨æ–‡ç« æ–‡ä»¶å»ºç«‹åå‘å¸ƒ</td>
</tr>
</tbody>
</table>
<p>äºæ˜¯æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ç›‘å¬Hexoçš„<code>deployAfter</code>äº‹ä»¶ï¼Œå¾…ä¸Šä¼ å®Œæˆä¹‹åè‡ªåŠ¨è¿è¡ŒGitå¤‡ä»½å‘½ä»¤ï¼Œä»è€Œè¾¾åˆ°è‡ªåŠ¨å¤‡ä»½çš„ç›®çš„ã€‚</p>
<h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><h4 id="å°†Hexoç›®å½•åŠ å…¥Gitä»“åº“"><a href="#å°†Hexoç›®å½•åŠ å…¥Gitä»“åº“" class="headerlink" title="å°†Hexoç›®å½•åŠ å…¥Gitä»“åº“"></a>å°†Hexoç›®å½•åŠ å…¥Gitä»“åº“</h4><p>æœ¬è„šæœ¬éœ€è¦<font color="red"><code>æå‰</code></font>å°†HexoåŠ å…¥Gitä»“åº“å¹¶ä¸Githubæˆ–è€…Gitcafeè¿œç¨‹ä»“åº“ç»‘å®šä¹‹åï¼Œæ‰èƒ½æ­£å¸¸å·¥ä½œã€‚å¦‚æœä½ ä¸çŸ¥é“æ€ä¹ˆæ“ä½œï¼Œè¯·å‚è€ƒè¿™ç¯‡åšæ–‡ï¼š</p>
<ul>
<li><strong><a href="https://notes.wanghao.work/2015-04-06-%E5%A4%87%E4%BB%BDHexo%E5%8D%9A%E5%AE%A2%E6%BA%90%E6%96%87%E4%BB%B6.html">å¤‡ä»½Hexoåšå®¢æºæ–‡ä»¶</a></strong></li>
</ul>
<h4 id="å®‰è£…shelljsæ¨¡å—"><a href="#å®‰è£…shelljsæ¨¡å—" class="headerlink" title="å®‰è£…shelljsæ¨¡å—"></a>å®‰è£…<code>shelljs</code>æ¨¡å—</h4><p>è¦å®ç°è¿™ä¸ªè‡ªåŠ¨å¤‡ä»½åŠŸèƒ½ï¼Œéœ€è¦ä¾èµ–NodeJsçš„ä¸€ä¸ª<code>shelljs</code>æ¨¡å—,è¯¥æ¨¡å—é‡æ–°åŒ…è£…äº†<code>child_process</code>,è°ƒç”¨ç³»ç»Ÿå‘½ä»¤æ›´åŠ çš„æ–¹ä¾¿ã€‚ï¼ˆå…¶å®å°±æ˜¯å› ä¸ºåšä¸»æ‡’( â•¯â–½â•°)ï¼‰è¯¥æ¨¡å—éœ€è¦å®‰è£…åä½¿ç”¨ã€‚</p>
<p>åœ¨å‘½ä»¤ä¸­é”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œå®Œæˆ<code>shelljs</code>æ¨¡å—çš„å®‰è£…ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save shelljs</div></pre></td></tr></table></figure>
<h4 id="ç¼–å†™è‡ªåŠ¨å¤‡ä»½è„šæœ¬"><a href="#ç¼–å†™è‡ªåŠ¨å¤‡ä»½è„šæœ¬" class="headerlink" title="ç¼–å†™è‡ªåŠ¨å¤‡ä»½è„šæœ¬"></a>ç¼–å†™è‡ªåŠ¨å¤‡ä»½è„šæœ¬</h4><p>å¾…åˆ°æ¨¡å—å®‰è£…å®Œæˆï¼Œåœ¨<code>Hexo</code>æ ¹ç›®å½•çš„<code>scripts</code>æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªjsæ–‡ä»¶ï¼Œæ–‡ä»¶åéšæ„å–ã€‚</p>
<p><strong>å¦‚æœæ²¡æœ‰<code>scripts</code>ç›®å½•ï¼Œè¯·æ–°å»ºä¸€ä¸ªã€‚</strong></p>
<p>ç„¶ååœ¨è„šæœ¬ä¸­ï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>(<span class="string">'shelljs/global'</span>);</div><div class="line"></div><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">	hexo.on(<span class="string">'deployAfter'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="comment">//å½“deployå®Œæˆåæ‰§è¡Œå¤‡ä»½</span></div><div class="line">		run();</div><div class="line">	&#125;);</div><div class="line">&#125; <span class="keyword">catch</span> (e) &#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">"äº§ç”Ÿäº†ä¸€ä¸ªé”™è¯¯&lt;(ï¿£3ï¿£)&gt; !ï¼Œé”™è¯¯è¯¦æƒ…ä¸ºï¼š"</span> + e.toString());</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">if</span> (!which(<span class="string">'git'</span>)) &#123;</div><div class="line">		echo(<span class="string">'Sorry, this script requires git'</span>);</div><div class="line">		exit(<span class="number">1</span>);</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		echo(<span class="string">"======================Auto Backup Begin==========================="</span>);</div><div class="line">		cd(<span class="string">'D:/hexo'</span>);    <span class="comment">//æ­¤å¤„ä¿®æ”¹ä¸ºHexoæ ¹ç›®å½•è·¯å¾„</span></div><div class="line">		<span class="keyword">if</span> (exec(<span class="string">'git add --all'</span>).code !== <span class="number">0</span>) &#123;</div><div class="line">			echo(<span class="string">'Error: Git add failed'</span>);</div><div class="line">			exit(<span class="number">1</span>);</div><div class="line"></div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span> (exec(<span class="string">'git commit -am "Form auto backup script\'s commit"'</span>).code !== <span class="number">0</span>) &#123;</div><div class="line">			echo(<span class="string">'Error: Git commit failed'</span>);</div><div class="line">			exit(<span class="number">1</span>);</div><div class="line"></div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span> (exec(<span class="string">'git push origin master'</span>).code !== <span class="number">0</span>) &#123;</div><div class="line">			echo(<span class="string">'Error: Git push failed'</span>);</div><div class="line">			exit(<span class="number">1</span>);</div><div class="line"></div><div class="line">		&#125;</div><div class="line">		echo(<span class="string">"==================Auto Backup Complete============================"</span>)</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><p><strong>å…¶ä¸­ï¼Œéœ€è¦ä¿®æ”¹ç¬¬<font color="red"><code>17</code></font>è¡Œçš„<font color="red"><code>D:/hexo</code></font>è·¯å¾„ä¸ºHexoçš„æ ¹ç›®å½•è·¯å¾„ã€‚ï¼ˆè„šæœ¬ä¸­çš„è·¯å¾„ä¸ºåšä¸»çš„Hexoè·¯å¾„ï¼‰</strong></p>
</li>
<li><p><strong>å¦‚æœä½ çš„Gitè¿œç¨‹ä»“åº“åç§°ä¸ä¸º<font color="red"><code>origin</code></font>çš„è¯ï¼Œè¿˜éœ€è¦ä¿®æ”¹ç¬¬<font color="red"><code>28</code></font>è¡Œæ‰§è¡Œçš„pushå‘½ä»¤ï¼Œä¿®æ”¹æˆè‡ªå·±çš„è¿œç¨‹ä»“åº“åå’Œç›¸åº”çš„åˆ†æ”¯åã€‚</strong></p>
</li>
</ul>
<p>ä¿å­˜è„šæœ¬å¹¶é€€å‡ºï¼Œç„¶åæ‰§è¡Œ<code>hexo deploy</code>å‘½ä»¤ï¼Œå°†ä¼šå¾—åˆ°ç±»ä¼¼ä»¥ä¸‹ç»“æœ:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">INFO  Deploying: git&gt;</div><div class="line">INFO  Clearing .deploy folder...</div><div class="line">INFO  Copying files from public folder...</div><div class="line">[master 3020788] Site updated: 2015-07-06 15:08:06</div><div class="line"> 5 files changed, 160 insertions(+), 58 deletions(-)</div><div class="line">Branch master <span class="built_in">set</span> up to track remote branch gh-pages from git@github.com:smilexi</div><div class="line">amo/notes.git.</div><div class="line">To git@github.com:smilexiamo/notes.git</div><div class="line">   02adbe4..3020788  master -&gt; gh-pages</div><div class="line">On branch master</div><div class="line">nothing to commit, working directory clean</div><div class="line">Branch master <span class="built_in">set</span> up to track remote branch gitcafe-pages from git@gitcafe.com:s</div><div class="line">milexiamo/smilexiamo.git.</div><div class="line">To git@gitcafe.com:smilexiamo/smilexiamo.git</div><div class="line">   02adbe4..3020788  master -&gt; gitcafe-pages</div><div class="line">INFO  Deploy <span class="keyword">done</span>: git</div><div class="line">======================Auto Backup Begin===========================</div><div class="line">[master f044360] Form auto backup script<span class="string">'s commit</span></div><div class="line"><span class="string"> 2 files changed, 35 insertions(+), 2 deletions(-)</span></div><div class="line"><span class="string"> rewrite db.json (100%)</span></div><div class="line"><span class="string">To git@github.com:smilexiamo/hexo.git</span></div><div class="line"><span class="string">   8f2b4b4..f044360  master -&gt; master</span></div><div class="line"><span class="string">==================Auto Backup Complete============================</span></div></pre></td></tr></table></figure>
<p>è¿™æ ·å­ï¼Œæ¯æ¬¡æ›´æ–°åšæ–‡å¹¶<code>deploy</code>åˆ°æœåŠ¡å™¨ä¸Šä¹‹åï¼Œå¤‡ä»½å°±è‡ªåŠ¨å¯åŠ¨å¹¶å®Œæˆå¤‡ä»½å•¦~æ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿å‘¢ï¼Ÿ</p>
<p>Enjoy itï¼</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;ensp;&amp;ensp;ç”¨Hexoå†™åšå®¢æ˜¯ä¸€ä»¶æ¯”è¾ƒäº«å—çš„äº‹æƒ…ï¼Œæ— å¥ˆå¦‚æœæ¢ç”µè„‘çš„è¯ï¼Œå¤‡ä»½åšå®¢å°±æ˜¯ä¸€ä»¶æ¯”è¾ƒé—¹å¿ƒçš„äº‹æƒ…ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h3&gt;&lt;p&gt;&amp;ensp;&amp;ensp;æˆ‘æ›¾ç»ç»™å‡ºè¿‡é€šè¿‡Gitå¤‡ä»½Hexoåšå®¢æºæ–‡ä»¶çš„æ–¹å¼ï¼Œè¿™ç§æ–¹å¼è™½ç„¶èƒ½å¤Ÿå¤‡ä»½Hexoåšå®¢çš„æºæ–‡ä»¶ï¼Œä½†æ˜¯å¯¹äºåšä¸»è¿™ç§æ‡’äººï¼Œæ¯æ¬¡æ›´æ–°åšæ–‡éƒ½éœ€è¦è¾“å…¥ä¸¤ä¸‰è¡Œé‡å¤çš„Gitå‘½ä»¤çœŸæ˜¯ä¸€ä»¶éº»çƒ¦çš„äº‹æƒ…ã€‚å†µä¸”æŒ‡ä¸å®šå“ªå¤©å°±æå¿˜pushåˆ°githubä¸Šäº†ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Hexo" scheme="https://notes.wanghao.work/categories/Hexo/"/>
    
    
      <category term="Hexo" scheme="https://notes.wanghao.work/tags/Hexo/"/>
    
  </entry>
  
</feed>
